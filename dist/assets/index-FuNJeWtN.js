var N_=t=>{throw TypeError(t)};var If=(t,e,n)=>e.has(t)||N_("Cannot "+n);var P=(t,e,n)=>(If(t,e,"read from private field"),n?n.call(t):e.get(t)),ee=(t,e,n)=>e.has(t)?N_("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),W=(t,e,n,r)=>(If(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),de=(t,e,n)=>(If(t,e,"access private method"),n);var Zu=(t,e,n,r)=>({set _(s){W(t,e,s,n)},get _(){return P(t,e,r)}});function _k(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function wk(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var PT={exports:{}},hd={},NT={exports:{}},pe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var du=Symbol.for("react.element"),Ek=Symbol.for("react.portal"),Tk=Symbol.for("react.fragment"),Sk=Symbol.for("react.strict_mode"),xk=Symbol.for("react.profiler"),Rk=Symbol.for("react.provider"),Ik=Symbol.for("react.context"),bk=Symbol.for("react.forward_ref"),kk=Symbol.for("react.suspense"),Ck=Symbol.for("react.memo"),Ak=Symbol.for("react.lazy"),O_=Symbol.iterator;function Pk(t){return t===null||typeof t!="object"?null:(t=O_&&t[O_]||t["@@iterator"],typeof t=="function"?t:null)}var OT={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},LT=Object.assign,DT={};function ca(t,e,n){this.props=t,this.context=e,this.refs=DT,this.updater=n||OT}ca.prototype.isReactComponent={};ca.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ca.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function MT(){}MT.prototype=ca.prototype;function Tg(t,e,n){this.props=t,this.context=e,this.refs=DT,this.updater=n||OT}var Sg=Tg.prototype=new MT;Sg.constructor=Tg;LT(Sg,ca.prototype);Sg.isPureReactComponent=!0;var L_=Array.isArray,VT=Object.prototype.hasOwnProperty,xg={current:null},jT={key:!0,ref:!0,__self:!0,__source:!0};function UT(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)VT.call(e,r)&&!jT.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:du,type:t,key:i,ref:o,props:s,_owner:xg.current}}function Nk(t,e){return{$$typeof:du,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Rg(t){return typeof t=="object"&&t!==null&&t.$$typeof===du}function Ok(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var D_=/\/+/g;function bf(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Ok(""+t.key):e.toString(36)}function Pc(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case du:case Ek:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+bf(o,0):r,L_(s)?(n="",t!=null&&(n=t.replace(D_,"$&/")+"/"),Pc(s,e,n,"",function(c){return c})):s!=null&&(Rg(s)&&(s=Nk(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(D_,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",L_(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+bf(i,a);o+=Pc(i,e,n,l,s)}else if(l=Pk(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+bf(i,a++),o+=Pc(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function ec(t,e,n){if(t==null)return t;var r=[],s=0;return Pc(t,r,"","",function(i){return e.call(n,i,s++)}),r}function Lk(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ht={current:null},Nc={transition:null},Dk={ReactCurrentDispatcher:Ht,ReactCurrentBatchConfig:Nc,ReactCurrentOwner:xg};function FT(){throw Error("act(...) is not supported in production builds of React.")}pe.Children={map:ec,forEach:function(t,e,n){ec(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ec(t,function(){e++}),e},toArray:function(t){return ec(t,function(e){return e})||[]},only:function(t){if(!Rg(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};pe.Component=ca;pe.Fragment=Tk;pe.Profiler=xk;pe.PureComponent=Tg;pe.StrictMode=Sk;pe.Suspense=kk;pe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Dk;pe.act=FT;pe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=LT({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=xg.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)VT.call(e,l)&&!jT.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:du,type:t.type,key:s,ref:i,props:r,_owner:o}};pe.createContext=function(t){return t={$$typeof:Ik,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Rk,_context:t},t.Consumer=t};pe.createElement=UT;pe.createFactory=function(t){var e=UT.bind(null,t);return e.type=t,e};pe.createRef=function(){return{current:null}};pe.forwardRef=function(t){return{$$typeof:bk,render:t}};pe.isValidElement=Rg;pe.lazy=function(t){return{$$typeof:Ak,_payload:{_status:-1,_result:t},_init:Lk}};pe.memo=function(t,e){return{$$typeof:Ck,type:t,compare:e===void 0?null:e}};pe.startTransition=function(t){var e=Nc.transition;Nc.transition={};try{t()}finally{Nc.transition=e}};pe.unstable_act=FT;pe.useCallback=function(t,e){return Ht.current.useCallback(t,e)};pe.useContext=function(t){return Ht.current.useContext(t)};pe.useDebugValue=function(){};pe.useDeferredValue=function(t){return Ht.current.useDeferredValue(t)};pe.useEffect=function(t,e){return Ht.current.useEffect(t,e)};pe.useId=function(){return Ht.current.useId()};pe.useImperativeHandle=function(t,e,n){return Ht.current.useImperativeHandle(t,e,n)};pe.useInsertionEffect=function(t,e){return Ht.current.useInsertionEffect(t,e)};pe.useLayoutEffect=function(t,e){return Ht.current.useLayoutEffect(t,e)};pe.useMemo=function(t,e){return Ht.current.useMemo(t,e)};pe.useReducer=function(t,e,n){return Ht.current.useReducer(t,e,n)};pe.useRef=function(t){return Ht.current.useRef(t)};pe.useState=function(t){return Ht.current.useState(t)};pe.useSyncExternalStore=function(t,e,n){return Ht.current.useSyncExternalStore(t,e,n)};pe.useTransition=function(){return Ht.current.useTransition()};pe.version="18.3.1";NT.exports=pe;var L=NT.exports;const BT=wk(L),Mk=_k({__proto__:null,default:BT},[L]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vk=L,jk=Symbol.for("react.element"),Uk=Symbol.for("react.fragment"),Fk=Object.prototype.hasOwnProperty,Bk=Vk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,$k={key:!0,ref:!0,__self:!0,__source:!0};function $T(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)Fk.call(e,r)&&!$k.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:jk,type:t,key:i,ref:o,props:s,_owner:Bk.current}}hd.Fragment=Uk;hd.jsx=$T;hd.jsxs=$T;PT.exports=hd;var g=PT.exports,Rp={},zT={exports:{}},dn={},qT={exports:{}},HT={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(q,Y){var re=q.length;q.push(Y);e:for(;0<re;){var Pe=re-1>>>1,Ce=q[Pe];if(0<s(Ce,Y))q[Pe]=Y,q[re]=Ce,re=Pe;else break e}}function n(q){return q.length===0?null:q[0]}function r(q){if(q.length===0)return null;var Y=q[0],re=q.pop();if(re!==Y){q[0]=re;e:for(var Pe=0,Ce=q.length,Xe=Ce>>>1;Pe<Xe;){var dr=2*(Pe+1)-1,fr=q[dr],pr=dr+1,mr=q[pr];if(0>s(fr,re))pr<Ce&&0>s(mr,fr)?(q[Pe]=mr,q[pr]=re,Pe=pr):(q[Pe]=fr,q[dr]=re,Pe=dr);else if(pr<Ce&&0>s(mr,re))q[Pe]=mr,q[pr]=re,Pe=pr;else break e}}return Y}function s(q,Y){var re=q.sortIndex-Y.sortIndex;return re!==0?re:q.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],h=1,f=null,p=3,y=!1,w=!1,b=!1,R=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(q){for(var Y=n(c);Y!==null;){if(Y.callback===null)r(c);else if(Y.startTime<=q)r(c),Y.sortIndex=Y.expirationTime,e(l,Y);else break;Y=n(c)}}function C(q){if(b=!1,x(q),!w)if(n(l)!==null)w=!0,Ve(M);else{var Y=n(c);Y!==null&&Mt(C,Y.startTime-q)}}function M(q,Y){w=!1,b&&(b=!1,T(_),_=-1),y=!0;var re=p;try{for(x(Y),f=n(l);f!==null&&(!(f.expirationTime>Y)||q&&!N());){var Pe=f.callback;if(typeof Pe=="function"){f.callback=null,p=f.priorityLevel;var Ce=Pe(f.expirationTime<=Y);Y=t.unstable_now(),typeof Ce=="function"?f.callback=Ce:f===n(l)&&r(l),x(Y)}else r(l);f=n(l)}if(f!==null)var Xe=!0;else{var dr=n(c);dr!==null&&Mt(C,dr.startTime-Y),Xe=!1}return Xe}finally{f=null,p=re,y=!1}}var U=!1,I=null,_=-1,S=5,k=-1;function N(){return!(t.unstable_now()-k<S)}function O(){if(I!==null){var q=t.unstable_now();k=q;var Y=!0;try{Y=I(!0,q)}finally{Y?A():(U=!1,I=null)}}else U=!1}var A;if(typeof v=="function")A=function(){v(O)};else if(typeof MessageChannel<"u"){var Ue=new MessageChannel,se=Ue.port2;Ue.port1.onmessage=O,A=function(){se.postMessage(null)}}else A=function(){R(O,0)};function Ve(q){I=q,U||(U=!0,A())}function Mt(q,Y){_=R(function(){q(t.unstable_now())},Y)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(q){q.callback=null},t.unstable_continueExecution=function(){w||y||(w=!0,Ve(M))},t.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<q?Math.floor(1e3/q):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(q){switch(p){case 1:case 2:case 3:var Y=3;break;default:Y=p}var re=p;p=Y;try{return q()}finally{p=re}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(q,Y){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var re=p;p=q;try{return Y()}finally{p=re}},t.unstable_scheduleCallback=function(q,Y,re){var Pe=t.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?Pe+re:Pe):re=Pe,q){case 1:var Ce=-1;break;case 2:Ce=250;break;case 5:Ce=1073741823;break;case 4:Ce=1e4;break;default:Ce=5e3}return Ce=re+Ce,q={id:h++,callback:Y,priorityLevel:q,startTime:re,expirationTime:Ce,sortIndex:-1},re>Pe?(q.sortIndex=re,e(c,q),n(l)===null&&q===n(c)&&(b?(T(_),_=-1):b=!0,Mt(C,re-Pe))):(q.sortIndex=Ce,e(l,q),w||y||(w=!0,Ve(M))),q},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(q){var Y=p;return function(){var re=p;p=Y;try{return q.apply(this,arguments)}finally{p=re}}}})(HT);qT.exports=HT;var zk=qT.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qk=L,cn=zk;function $(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var WT=new Set,bl={};function Bi(t,e){qo(t,e),qo(t+"Capture",e)}function qo(t,e){for(bl[t]=e,t=0;t<e.length;t++)WT.add(e[t])}var Or=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ip=Object.prototype.hasOwnProperty,Hk=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,M_={},V_={};function Wk(t){return Ip.call(V_,t)?!0:Ip.call(M_,t)?!1:Hk.test(t)?V_[t]=!0:(M_[t]=!0,!1)}function Kk(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Qk(t,e,n,r){if(e===null||typeof e>"u"||Kk(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Wt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Et={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Et[t]=new Wt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Et[e]=new Wt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Et[t]=new Wt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Et[t]=new Wt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Et[t]=new Wt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Et[t]=new Wt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Et[t]=new Wt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Et[t]=new Wt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Et[t]=new Wt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Ig=/[\-:]([a-z])/g;function bg(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Ig,bg);Et[e]=new Wt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Ig,bg);Et[e]=new Wt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Ig,bg);Et[e]=new Wt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Et[t]=new Wt(t,1,!1,t.toLowerCase(),null,!1,!1)});Et.xlinkHref=new Wt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Et[t]=new Wt(t,1,!1,t.toLowerCase(),null,!0,!0)});function kg(t,e,n,r){var s=Et.hasOwnProperty(e)?Et[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Qk(e,n,s,r)&&(n=null),r||s===null?Wk(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var qr=qk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,tc=Symbol.for("react.element"),oo=Symbol.for("react.portal"),ao=Symbol.for("react.fragment"),Cg=Symbol.for("react.strict_mode"),bp=Symbol.for("react.profiler"),KT=Symbol.for("react.provider"),QT=Symbol.for("react.context"),Ag=Symbol.for("react.forward_ref"),kp=Symbol.for("react.suspense"),Cp=Symbol.for("react.suspense_list"),Pg=Symbol.for("react.memo"),ts=Symbol.for("react.lazy"),GT=Symbol.for("react.offscreen"),j_=Symbol.iterator;function ja(t){return t===null||typeof t!="object"?null:(t=j_&&t[j_]||t["@@iterator"],typeof t=="function"?t:null)}var ze=Object.assign,kf;function Ya(t){if(kf===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);kf=e&&e[1]||""}return`
`+kf+t}var Cf=!1;function Af(t,e){if(!t||Cf)return"";Cf=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Cf=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ya(t):""}function Gk(t){switch(t.tag){case 5:return Ya(t.type);case 16:return Ya("Lazy");case 13:return Ya("Suspense");case 19:return Ya("SuspenseList");case 0:case 2:case 15:return t=Af(t.type,!1),t;case 11:return t=Af(t.type.render,!1),t;case 1:return t=Af(t.type,!0),t;default:return""}}function Ap(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ao:return"Fragment";case oo:return"Portal";case bp:return"Profiler";case Cg:return"StrictMode";case kp:return"Suspense";case Cp:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case QT:return(t.displayName||"Context")+".Consumer";case KT:return(t._context.displayName||"Context")+".Provider";case Ag:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Pg:return e=t.displayName||null,e!==null?e:Ap(t.type)||"Memo";case ts:e=t._payload,t=t._init;try{return Ap(t(e))}catch{}}return null}function Jk(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ap(e);case 8:return e===Cg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function $s(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function JT(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Xk(t){var e=JT(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function nc(t){t._valueTracker||(t._valueTracker=Xk(t))}function XT(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=JT(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function ah(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Pp(t,e){var n=e.checked;return ze({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function U_(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=$s(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function YT(t,e){e=e.checked,e!=null&&kg(t,"checked",e,!1)}function Np(t,e){YT(t,e);var n=$s(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Op(t,e.type,n):e.hasOwnProperty("defaultValue")&&Op(t,e.type,$s(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function F_(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Op(t,e,n){(e!=="number"||ah(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Za=Array.isArray;function wo(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+$s(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Lp(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error($(91));return ze({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function B_(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error($(92));if(Za(n)){if(1<n.length)throw Error($(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:$s(n)}}function ZT(t,e){var n=$s(e.value),r=$s(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function $_(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function eS(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Dp(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?eS(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var rc,tS=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(rc=rc||document.createElement("div"),rc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=rc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function kl(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var cl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Yk=["Webkit","ms","Moz","O"];Object.keys(cl).forEach(function(t){Yk.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),cl[e]=cl[t]})});function nS(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||cl.hasOwnProperty(t)&&cl[t]?(""+e).trim():e+"px"}function rS(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=nS(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var Zk=ze({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Mp(t,e){if(e){if(Zk[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error($(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error($(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error($(61))}if(e.style!=null&&typeof e.style!="object")throw Error($(62))}}function Vp(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var jp=null;function Ng(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Up=null,Eo=null,To=null;function z_(t){if(t=mu(t)){if(typeof Up!="function")throw Error($(280));var e=t.stateNode;e&&(e=gd(e),Up(t.stateNode,t.type,e))}}function sS(t){Eo?To?To.push(t):To=[t]:Eo=t}function iS(){if(Eo){var t=Eo,e=To;if(To=Eo=null,z_(t),e)for(t=0;t<e.length;t++)z_(e[t])}}function oS(t,e){return t(e)}function aS(){}var Pf=!1;function lS(t,e,n){if(Pf)return t(e,n);Pf=!0;try{return oS(t,e,n)}finally{Pf=!1,(Eo!==null||To!==null)&&(aS(),iS())}}function Cl(t,e){var n=t.stateNode;if(n===null)return null;var r=gd(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error($(231,e,typeof n));return n}var Fp=!1;if(Or)try{var Ua={};Object.defineProperty(Ua,"passive",{get:function(){Fp=!0}}),window.addEventListener("test",Ua,Ua),window.removeEventListener("test",Ua,Ua)}catch{Fp=!1}function eC(t,e,n,r,s,i,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(h){this.onError(h)}}var hl=!1,lh=null,uh=!1,Bp=null,tC={onError:function(t){hl=!0,lh=t}};function nC(t,e,n,r,s,i,o,a,l){hl=!1,lh=null,eC.apply(tC,arguments)}function rC(t,e,n,r,s,i,o,a,l){if(nC.apply(this,arguments),hl){if(hl){var c=lh;hl=!1,lh=null}else throw Error($(198));uh||(uh=!0,Bp=c)}}function $i(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function uS(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function q_(t){if($i(t)!==t)throw Error($(188))}function sC(t){var e=t.alternate;if(!e){if(e=$i(t),e===null)throw Error($(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return q_(s),t;if(i===r)return q_(s),e;i=i.sibling}throw Error($(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error($(189))}}if(n.alternate!==r)throw Error($(190))}if(n.tag!==3)throw Error($(188));return n.stateNode.current===n?t:e}function cS(t){return t=sC(t),t!==null?hS(t):null}function hS(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=hS(t);if(e!==null)return e;t=t.sibling}return null}var dS=cn.unstable_scheduleCallback,H_=cn.unstable_cancelCallback,iC=cn.unstable_shouldYield,oC=cn.unstable_requestPaint,Ze=cn.unstable_now,aC=cn.unstable_getCurrentPriorityLevel,Og=cn.unstable_ImmediatePriority,fS=cn.unstable_UserBlockingPriority,ch=cn.unstable_NormalPriority,lC=cn.unstable_LowPriority,pS=cn.unstable_IdlePriority,dd=null,Zn=null;function uC(t){if(Zn&&typeof Zn.onCommitFiberRoot=="function")try{Zn.onCommitFiberRoot(dd,t,void 0,(t.current.flags&128)===128)}catch{}}var Vn=Math.clz32?Math.clz32:dC,cC=Math.log,hC=Math.LN2;function dC(t){return t>>>=0,t===0?32:31-(cC(t)/hC|0)|0}var sc=64,ic=4194304;function el(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function hh(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=el(a):(i&=o,i!==0&&(r=el(i)))}else o=n&~s,o!==0?r=el(o):i!==0&&(r=el(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Vn(e),s=1<<n,r|=t[n],e&=~s;return r}function fC(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function pC(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Vn(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=fC(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function $p(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function mS(){var t=sc;return sc<<=1,!(sc&4194240)&&(sc=64),t}function Nf(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function fu(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Vn(e),t[e]=n}function mC(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Vn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Lg(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Vn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var be=0;function gS(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var yS,Dg,vS,_S,wS,zp=!1,oc=[],bs=null,ks=null,Cs=null,Al=new Map,Pl=new Map,is=[],gC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function W_(t,e){switch(t){case"focusin":case"focusout":bs=null;break;case"dragenter":case"dragleave":ks=null;break;case"mouseover":case"mouseout":Cs=null;break;case"pointerover":case"pointerout":Al.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pl.delete(e.pointerId)}}function Fa(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=mu(e),e!==null&&Dg(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function yC(t,e,n,r,s){switch(e){case"focusin":return bs=Fa(bs,t,e,n,r,s),!0;case"dragenter":return ks=Fa(ks,t,e,n,r,s),!0;case"mouseover":return Cs=Fa(Cs,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Al.set(i,Fa(Al.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Pl.set(i,Fa(Pl.get(i)||null,t,e,n,r,s)),!0}return!1}function ES(t){var e=ai(t.target);if(e!==null){var n=$i(e);if(n!==null){if(e=n.tag,e===13){if(e=uS(n),e!==null){t.blockedOn=e,wS(t.priority,function(){vS(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Oc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=qp(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);jp=r,n.target.dispatchEvent(r),jp=null}else return e=mu(n),e!==null&&Dg(e),t.blockedOn=n,!1;e.shift()}return!0}function K_(t,e,n){Oc(t)&&n.delete(e)}function vC(){zp=!1,bs!==null&&Oc(bs)&&(bs=null),ks!==null&&Oc(ks)&&(ks=null),Cs!==null&&Oc(Cs)&&(Cs=null),Al.forEach(K_),Pl.forEach(K_)}function Ba(t,e){t.blockedOn===e&&(t.blockedOn=null,zp||(zp=!0,cn.unstable_scheduleCallback(cn.unstable_NormalPriority,vC)))}function Nl(t){function e(s){return Ba(s,t)}if(0<oc.length){Ba(oc[0],t);for(var n=1;n<oc.length;n++){var r=oc[n];r.blockedOn===t&&(r.blockedOn=null)}}for(bs!==null&&Ba(bs,t),ks!==null&&Ba(ks,t),Cs!==null&&Ba(Cs,t),Al.forEach(e),Pl.forEach(e),n=0;n<is.length;n++)r=is[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<is.length&&(n=is[0],n.blockedOn===null);)ES(n),n.blockedOn===null&&is.shift()}var So=qr.ReactCurrentBatchConfig,dh=!0;function _C(t,e,n,r){var s=be,i=So.transition;So.transition=null;try{be=1,Mg(t,e,n,r)}finally{be=s,So.transition=i}}function wC(t,e,n,r){var s=be,i=So.transition;So.transition=null;try{be=4,Mg(t,e,n,r)}finally{be=s,So.transition=i}}function Mg(t,e,n,r){if(dh){var s=qp(t,e,n,r);if(s===null)$f(t,e,r,fh,n),W_(t,r);else if(yC(s,t,e,n,r))r.stopPropagation();else if(W_(t,r),e&4&&-1<gC.indexOf(t)){for(;s!==null;){var i=mu(s);if(i!==null&&yS(i),i=qp(t,e,n,r),i===null&&$f(t,e,r,fh,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else $f(t,e,r,null,n)}}var fh=null;function qp(t,e,n,r){if(fh=null,t=Ng(r),t=ai(t),t!==null)if(e=$i(t),e===null)t=null;else if(n=e.tag,n===13){if(t=uS(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return fh=t,null}function TS(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(aC()){case Og:return 1;case fS:return 4;case ch:case lC:return 16;case pS:return 536870912;default:return 16}default:return 16}}var Ts=null,Vg=null,Lc=null;function SS(){if(Lc)return Lc;var t,e=Vg,n=e.length,r,s="value"in Ts?Ts.value:Ts.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Lc=s.slice(t,1<r?1-r:void 0)}function Dc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ac(){return!0}function Q_(){return!1}function fn(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?ac:Q_,this.isPropagationStopped=Q_,this}return ze(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ac)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ac)},persist:function(){},isPersistent:ac}),e}var ha={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},jg=fn(ha),pu=ze({},ha,{view:0,detail:0}),EC=fn(pu),Of,Lf,$a,fd=ze({},pu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ug,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==$a&&($a&&t.type==="mousemove"?(Of=t.screenX-$a.screenX,Lf=t.screenY-$a.screenY):Lf=Of=0,$a=t),Of)},movementY:function(t){return"movementY"in t?t.movementY:Lf}}),G_=fn(fd),TC=ze({},fd,{dataTransfer:0}),SC=fn(TC),xC=ze({},pu,{relatedTarget:0}),Df=fn(xC),RC=ze({},ha,{animationName:0,elapsedTime:0,pseudoElement:0}),IC=fn(RC),bC=ze({},ha,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),kC=fn(bC),CC=ze({},ha,{data:0}),J_=fn(CC),AC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},PC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},NC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function OC(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=NC[t])?!!e[t]:!1}function Ug(){return OC}var LC=ze({},pu,{key:function(t){if(t.key){var e=AC[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Dc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?PC[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ug,charCode:function(t){return t.type==="keypress"?Dc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Dc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),DC=fn(LC),MC=ze({},fd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),X_=fn(MC),VC=ze({},pu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ug}),jC=fn(VC),UC=ze({},ha,{propertyName:0,elapsedTime:0,pseudoElement:0}),FC=fn(UC),BC=ze({},fd,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),$C=fn(BC),zC=[9,13,27,32],Fg=Or&&"CompositionEvent"in window,dl=null;Or&&"documentMode"in document&&(dl=document.documentMode);var qC=Or&&"TextEvent"in window&&!dl,xS=Or&&(!Fg||dl&&8<dl&&11>=dl),Y_=" ",Z_=!1;function RS(t,e){switch(t){case"keyup":return zC.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function IS(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var lo=!1;function HC(t,e){switch(t){case"compositionend":return IS(e);case"keypress":return e.which!==32?null:(Z_=!0,Y_);case"textInput":return t=e.data,t===Y_&&Z_?null:t;default:return null}}function WC(t,e){if(lo)return t==="compositionend"||!Fg&&RS(t,e)?(t=SS(),Lc=Vg=Ts=null,lo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return xS&&e.locale!=="ko"?null:e.data;default:return null}}var KC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ew(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!KC[t.type]:e==="textarea"}function bS(t,e,n,r){sS(r),e=ph(e,"onChange"),0<e.length&&(n=new jg("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var fl=null,Ol=null;function QC(t){jS(t,0)}function pd(t){var e=ho(t);if(XT(e))return t}function GC(t,e){if(t==="change")return e}var kS=!1;if(Or){var Mf;if(Or){var Vf="oninput"in document;if(!Vf){var tw=document.createElement("div");tw.setAttribute("oninput","return;"),Vf=typeof tw.oninput=="function"}Mf=Vf}else Mf=!1;kS=Mf&&(!document.documentMode||9<document.documentMode)}function nw(){fl&&(fl.detachEvent("onpropertychange",CS),Ol=fl=null)}function CS(t){if(t.propertyName==="value"&&pd(Ol)){var e=[];bS(e,Ol,t,Ng(t)),lS(QC,e)}}function JC(t,e,n){t==="focusin"?(nw(),fl=e,Ol=n,fl.attachEvent("onpropertychange",CS)):t==="focusout"&&nw()}function XC(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return pd(Ol)}function YC(t,e){if(t==="click")return pd(e)}function ZC(t,e){if(t==="input"||t==="change")return pd(e)}function eA(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Fn=typeof Object.is=="function"?Object.is:eA;function Ll(t,e){if(Fn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Ip.call(e,s)||!Fn(t[s],e[s]))return!1}return!0}function rw(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function sw(t,e){var n=rw(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=rw(n)}}function AS(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?AS(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function PS(){for(var t=window,e=ah();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=ah(t.document)}return e}function Bg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function tA(t){var e=PS(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&AS(n.ownerDocument.documentElement,n)){if(r!==null&&Bg(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=sw(n,i);var o=sw(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var nA=Or&&"documentMode"in document&&11>=document.documentMode,uo=null,Hp=null,pl=null,Wp=!1;function iw(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Wp||uo==null||uo!==ah(r)||(r=uo,"selectionStart"in r&&Bg(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),pl&&Ll(pl,r)||(pl=r,r=ph(Hp,"onSelect"),0<r.length&&(e=new jg("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=uo)))}function lc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var co={animationend:lc("Animation","AnimationEnd"),animationiteration:lc("Animation","AnimationIteration"),animationstart:lc("Animation","AnimationStart"),transitionend:lc("Transition","TransitionEnd")},jf={},NS={};Or&&(NS=document.createElement("div").style,"AnimationEvent"in window||(delete co.animationend.animation,delete co.animationiteration.animation,delete co.animationstart.animation),"TransitionEvent"in window||delete co.transitionend.transition);function md(t){if(jf[t])return jf[t];if(!co[t])return t;var e=co[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in NS)return jf[t]=e[n];return t}var OS=md("animationend"),LS=md("animationiteration"),DS=md("animationstart"),MS=md("transitionend"),VS=new Map,ow="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Js(t,e){VS.set(t,e),Bi(e,[t])}for(var Uf=0;Uf<ow.length;Uf++){var Ff=ow[Uf],rA=Ff.toLowerCase(),sA=Ff[0].toUpperCase()+Ff.slice(1);Js(rA,"on"+sA)}Js(OS,"onAnimationEnd");Js(LS,"onAnimationIteration");Js(DS,"onAnimationStart");Js("dblclick","onDoubleClick");Js("focusin","onFocus");Js("focusout","onBlur");Js(MS,"onTransitionEnd");qo("onMouseEnter",["mouseout","mouseover"]);qo("onMouseLeave",["mouseout","mouseover"]);qo("onPointerEnter",["pointerout","pointerover"]);qo("onPointerLeave",["pointerout","pointerover"]);Bi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Bi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Bi("onBeforeInput",["compositionend","keypress","textInput","paste"]);Bi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Bi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Bi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var tl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),iA=new Set("cancel close invalid load scroll toggle".split(" ").concat(tl));function aw(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,rC(r,e,void 0,t),t.currentTarget=null}function jS(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;aw(s,a,c),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;aw(s,a,c),i=l}}}if(uh)throw t=Bp,uh=!1,Bp=null,t}function Le(t,e){var n=e[Xp];n===void 0&&(n=e[Xp]=new Set);var r=t+"__bubble";n.has(r)||(US(e,t,2,!1),n.add(r))}function Bf(t,e,n){var r=0;e&&(r|=4),US(n,t,r,e)}var uc="_reactListening"+Math.random().toString(36).slice(2);function Dl(t){if(!t[uc]){t[uc]=!0,WT.forEach(function(n){n!=="selectionchange"&&(iA.has(n)||Bf(n,!1,t),Bf(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[uc]||(e[uc]=!0,Bf("selectionchange",!1,e))}}function US(t,e,n,r){switch(TS(e)){case 1:var s=_C;break;case 4:s=wC;break;default:s=Mg}n=s.bind(null,e,n,t),s=void 0,!Fp||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function $f(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=ai(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}lS(function(){var c=i,h=Ng(n),f=[];e:{var p=VS.get(t);if(p!==void 0){var y=jg,w=t;switch(t){case"keypress":if(Dc(n)===0)break e;case"keydown":case"keyup":y=DC;break;case"focusin":w="focus",y=Df;break;case"focusout":w="blur",y=Df;break;case"beforeblur":case"afterblur":y=Df;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=G_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=SC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=jC;break;case OS:case LS:case DS:y=IC;break;case MS:y=FC;break;case"scroll":y=EC;break;case"wheel":y=$C;break;case"copy":case"cut":case"paste":y=kC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=X_}var b=(e&4)!==0,R=!b&&t==="scroll",T=b?p!==null?p+"Capture":null:p;b=[];for(var v=c,x;v!==null;){x=v;var C=x.stateNode;if(x.tag===5&&C!==null&&(x=C,T!==null&&(C=Cl(v,T),C!=null&&b.push(Ml(v,C,x)))),R)break;v=v.return}0<b.length&&(p=new y(p,w,null,n,h),f.push({event:p,listeners:b}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",p&&n!==jp&&(w=n.relatedTarget||n.fromElement)&&(ai(w)||w[Lr]))break e;if((y||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,y?(w=n.relatedTarget||n.toElement,y=c,w=w?ai(w):null,w!==null&&(R=$i(w),w!==R||w.tag!==5&&w.tag!==6)&&(w=null)):(y=null,w=c),y!==w)){if(b=G_,C="onMouseLeave",T="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(b=X_,C="onPointerLeave",T="onPointerEnter",v="pointer"),R=y==null?p:ho(y),x=w==null?p:ho(w),p=new b(C,v+"leave",y,n,h),p.target=R,p.relatedTarget=x,C=null,ai(h)===c&&(b=new b(T,v+"enter",w,n,h),b.target=x,b.relatedTarget=R,C=b),R=C,y&&w)t:{for(b=y,T=w,v=0,x=b;x;x=Yi(x))v++;for(x=0,C=T;C;C=Yi(C))x++;for(;0<v-x;)b=Yi(b),v--;for(;0<x-v;)T=Yi(T),x--;for(;v--;){if(b===T||T!==null&&b===T.alternate)break t;b=Yi(b),T=Yi(T)}b=null}else b=null;y!==null&&lw(f,p,y,b,!1),w!==null&&R!==null&&lw(f,R,w,b,!0)}}e:{if(p=c?ho(c):window,y=p.nodeName&&p.nodeName.toLowerCase(),y==="select"||y==="input"&&p.type==="file")var M=GC;else if(ew(p))if(kS)M=ZC;else{M=XC;var U=JC}else(y=p.nodeName)&&y.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(M=YC);if(M&&(M=M(t,c))){bS(f,M,n,h);break e}U&&U(t,p,c),t==="focusout"&&(U=p._wrapperState)&&U.controlled&&p.type==="number"&&Op(p,"number",p.value)}switch(U=c?ho(c):window,t){case"focusin":(ew(U)||U.contentEditable==="true")&&(uo=U,Hp=c,pl=null);break;case"focusout":pl=Hp=uo=null;break;case"mousedown":Wp=!0;break;case"contextmenu":case"mouseup":case"dragend":Wp=!1,iw(f,n,h);break;case"selectionchange":if(nA)break;case"keydown":case"keyup":iw(f,n,h)}var I;if(Fg)e:{switch(t){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else lo?RS(t,n)&&(_="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(_="onCompositionStart");_&&(xS&&n.locale!=="ko"&&(lo||_!=="onCompositionStart"?_==="onCompositionEnd"&&lo&&(I=SS()):(Ts=h,Vg="value"in Ts?Ts.value:Ts.textContent,lo=!0)),U=ph(c,_),0<U.length&&(_=new J_(_,t,null,n,h),f.push({event:_,listeners:U}),I?_.data=I:(I=IS(n),I!==null&&(_.data=I)))),(I=qC?HC(t,n):WC(t,n))&&(c=ph(c,"onBeforeInput"),0<c.length&&(h=new J_("onBeforeInput","beforeinput",null,n,h),f.push({event:h,listeners:c}),h.data=I))}jS(f,e)})}function Ml(t,e,n){return{instance:t,listener:e,currentTarget:n}}function ph(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Cl(t,n),i!=null&&r.unshift(Ml(t,i,s)),i=Cl(t,e),i!=null&&r.push(Ml(t,i,s))),t=t.return}return r}function Yi(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function lw(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,s?(l=Cl(n,i),l!=null&&o.unshift(Ml(n,l,a))):s||(l=Cl(n,i),l!=null&&o.push(Ml(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var oA=/\r\n?/g,aA=/\u0000|\uFFFD/g;function uw(t){return(typeof t=="string"?t:""+t).replace(oA,`
`).replace(aA,"")}function cc(t,e,n){if(e=uw(e),uw(t)!==e&&n)throw Error($(425))}function mh(){}var Kp=null,Qp=null;function Gp(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Jp=typeof setTimeout=="function"?setTimeout:void 0,lA=typeof clearTimeout=="function"?clearTimeout:void 0,cw=typeof Promise=="function"?Promise:void 0,uA=typeof queueMicrotask=="function"?queueMicrotask:typeof cw<"u"?function(t){return cw.resolve(null).then(t).catch(cA)}:Jp;function cA(t){setTimeout(function(){throw t})}function zf(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Nl(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Nl(e)}function As(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function hw(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var da=Math.random().toString(36).slice(2),Gn="__reactFiber$"+da,Vl="__reactProps$"+da,Lr="__reactContainer$"+da,Xp="__reactEvents$"+da,hA="__reactListeners$"+da,dA="__reactHandles$"+da;function ai(t){var e=t[Gn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Lr]||n[Gn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=hw(t);t!==null;){if(n=t[Gn])return n;t=hw(t)}return e}t=n,n=t.parentNode}return null}function mu(t){return t=t[Gn]||t[Lr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ho(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error($(33))}function gd(t){return t[Vl]||null}var Yp=[],fo=-1;function Xs(t){return{current:t}}function De(t){0>fo||(t.current=Yp[fo],Yp[fo]=null,fo--)}function Ne(t,e){fo++,Yp[fo]=t.current,t.current=e}var zs={},Ot=Xs(zs),Yt=Xs(!1),Ri=zs;function Ho(t,e){var n=t.type.contextTypes;if(!n)return zs;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Zt(t){return t=t.childContextTypes,t!=null}function gh(){De(Yt),De(Ot)}function dw(t,e,n){if(Ot.current!==zs)throw Error($(168));Ne(Ot,e),Ne(Yt,n)}function FS(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error($(108,Jk(t)||"Unknown",s));return ze({},n,r)}function yh(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||zs,Ri=Ot.current,Ne(Ot,t),Ne(Yt,Yt.current),!0}function fw(t,e,n){var r=t.stateNode;if(!r)throw Error($(169));n?(t=FS(t,e,Ri),r.__reactInternalMemoizedMergedChildContext=t,De(Yt),De(Ot),Ne(Ot,t)):De(Yt),Ne(Yt,n)}var wr=null,yd=!1,qf=!1;function BS(t){wr===null?wr=[t]:wr.push(t)}function fA(t){yd=!0,BS(t)}function Ys(){if(!qf&&wr!==null){qf=!0;var t=0,e=be;try{var n=wr;for(be=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}wr=null,yd=!1}catch(s){throw wr!==null&&(wr=wr.slice(t+1)),dS(Og,Ys),s}finally{be=e,qf=!1}}return null}var po=[],mo=0,vh=null,_h=0,yn=[],vn=0,Ii=null,Sr=1,xr="";function ri(t,e){po[mo++]=_h,po[mo++]=vh,vh=t,_h=e}function $S(t,e,n){yn[vn++]=Sr,yn[vn++]=xr,yn[vn++]=Ii,Ii=t;var r=Sr;t=xr;var s=32-Vn(r)-1;r&=~(1<<s),n+=1;var i=32-Vn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Sr=1<<32-Vn(e)+s|n<<s|r,xr=i+t}else Sr=1<<i|n<<s|r,xr=t}function $g(t){t.return!==null&&(ri(t,1),$S(t,1,0))}function zg(t){for(;t===vh;)vh=po[--mo],po[mo]=null,_h=po[--mo],po[mo]=null;for(;t===Ii;)Ii=yn[--vn],yn[vn]=null,xr=yn[--vn],yn[vn]=null,Sr=yn[--vn],yn[vn]=null}var un=null,an=null,je=!1,Dn=null;function zS(t,e){var n=En(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function pw(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,un=t,an=As(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,un=t,an=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ii!==null?{id:Sr,overflow:xr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=En(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,un=t,an=null,!0):!1;default:return!1}}function Zp(t){return(t.mode&1)!==0&&(t.flags&128)===0}function em(t){if(je){var e=an;if(e){var n=e;if(!pw(t,e)){if(Zp(t))throw Error($(418));e=As(n.nextSibling);var r=un;e&&pw(t,e)?zS(r,n):(t.flags=t.flags&-4097|2,je=!1,un=t)}}else{if(Zp(t))throw Error($(418));t.flags=t.flags&-4097|2,je=!1,un=t}}}function mw(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;un=t}function hc(t){if(t!==un)return!1;if(!je)return mw(t),je=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Gp(t.type,t.memoizedProps)),e&&(e=an)){if(Zp(t))throw qS(),Error($(418));for(;e;)zS(t,e),e=As(e.nextSibling)}if(mw(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error($(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){an=As(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}an=null}}else an=un?As(t.stateNode.nextSibling):null;return!0}function qS(){for(var t=an;t;)t=As(t.nextSibling)}function Wo(){an=un=null,je=!1}function qg(t){Dn===null?Dn=[t]:Dn.push(t)}var pA=qr.ReactCurrentBatchConfig;function za(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error($(309));var r=n.stateNode}if(!r)throw Error($(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error($(284));if(!n._owner)throw Error($(290,t))}return t}function dc(t,e){throw t=Object.prototype.toString.call(e),Error($(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function gw(t){var e=t._init;return e(t._payload)}function HS(t){function e(T,v){if(t){var x=T.deletions;x===null?(T.deletions=[v],T.flags|=16):x.push(v)}}function n(T,v){if(!t)return null;for(;v!==null;)e(T,v),v=v.sibling;return null}function r(T,v){for(T=new Map;v!==null;)v.key!==null?T.set(v.key,v):T.set(v.index,v),v=v.sibling;return T}function s(T,v){return T=Ls(T,v),T.index=0,T.sibling=null,T}function i(T,v,x){return T.index=x,t?(x=T.alternate,x!==null?(x=x.index,x<v?(T.flags|=2,v):x):(T.flags|=2,v)):(T.flags|=1048576,v)}function o(T){return t&&T.alternate===null&&(T.flags|=2),T}function a(T,v,x,C){return v===null||v.tag!==6?(v=Xf(x,T.mode,C),v.return=T,v):(v=s(v,x),v.return=T,v)}function l(T,v,x,C){var M=x.type;return M===ao?h(T,v,x.props.children,C,x.key):v!==null&&(v.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===ts&&gw(M)===v.type)?(C=s(v,x.props),C.ref=za(T,v,x),C.return=T,C):(C=$c(x.type,x.key,x.props,null,T.mode,C),C.ref=za(T,v,x),C.return=T,C)}function c(T,v,x,C){return v===null||v.tag!==4||v.stateNode.containerInfo!==x.containerInfo||v.stateNode.implementation!==x.implementation?(v=Yf(x,T.mode,C),v.return=T,v):(v=s(v,x.children||[]),v.return=T,v)}function h(T,v,x,C,M){return v===null||v.tag!==7?(v=Ei(x,T.mode,C,M),v.return=T,v):(v=s(v,x),v.return=T,v)}function f(T,v,x){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Xf(""+v,T.mode,x),v.return=T,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case tc:return x=$c(v.type,v.key,v.props,null,T.mode,x),x.ref=za(T,null,v),x.return=T,x;case oo:return v=Yf(v,T.mode,x),v.return=T,v;case ts:var C=v._init;return f(T,C(v._payload),x)}if(Za(v)||ja(v))return v=Ei(v,T.mode,x,null),v.return=T,v;dc(T,v)}return null}function p(T,v,x,C){var M=v!==null?v.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return M!==null?null:a(T,v,""+x,C);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case tc:return x.key===M?l(T,v,x,C):null;case oo:return x.key===M?c(T,v,x,C):null;case ts:return M=x._init,p(T,v,M(x._payload),C)}if(Za(x)||ja(x))return M!==null?null:h(T,v,x,C,null);dc(T,x)}return null}function y(T,v,x,C,M){if(typeof C=="string"&&C!==""||typeof C=="number")return T=T.get(x)||null,a(v,T,""+C,M);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case tc:return T=T.get(C.key===null?x:C.key)||null,l(v,T,C,M);case oo:return T=T.get(C.key===null?x:C.key)||null,c(v,T,C,M);case ts:var U=C._init;return y(T,v,x,U(C._payload),M)}if(Za(C)||ja(C))return T=T.get(x)||null,h(v,T,C,M,null);dc(v,C)}return null}function w(T,v,x,C){for(var M=null,U=null,I=v,_=v=0,S=null;I!==null&&_<x.length;_++){I.index>_?(S=I,I=null):S=I.sibling;var k=p(T,I,x[_],C);if(k===null){I===null&&(I=S);break}t&&I&&k.alternate===null&&e(T,I),v=i(k,v,_),U===null?M=k:U.sibling=k,U=k,I=S}if(_===x.length)return n(T,I),je&&ri(T,_),M;if(I===null){for(;_<x.length;_++)I=f(T,x[_],C),I!==null&&(v=i(I,v,_),U===null?M=I:U.sibling=I,U=I);return je&&ri(T,_),M}for(I=r(T,I);_<x.length;_++)S=y(I,T,_,x[_],C),S!==null&&(t&&S.alternate!==null&&I.delete(S.key===null?_:S.key),v=i(S,v,_),U===null?M=S:U.sibling=S,U=S);return t&&I.forEach(function(N){return e(T,N)}),je&&ri(T,_),M}function b(T,v,x,C){var M=ja(x);if(typeof M!="function")throw Error($(150));if(x=M.call(x),x==null)throw Error($(151));for(var U=M=null,I=v,_=v=0,S=null,k=x.next();I!==null&&!k.done;_++,k=x.next()){I.index>_?(S=I,I=null):S=I.sibling;var N=p(T,I,k.value,C);if(N===null){I===null&&(I=S);break}t&&I&&N.alternate===null&&e(T,I),v=i(N,v,_),U===null?M=N:U.sibling=N,U=N,I=S}if(k.done)return n(T,I),je&&ri(T,_),M;if(I===null){for(;!k.done;_++,k=x.next())k=f(T,k.value,C),k!==null&&(v=i(k,v,_),U===null?M=k:U.sibling=k,U=k);return je&&ri(T,_),M}for(I=r(T,I);!k.done;_++,k=x.next())k=y(I,T,_,k.value,C),k!==null&&(t&&k.alternate!==null&&I.delete(k.key===null?_:k.key),v=i(k,v,_),U===null?M=k:U.sibling=k,U=k);return t&&I.forEach(function(O){return e(T,O)}),je&&ri(T,_),M}function R(T,v,x,C){if(typeof x=="object"&&x!==null&&x.type===ao&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case tc:e:{for(var M=x.key,U=v;U!==null;){if(U.key===M){if(M=x.type,M===ao){if(U.tag===7){n(T,U.sibling),v=s(U,x.props.children),v.return=T,T=v;break e}}else if(U.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===ts&&gw(M)===U.type){n(T,U.sibling),v=s(U,x.props),v.ref=za(T,U,x),v.return=T,T=v;break e}n(T,U);break}else e(T,U);U=U.sibling}x.type===ao?(v=Ei(x.props.children,T.mode,C,x.key),v.return=T,T=v):(C=$c(x.type,x.key,x.props,null,T.mode,C),C.ref=za(T,v,x),C.return=T,T=C)}return o(T);case oo:e:{for(U=x.key;v!==null;){if(v.key===U)if(v.tag===4&&v.stateNode.containerInfo===x.containerInfo&&v.stateNode.implementation===x.implementation){n(T,v.sibling),v=s(v,x.children||[]),v.return=T,T=v;break e}else{n(T,v);break}else e(T,v);v=v.sibling}v=Yf(x,T.mode,C),v.return=T,T=v}return o(T);case ts:return U=x._init,R(T,v,U(x._payload),C)}if(Za(x))return w(T,v,x,C);if(ja(x))return b(T,v,x,C);dc(T,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,v!==null&&v.tag===6?(n(T,v.sibling),v=s(v,x),v.return=T,T=v):(n(T,v),v=Xf(x,T.mode,C),v.return=T,T=v),o(T)):n(T,v)}return R}var Ko=HS(!0),WS=HS(!1),wh=Xs(null),Eh=null,go=null,Hg=null;function Wg(){Hg=go=Eh=null}function Kg(t){var e=wh.current;De(wh),t._currentValue=e}function tm(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function xo(t,e){Eh=t,Hg=go=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Xt=!0),t.firstContext=null)}function xn(t){var e=t._currentValue;if(Hg!==t)if(t={context:t,memoizedValue:e,next:null},go===null){if(Eh===null)throw Error($(308));go=t,Eh.dependencies={lanes:0,firstContext:t}}else go=go.next=t;return e}var li=null;function Qg(t){li===null?li=[t]:li.push(t)}function KS(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Qg(e)):(n.next=s.next,s.next=n),e.interleaved=n,Dr(t,r)}function Dr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ns=!1;function Gg(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function QS(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function kr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ps(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ee&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Dr(t,n)}return s=r.interleaved,s===null?(e.next=e,Qg(r)):(e.next=s.next,s.next=e),r.interleaved=e,Dr(t,n)}function Mc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Lg(t,n)}}function yw(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Th(t,e,n,r){var s=t.updateQueue;ns=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?i=c:o.next=c,o=l;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=l))}if(i!==null){var f=s.baseState;o=0,h=c=l=null,a=i;do{var p=a.lane,y=a.eventTime;if((r&p)===p){h!==null&&(h=h.next={eventTime:y,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var w=t,b=a;switch(p=e,y=n,b.tag){case 1:if(w=b.payload,typeof w=="function"){f=w.call(y,f,p);break e}f=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=b.payload,p=typeof w=="function"?w.call(y,f,p):w,p==null)break e;f=ze({},f,p);break e;case 2:ns=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=s.effects,p===null?s.effects=[a]:p.push(a))}else y={eventTime:y,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(c=h=y,l=f):h=h.next=y,o|=p;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;p=a,a=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(!0);if(h===null&&(l=f),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);ki|=o,t.lanes=o,t.memoizedState=f}}function vw(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error($(191,s));s.call(r)}}}var gu={},er=Xs(gu),jl=Xs(gu),Ul=Xs(gu);function ui(t){if(t===gu)throw Error($(174));return t}function Jg(t,e){switch(Ne(Ul,e),Ne(jl,t),Ne(er,gu),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Dp(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Dp(e,t)}De(er),Ne(er,e)}function Qo(){De(er),De(jl),De(Ul)}function GS(t){ui(Ul.current);var e=ui(er.current),n=Dp(e,t.type);e!==n&&(Ne(jl,t),Ne(er,n))}function Xg(t){jl.current===t&&(De(er),De(jl))}var Fe=Xs(0);function Sh(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Hf=[];function Yg(){for(var t=0;t<Hf.length;t++)Hf[t]._workInProgressVersionPrimary=null;Hf.length=0}var Vc=qr.ReactCurrentDispatcher,Wf=qr.ReactCurrentBatchConfig,bi=0,Be=null,ot=null,ft=null,xh=!1,ml=!1,Fl=0,mA=0;function It(){throw Error($(321))}function Zg(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Fn(t[n],e[n]))return!1;return!0}function ey(t,e,n,r,s,i){if(bi=i,Be=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Vc.current=t===null||t.memoizedState===null?_A:wA,t=n(r,s),ml){i=0;do{if(ml=!1,Fl=0,25<=i)throw Error($(301));i+=1,ft=ot=null,e.updateQueue=null,Vc.current=EA,t=n(r,s)}while(ml)}if(Vc.current=Rh,e=ot!==null&&ot.next!==null,bi=0,ft=ot=Be=null,xh=!1,e)throw Error($(300));return t}function ty(){var t=Fl!==0;return Fl=0,t}function Hn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ft===null?Be.memoizedState=ft=t:ft=ft.next=t,ft}function Rn(){if(ot===null){var t=Be.alternate;t=t!==null?t.memoizedState:null}else t=ot.next;var e=ft===null?Be.memoizedState:ft.next;if(e!==null)ft=e,ot=t;else{if(t===null)throw Error($(310));ot=t,t={memoizedState:ot.memoizedState,baseState:ot.baseState,baseQueue:ot.baseQueue,queue:ot.queue,next:null},ft===null?Be.memoizedState=ft=t:ft=ft.next=t}return ft}function Bl(t,e){return typeof e=="function"?e(t):e}function Kf(t){var e=Rn(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var r=ot,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,c=i;do{var h=c.lane;if((bi&h)===h)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var f={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=f,o=r):l=l.next=f,Be.lanes|=h,ki|=h}c=c.next}while(c!==null&&c!==i);l===null?o=r:l.next=a,Fn(r,e.memoizedState)||(Xt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Be.lanes|=i,ki|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Qf(t){var e=Rn(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Fn(i,e.memoizedState)||(Xt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function JS(){}function XS(t,e){var n=Be,r=Rn(),s=e(),i=!Fn(r.memoizedState,s);if(i&&(r.memoizedState=s,Xt=!0),r=r.queue,ny(ex.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||ft!==null&&ft.memoizedState.tag&1){if(n.flags|=2048,$l(9,ZS.bind(null,n,r,s,e),void 0,null),pt===null)throw Error($(349));bi&30||YS(n,e,s)}return s}function YS(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Be.updateQueue,e===null?(e={lastEffect:null,stores:null},Be.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function ZS(t,e,n,r){e.value=n,e.getSnapshot=r,tx(e)&&nx(t)}function ex(t,e,n){return n(function(){tx(e)&&nx(t)})}function tx(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Fn(t,n)}catch{return!0}}function nx(t){var e=Dr(t,1);e!==null&&jn(e,t,1,-1)}function _w(t){var e=Hn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Bl,lastRenderedState:t},e.queue=t,t=t.dispatch=vA.bind(null,Be,t),[e.memoizedState,t]}function $l(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Be.updateQueue,e===null?(e={lastEffect:null,stores:null},Be.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function rx(){return Rn().memoizedState}function jc(t,e,n,r){var s=Hn();Be.flags|=t,s.memoizedState=$l(1|e,n,void 0,r===void 0?null:r)}function vd(t,e,n,r){var s=Rn();r=r===void 0?null:r;var i=void 0;if(ot!==null){var o=ot.memoizedState;if(i=o.destroy,r!==null&&Zg(r,o.deps)){s.memoizedState=$l(e,n,i,r);return}}Be.flags|=t,s.memoizedState=$l(1|e,n,i,r)}function ww(t,e){return jc(8390656,8,t,e)}function ny(t,e){return vd(2048,8,t,e)}function sx(t,e){return vd(4,2,t,e)}function ix(t,e){return vd(4,4,t,e)}function ox(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function ax(t,e,n){return n=n!=null?n.concat([t]):null,vd(4,4,ox.bind(null,e,t),n)}function ry(){}function lx(t,e){var n=Rn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Zg(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function ux(t,e){var n=Rn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Zg(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function cx(t,e,n){return bi&21?(Fn(n,e)||(n=mS(),Be.lanes|=n,ki|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Xt=!0),t.memoizedState=n)}function gA(t,e){var n=be;be=n!==0&&4>n?n:4,t(!0);var r=Wf.transition;Wf.transition={};try{t(!1),e()}finally{be=n,Wf.transition=r}}function hx(){return Rn().memoizedState}function yA(t,e,n){var r=Os(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},dx(t))fx(e,n);else if(n=KS(t,e,n,r),n!==null){var s=qt();jn(n,t,r,s),px(n,e,r)}}function vA(t,e,n){var r=Os(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(dx(t))fx(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,Fn(a,o)){var l=e.interleaved;l===null?(s.next=s,Qg(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=KS(t,e,s,r),n!==null&&(s=qt(),jn(n,t,r,s),px(n,e,r))}}function dx(t){var e=t.alternate;return t===Be||e!==null&&e===Be}function fx(t,e){ml=xh=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function px(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Lg(t,n)}}var Rh={readContext:xn,useCallback:It,useContext:It,useEffect:It,useImperativeHandle:It,useInsertionEffect:It,useLayoutEffect:It,useMemo:It,useReducer:It,useRef:It,useState:It,useDebugValue:It,useDeferredValue:It,useTransition:It,useMutableSource:It,useSyncExternalStore:It,useId:It,unstable_isNewReconciler:!1},_A={readContext:xn,useCallback:function(t,e){return Hn().memoizedState=[t,e===void 0?null:e],t},useContext:xn,useEffect:ww,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,jc(4194308,4,ox.bind(null,e,t),n)},useLayoutEffect:function(t,e){return jc(4194308,4,t,e)},useInsertionEffect:function(t,e){return jc(4,2,t,e)},useMemo:function(t,e){var n=Hn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Hn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=yA.bind(null,Be,t),[r.memoizedState,t]},useRef:function(t){var e=Hn();return t={current:t},e.memoizedState=t},useState:_w,useDebugValue:ry,useDeferredValue:function(t){return Hn().memoizedState=t},useTransition:function(){var t=_w(!1),e=t[0];return t=gA.bind(null,t[1]),Hn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Be,s=Hn();if(je){if(n===void 0)throw Error($(407));n=n()}else{if(n=e(),pt===null)throw Error($(349));bi&30||YS(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,ww(ex.bind(null,r,i,t),[t]),r.flags|=2048,$l(9,ZS.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Hn(),e=pt.identifierPrefix;if(je){var n=xr,r=Sr;n=(r&~(1<<32-Vn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Fl++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=mA++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},wA={readContext:xn,useCallback:lx,useContext:xn,useEffect:ny,useImperativeHandle:ax,useInsertionEffect:sx,useLayoutEffect:ix,useMemo:ux,useReducer:Kf,useRef:rx,useState:function(){return Kf(Bl)},useDebugValue:ry,useDeferredValue:function(t){var e=Rn();return cx(e,ot.memoizedState,t)},useTransition:function(){var t=Kf(Bl)[0],e=Rn().memoizedState;return[t,e]},useMutableSource:JS,useSyncExternalStore:XS,useId:hx,unstable_isNewReconciler:!1},EA={readContext:xn,useCallback:lx,useContext:xn,useEffect:ny,useImperativeHandle:ax,useInsertionEffect:sx,useLayoutEffect:ix,useMemo:ux,useReducer:Qf,useRef:rx,useState:function(){return Qf(Bl)},useDebugValue:ry,useDeferredValue:function(t){var e=Rn();return ot===null?e.memoizedState=t:cx(e,ot.memoizedState,t)},useTransition:function(){var t=Qf(Bl)[0],e=Rn().memoizedState;return[t,e]},useMutableSource:JS,useSyncExternalStore:XS,useId:hx,unstable_isNewReconciler:!1};function An(t,e){if(t&&t.defaultProps){e=ze({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function nm(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ze({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var _d={isMounted:function(t){return(t=t._reactInternals)?$i(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=qt(),s=Os(t),i=kr(r,s);i.payload=e,n!=null&&(i.callback=n),e=Ps(t,i,s),e!==null&&(jn(e,t,s,r),Mc(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=qt(),s=Os(t),i=kr(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Ps(t,i,s),e!==null&&(jn(e,t,s,r),Mc(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=qt(),r=Os(t),s=kr(n,r);s.tag=2,e!=null&&(s.callback=e),e=Ps(t,s,r),e!==null&&(jn(e,t,r,n),Mc(e,t,r))}};function Ew(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Ll(n,r)||!Ll(s,i):!0}function mx(t,e,n){var r=!1,s=zs,i=e.contextType;return typeof i=="object"&&i!==null?i=xn(i):(s=Zt(e)?Ri:Ot.current,r=e.contextTypes,i=(r=r!=null)?Ho(t,s):zs),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=_d,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Tw(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&_d.enqueueReplaceState(e,e.state,null)}function rm(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Gg(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=xn(i):(i=Zt(e)?Ri:Ot.current,s.context=Ho(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(nm(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&_d.enqueueReplaceState(s,s.state,null),Th(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Go(t,e){try{var n="",r=e;do n+=Gk(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Gf(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function sm(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var TA=typeof WeakMap=="function"?WeakMap:Map;function gx(t,e,n){n=kr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){bh||(bh=!0,pm=r),sm(t,e)},n}function yx(t,e,n){n=kr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){sm(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){sm(t,e),typeof r!="function"&&(Ns===null?Ns=new Set([this]):Ns.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Sw(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new TA;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=MA.bind(null,t,e,n),e.then(t,t))}function xw(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Rw(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=kr(-1,1),e.tag=2,Ps(n,e,1))),n.lanes|=1),t)}var SA=qr.ReactCurrentOwner,Xt=!1;function $t(t,e,n,r){e.child=t===null?WS(e,null,n,r):Ko(e,t.child,n,r)}function Iw(t,e,n,r,s){n=n.render;var i=e.ref;return xo(e,s),r=ey(t,e,n,r,i,s),n=ty(),t!==null&&!Xt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Mr(t,e,s)):(je&&n&&$g(e),e.flags|=1,$t(t,e,r,s),e.child)}function bw(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!hy(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,vx(t,e,i,r,s)):(t=$c(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Ll,n(o,r)&&t.ref===e.ref)return Mr(t,e,s)}return e.flags|=1,t=Ls(i,r),t.ref=e.ref,t.return=e,e.child=t}function vx(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Ll(i,r)&&t.ref===e.ref)if(Xt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Xt=!0);else return e.lanes=t.lanes,Mr(t,e,s)}return im(t,e,n,r,s)}function _x(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ne(vo,on),on|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ne(vo,on),on|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Ne(vo,on),on|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Ne(vo,on),on|=r;return $t(t,e,s,n),e.child}function wx(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function im(t,e,n,r,s){var i=Zt(n)?Ri:Ot.current;return i=Ho(e,i),xo(e,s),n=ey(t,e,n,r,i,s),r=ty(),t!==null&&!Xt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Mr(t,e,s)):(je&&r&&$g(e),e.flags|=1,$t(t,e,n,s),e.child)}function kw(t,e,n,r,s){if(Zt(n)){var i=!0;yh(e)}else i=!1;if(xo(e,s),e.stateNode===null)Uc(t,e),mx(e,n,r),rm(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=xn(c):(c=Zt(n)?Ri:Ot.current,c=Ho(e,c));var h=n.getDerivedStateFromProps,f=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&Tw(e,o,r,c),ns=!1;var p=e.memoizedState;o.state=p,Th(e,r,o,s),l=e.memoizedState,a!==r||p!==l||Yt.current||ns?(typeof h=="function"&&(nm(e,n,h,r),l=e.memoizedState),(a=ns||Ew(e,n,a,r,p,l,c))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,QS(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:An(e.type,a),o.props=c,f=e.pendingProps,p=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=xn(l):(l=Zt(n)?Ri:Ot.current,l=Ho(e,l));var y=n.getDerivedStateFromProps;(h=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||p!==l)&&Tw(e,o,r,l),ns=!1,p=e.memoizedState,o.state=p,Th(e,r,o,s);var w=e.memoizedState;a!==f||p!==w||Yt.current||ns?(typeof y=="function"&&(nm(e,n,y,r),w=e.memoizedState),(c=ns||Ew(e,n,c,r,p,w,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,w,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,w,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=w),o.props=r,o.state=w,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return om(t,e,n,r,i,s)}function om(t,e,n,r,s,i){wx(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&fw(e,n,!1),Mr(t,e,i);r=e.stateNode,SA.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Ko(e,t.child,null,i),e.child=Ko(e,null,a,i)):$t(t,e,a,i),e.memoizedState=r.state,s&&fw(e,n,!0),e.child}function Ex(t){var e=t.stateNode;e.pendingContext?dw(t,e.pendingContext,e.pendingContext!==e.context):e.context&&dw(t,e.context,!1),Jg(t,e.containerInfo)}function Cw(t,e,n,r,s){return Wo(),qg(s),e.flags|=256,$t(t,e,n,r),e.child}var am={dehydrated:null,treeContext:null,retryLane:0};function lm(t){return{baseLanes:t,cachePool:null,transitions:null}}function Tx(t,e,n){var r=e.pendingProps,s=Fe.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Ne(Fe,s&1),t===null)return em(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Td(o,r,0,null),t=Ei(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=lm(n),e.memoizedState=am,t):sy(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return xA(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Ls(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=Ls(a,i):(i=Ei(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?lm(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=am,r}return i=t.child,t=i.sibling,r=Ls(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function sy(t,e){return e=Td({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function fc(t,e,n,r){return r!==null&&qg(r),Ko(e,t.child,null,n),t=sy(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function xA(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Gf(Error($(422))),fc(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Td({mode:"visible",children:r.children},s,0,null),i=Ei(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Ko(e,t.child,null,o),e.child.memoizedState=lm(o),e.memoizedState=am,i);if(!(e.mode&1))return fc(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error($(419)),r=Gf(i,r,void 0),fc(t,e,o,r)}if(a=(o&t.childLanes)!==0,Xt||a){if(r=pt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Dr(t,s),jn(r,t,s,-1))}return cy(),r=Gf(Error($(421))),fc(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=VA.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,an=As(s.nextSibling),un=e,je=!0,Dn=null,t!==null&&(yn[vn++]=Sr,yn[vn++]=xr,yn[vn++]=Ii,Sr=t.id,xr=t.overflow,Ii=e),e=sy(e,r.children),e.flags|=4096,e)}function Aw(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),tm(t.return,e,n)}function Jf(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Sx(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if($t(t,e,r.children,n),r=Fe.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Aw(t,n,e);else if(t.tag===19)Aw(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ne(Fe,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Sh(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Jf(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Sh(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Jf(e,!0,n,null,i);break;case"together":Jf(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Uc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Mr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ki|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error($(153));if(e.child!==null){for(t=e.child,n=Ls(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ls(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function RA(t,e,n){switch(e.tag){case 3:Ex(e),Wo();break;case 5:GS(e);break;case 1:Zt(e.type)&&yh(e);break;case 4:Jg(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Ne(wh,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ne(Fe,Fe.current&1),e.flags|=128,null):n&e.child.childLanes?Tx(t,e,n):(Ne(Fe,Fe.current&1),t=Mr(t,e,n),t!==null?t.sibling:null);Ne(Fe,Fe.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Sx(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ne(Fe,Fe.current),r)break;return null;case 22:case 23:return e.lanes=0,_x(t,e,n)}return Mr(t,e,n)}var xx,um,Rx,Ix;xx=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};um=function(){};Rx=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,ui(er.current);var i=null;switch(n){case"input":s=Pp(t,s),r=Pp(t,r),i=[];break;case"select":s=ze({},s,{value:void 0}),r=ze({},r,{value:void 0}),i=[];break;case"textarea":s=Lp(t,s),r=Lp(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=mh)}Mp(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(bl.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var l=r[c];if(a=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(bl.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Le("scroll",t),i||a===l||(i=[])):(i=i||[]).push(c,l))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};Ix=function(t,e,n,r){n!==r&&(e.flags|=4)};function qa(t,e){if(!je)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function bt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function IA(t,e,n){var r=e.pendingProps;switch(zg(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return bt(e),null;case 1:return Zt(e.type)&&gh(),bt(e),null;case 3:return r=e.stateNode,Qo(),De(Yt),De(Ot),Yg(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(hc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Dn!==null&&(ym(Dn),Dn=null))),um(t,e),bt(e),null;case 5:Xg(e);var s=ui(Ul.current);if(n=e.type,t!==null&&e.stateNode!=null)Rx(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error($(166));return bt(e),null}if(t=ui(er.current),hc(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Gn]=e,r[Vl]=i,t=(e.mode&1)!==0,n){case"dialog":Le("cancel",r),Le("close",r);break;case"iframe":case"object":case"embed":Le("load",r);break;case"video":case"audio":for(s=0;s<tl.length;s++)Le(tl[s],r);break;case"source":Le("error",r);break;case"img":case"image":case"link":Le("error",r),Le("load",r);break;case"details":Le("toggle",r);break;case"input":U_(r,i),Le("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Le("invalid",r);break;case"textarea":B_(r,i),Le("invalid",r)}Mp(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&cc(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&cc(r.textContent,a,t),s=["children",""+a]):bl.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Le("scroll",r)}switch(n){case"input":nc(r),F_(r,i,!0);break;case"textarea":nc(r),$_(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=mh)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=eS(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Gn]=e,t[Vl]=r,xx(t,e,!1,!1),e.stateNode=t;e:{switch(o=Vp(n,r),n){case"dialog":Le("cancel",t),Le("close",t),s=r;break;case"iframe":case"object":case"embed":Le("load",t),s=r;break;case"video":case"audio":for(s=0;s<tl.length;s++)Le(tl[s],t);s=r;break;case"source":Le("error",t),s=r;break;case"img":case"image":case"link":Le("error",t),Le("load",t),s=r;break;case"details":Le("toggle",t),s=r;break;case"input":U_(t,r),s=Pp(t,r),Le("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=ze({},r,{value:void 0}),Le("invalid",t);break;case"textarea":B_(t,r),s=Lp(t,r),Le("invalid",t);break;default:s=r}Mp(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?rS(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&tS(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&kl(t,l):typeof l=="number"&&kl(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(bl.hasOwnProperty(i)?l!=null&&i==="onScroll"&&Le("scroll",t):l!=null&&kg(t,i,l,o))}switch(n){case"input":nc(t),F_(t,r,!1);break;case"textarea":nc(t),$_(t);break;case"option":r.value!=null&&t.setAttribute("value",""+$s(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?wo(t,!!r.multiple,i,!1):r.defaultValue!=null&&wo(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=mh)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return bt(e),null;case 6:if(t&&e.stateNode!=null)Ix(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error($(166));if(n=ui(Ul.current),ui(er.current),hc(e)){if(r=e.stateNode,n=e.memoizedProps,r[Gn]=e,(i=r.nodeValue!==n)&&(t=un,t!==null))switch(t.tag){case 3:cc(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&cc(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Gn]=e,e.stateNode=r}return bt(e),null;case 13:if(De(Fe),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(je&&an!==null&&e.mode&1&&!(e.flags&128))qS(),Wo(),e.flags|=98560,i=!1;else if(i=hc(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error($(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error($(317));i[Gn]=e}else Wo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;bt(e),i=!1}else Dn!==null&&(ym(Dn),Dn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Fe.current&1?ut===0&&(ut=3):cy())),e.updateQueue!==null&&(e.flags|=4),bt(e),null);case 4:return Qo(),um(t,e),t===null&&Dl(e.stateNode.containerInfo),bt(e),null;case 10:return Kg(e.type._context),bt(e),null;case 17:return Zt(e.type)&&gh(),bt(e),null;case 19:if(De(Fe),i=e.memoizedState,i===null)return bt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)qa(i,!1);else{if(ut!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Sh(t),o!==null){for(e.flags|=128,qa(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ne(Fe,Fe.current&1|2),e.child}t=t.sibling}i.tail!==null&&Ze()>Jo&&(e.flags|=128,r=!0,qa(i,!1),e.lanes=4194304)}else{if(!r)if(t=Sh(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),qa(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!je)return bt(e),null}else 2*Ze()-i.renderingStartTime>Jo&&n!==1073741824&&(e.flags|=128,r=!0,qa(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Ze(),e.sibling=null,n=Fe.current,Ne(Fe,r?n&1|2:n&1),e):(bt(e),null);case 22:case 23:return uy(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?on&1073741824&&(bt(e),e.subtreeFlags&6&&(e.flags|=8192)):bt(e),null;case 24:return null;case 25:return null}throw Error($(156,e.tag))}function bA(t,e){switch(zg(e),e.tag){case 1:return Zt(e.type)&&gh(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Qo(),De(Yt),De(Ot),Yg(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Xg(e),null;case 13:if(De(Fe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error($(340));Wo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return De(Fe),null;case 4:return Qo(),null;case 10:return Kg(e.type._context),null;case 22:case 23:return uy(),null;case 24:return null;default:return null}}var pc=!1,At=!1,kA=typeof WeakSet=="function"?WeakSet:Set,Q=null;function yo(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ge(t,e,r)}else n.current=null}function cm(t,e,n){try{n()}catch(r){Ge(t,e,r)}}var Pw=!1;function CA(t,e){if(Kp=dh,t=PS(),Bg(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,h=0,f=t,p=null;t:for(;;){for(var y;f!==n||s!==0&&f.nodeType!==3||(a=o+s),f!==i||r!==0&&f.nodeType!==3||(l=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(y=f.firstChild)!==null;)p=f,f=y;for(;;){if(f===t)break t;if(p===n&&++c===s&&(a=o),p===i&&++h===r&&(l=o),(y=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=y}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Qp={focusedElem:t,selectionRange:n},dh=!1,Q=e;Q!==null;)if(e=Q,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Q=t;else for(;Q!==null;){e=Q;try{var w=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var b=w.memoizedProps,R=w.memoizedState,T=e.stateNode,v=T.getSnapshotBeforeUpdate(e.elementType===e.type?b:An(e.type,b),R);T.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error($(163))}}catch(C){Ge(e,e.return,C)}if(t=e.sibling,t!==null){t.return=e.return,Q=t;break}Q=e.return}return w=Pw,Pw=!1,w}function gl(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&cm(e,n,i)}s=s.next}while(s!==r)}}function wd(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function hm(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function bx(t){var e=t.alternate;e!==null&&(t.alternate=null,bx(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Gn],delete e[Vl],delete e[Xp],delete e[hA],delete e[dA])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function kx(t){return t.tag===5||t.tag===3||t.tag===4}function Nw(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||kx(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function dm(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=mh));else if(r!==4&&(t=t.child,t!==null))for(dm(t,e,n),t=t.sibling;t!==null;)dm(t,e,n),t=t.sibling}function fm(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(fm(t,e,n),t=t.sibling;t!==null;)fm(t,e,n),t=t.sibling}var gt=null,On=!1;function Yr(t,e,n){for(n=n.child;n!==null;)Cx(t,e,n),n=n.sibling}function Cx(t,e,n){if(Zn&&typeof Zn.onCommitFiberUnmount=="function")try{Zn.onCommitFiberUnmount(dd,n)}catch{}switch(n.tag){case 5:At||yo(n,e);case 6:var r=gt,s=On;gt=null,Yr(t,e,n),gt=r,On=s,gt!==null&&(On?(t=gt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):gt.removeChild(n.stateNode));break;case 18:gt!==null&&(On?(t=gt,n=n.stateNode,t.nodeType===8?zf(t.parentNode,n):t.nodeType===1&&zf(t,n),Nl(t)):zf(gt,n.stateNode));break;case 4:r=gt,s=On,gt=n.stateNode.containerInfo,On=!0,Yr(t,e,n),gt=r,On=s;break;case 0:case 11:case 14:case 15:if(!At&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&cm(n,e,o),s=s.next}while(s!==r)}Yr(t,e,n);break;case 1:if(!At&&(yo(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Ge(n,e,a)}Yr(t,e,n);break;case 21:Yr(t,e,n);break;case 22:n.mode&1?(At=(r=At)||n.memoizedState!==null,Yr(t,e,n),At=r):Yr(t,e,n);break;default:Yr(t,e,n)}}function Ow(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new kA),e.forEach(function(r){var s=jA.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Cn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:gt=a.stateNode,On=!1;break e;case 3:gt=a.stateNode.containerInfo,On=!0;break e;case 4:gt=a.stateNode.containerInfo,On=!0;break e}a=a.return}if(gt===null)throw Error($(160));Cx(i,o,s),gt=null,On=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){Ge(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Ax(e,t),e=e.sibling}function Ax(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Cn(e,t),zn(t),r&4){try{gl(3,t,t.return),wd(3,t)}catch(b){Ge(t,t.return,b)}try{gl(5,t,t.return)}catch(b){Ge(t,t.return,b)}}break;case 1:Cn(e,t),zn(t),r&512&&n!==null&&yo(n,n.return);break;case 5:if(Cn(e,t),zn(t),r&512&&n!==null&&yo(n,n.return),t.flags&32){var s=t.stateNode;try{kl(s,"")}catch(b){Ge(t,t.return,b)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&YT(s,i),Vp(a,o);var c=Vp(a,i);for(o=0;o<l.length;o+=2){var h=l[o],f=l[o+1];h==="style"?rS(s,f):h==="dangerouslySetInnerHTML"?tS(s,f):h==="children"?kl(s,f):kg(s,h,f,c)}switch(a){case"input":Np(s,i);break;case"textarea":ZT(s,i);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var y=i.value;y!=null?wo(s,!!i.multiple,y,!1):p!==!!i.multiple&&(i.defaultValue!=null?wo(s,!!i.multiple,i.defaultValue,!0):wo(s,!!i.multiple,i.multiple?[]:"",!1))}s[Vl]=i}catch(b){Ge(t,t.return,b)}}break;case 6:if(Cn(e,t),zn(t),r&4){if(t.stateNode===null)throw Error($(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(b){Ge(t,t.return,b)}}break;case 3:if(Cn(e,t),zn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Nl(e.containerInfo)}catch(b){Ge(t,t.return,b)}break;case 4:Cn(e,t),zn(t);break;case 13:Cn(e,t),zn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(ay=Ze())),r&4&&Ow(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(At=(c=At)||h,Cn(e,t),At=c):Cn(e,t),zn(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!h&&t.mode&1)for(Q=t,h=t.child;h!==null;){for(f=Q=h;Q!==null;){switch(p=Q,y=p.child,p.tag){case 0:case 11:case 14:case 15:gl(4,p,p.return);break;case 1:yo(p,p.return);var w=p.stateNode;if(typeof w.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,w.props=e.memoizedProps,w.state=e.memoizedState,w.componentWillUnmount()}catch(b){Ge(r,n,b)}}break;case 5:yo(p,p.return);break;case 22:if(p.memoizedState!==null){Dw(f);continue}}y!==null?(y.return=p,Q=y):Dw(f)}h=h.sibling}e:for(h=null,f=t;;){if(f.tag===5){if(h===null){h=f;try{s=f.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=nS("display",o))}catch(b){Ge(t,t.return,b)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(b){Ge(t,t.return,b)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Cn(e,t),zn(t),r&4&&Ow(t);break;case 21:break;default:Cn(e,t),zn(t)}}function zn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(kx(n)){var r=n;break e}n=n.return}throw Error($(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(kl(s,""),r.flags&=-33);var i=Nw(t);fm(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Nw(t);dm(t,a,o);break;default:throw Error($(161))}}catch(l){Ge(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function AA(t,e,n){Q=t,Px(t)}function Px(t,e,n){for(var r=(t.mode&1)!==0;Q!==null;){var s=Q,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||pc;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||At;a=pc;var c=At;if(pc=o,(At=l)&&!c)for(Q=s;Q!==null;)o=Q,l=o.child,o.tag===22&&o.memoizedState!==null?Mw(s):l!==null?(l.return=o,Q=l):Mw(s);for(;i!==null;)Q=i,Px(i),i=i.sibling;Q=s,pc=a,At=c}Lw(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Q=i):Lw(t)}}function Lw(t){for(;Q!==null;){var e=Q;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:At||wd(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!At)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:An(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&vw(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}vw(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&Nl(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error($(163))}At||e.flags&512&&hm(e)}catch(p){Ge(e,e.return,p)}}if(e===t){Q=null;break}if(n=e.sibling,n!==null){n.return=e.return,Q=n;break}Q=e.return}}function Dw(t){for(;Q!==null;){var e=Q;if(e===t){Q=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Q=n;break}Q=e.return}}function Mw(t){for(;Q!==null;){var e=Q;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{wd(4,e)}catch(l){Ge(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){Ge(e,s,l)}}var i=e.return;try{hm(e)}catch(l){Ge(e,i,l)}break;case 5:var o=e.return;try{hm(e)}catch(l){Ge(e,o,l)}}}catch(l){Ge(e,e.return,l)}if(e===t){Q=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Q=a;break}Q=e.return}}var PA=Math.ceil,Ih=qr.ReactCurrentDispatcher,iy=qr.ReactCurrentOwner,Tn=qr.ReactCurrentBatchConfig,Ee=0,pt=null,rt=null,_t=0,on=0,vo=Xs(0),ut=0,zl=null,ki=0,Ed=0,oy=0,yl=null,Jt=null,ay=0,Jo=1/0,_r=null,bh=!1,pm=null,Ns=null,mc=!1,Ss=null,kh=0,vl=0,mm=null,Fc=-1,Bc=0;function qt(){return Ee&6?Ze():Fc!==-1?Fc:Fc=Ze()}function Os(t){return t.mode&1?Ee&2&&_t!==0?_t&-_t:pA.transition!==null?(Bc===0&&(Bc=mS()),Bc):(t=be,t!==0||(t=window.event,t=t===void 0?16:TS(t.type)),t):1}function jn(t,e,n,r){if(50<vl)throw vl=0,mm=null,Error($(185));fu(t,n,r),(!(Ee&2)||t!==pt)&&(t===pt&&(!(Ee&2)&&(Ed|=n),ut===4&&os(t,_t)),en(t,r),n===1&&Ee===0&&!(e.mode&1)&&(Jo=Ze()+500,yd&&Ys()))}function en(t,e){var n=t.callbackNode;pC(t,e);var r=hh(t,t===pt?_t:0);if(r===0)n!==null&&H_(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&H_(n),e===1)t.tag===0?fA(Vw.bind(null,t)):BS(Vw.bind(null,t)),uA(function(){!(Ee&6)&&Ys()}),n=null;else{switch(gS(r)){case 1:n=Og;break;case 4:n=fS;break;case 16:n=ch;break;case 536870912:n=pS;break;default:n=ch}n=Ux(n,Nx.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Nx(t,e){if(Fc=-1,Bc=0,Ee&6)throw Error($(327));var n=t.callbackNode;if(Ro()&&t.callbackNode!==n)return null;var r=hh(t,t===pt?_t:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Ch(t,r);else{e=r;var s=Ee;Ee|=2;var i=Lx();(pt!==t||_t!==e)&&(_r=null,Jo=Ze()+500,wi(t,e));do try{LA();break}catch(a){Ox(t,a)}while(!0);Wg(),Ih.current=i,Ee=s,rt!==null?e=0:(pt=null,_t=0,e=ut)}if(e!==0){if(e===2&&(s=$p(t),s!==0&&(r=s,e=gm(t,s))),e===1)throw n=zl,wi(t,0),os(t,r),en(t,Ze()),n;if(e===6)os(t,r);else{if(s=t.current.alternate,!(r&30)&&!NA(s)&&(e=Ch(t,r),e===2&&(i=$p(t),i!==0&&(r=i,e=gm(t,i))),e===1))throw n=zl,wi(t,0),os(t,r),en(t,Ze()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error($(345));case 2:si(t,Jt,_r);break;case 3:if(os(t,r),(r&130023424)===r&&(e=ay+500-Ze(),10<e)){if(hh(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){qt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Jp(si.bind(null,t,Jt,_r),e);break}si(t,Jt,_r);break;case 4:if(os(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Vn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Ze()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*PA(r/1960))-r,10<r){t.timeoutHandle=Jp(si.bind(null,t,Jt,_r),r);break}si(t,Jt,_r);break;case 5:si(t,Jt,_r);break;default:throw Error($(329))}}}return en(t,Ze()),t.callbackNode===n?Nx.bind(null,t):null}function gm(t,e){var n=yl;return t.current.memoizedState.isDehydrated&&(wi(t,e).flags|=256),t=Ch(t,e),t!==2&&(e=Jt,Jt=n,e!==null&&ym(e)),t}function ym(t){Jt===null?Jt=t:Jt.push.apply(Jt,t)}function NA(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Fn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function os(t,e){for(e&=~oy,e&=~Ed,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Vn(e),r=1<<n;t[n]=-1,e&=~r}}function Vw(t){if(Ee&6)throw Error($(327));Ro();var e=hh(t,0);if(!(e&1))return en(t,Ze()),null;var n=Ch(t,e);if(t.tag!==0&&n===2){var r=$p(t);r!==0&&(e=r,n=gm(t,r))}if(n===1)throw n=zl,wi(t,0),os(t,e),en(t,Ze()),n;if(n===6)throw Error($(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,si(t,Jt,_r),en(t,Ze()),null}function ly(t,e){var n=Ee;Ee|=1;try{return t(e)}finally{Ee=n,Ee===0&&(Jo=Ze()+500,yd&&Ys())}}function Ci(t){Ss!==null&&Ss.tag===0&&!(Ee&6)&&Ro();var e=Ee;Ee|=1;var n=Tn.transition,r=be;try{if(Tn.transition=null,be=1,t)return t()}finally{be=r,Tn.transition=n,Ee=e,!(Ee&6)&&Ys()}}function uy(){on=vo.current,De(vo)}function wi(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,lA(n)),rt!==null)for(n=rt.return;n!==null;){var r=n;switch(zg(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&gh();break;case 3:Qo(),De(Yt),De(Ot),Yg();break;case 5:Xg(r);break;case 4:Qo();break;case 13:De(Fe);break;case 19:De(Fe);break;case 10:Kg(r.type._context);break;case 22:case 23:uy()}n=n.return}if(pt=t,rt=t=Ls(t.current,null),_t=on=e,ut=0,zl=null,oy=Ed=ki=0,Jt=yl=null,li!==null){for(e=0;e<li.length;e++)if(n=li[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}li=null}return t}function Ox(t,e){do{var n=rt;try{if(Wg(),Vc.current=Rh,xh){for(var r=Be.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}xh=!1}if(bi=0,ft=ot=Be=null,ml=!1,Fl=0,iy.current=null,n===null||n.return===null){ut=1,zl=e,rt=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=_t,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,h=a,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var y=xw(o);if(y!==null){y.flags&=-257,Rw(y,o,a,i,e),y.mode&1&&Sw(i,c,e),e=y,l=c;var w=e.updateQueue;if(w===null){var b=new Set;b.add(l),e.updateQueue=b}else w.add(l);break e}else{if(!(e&1)){Sw(i,c,e),cy();break e}l=Error($(426))}}else if(je&&a.mode&1){var R=xw(o);if(R!==null){!(R.flags&65536)&&(R.flags|=256),Rw(R,o,a,i,e),qg(Go(l,a));break e}}i=l=Go(l,a),ut!==4&&(ut=2),yl===null?yl=[i]:yl.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var T=gx(i,l,e);yw(i,T);break e;case 1:a=l;var v=i.type,x=i.stateNode;if(!(i.flags&128)&&(typeof v.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Ns===null||!Ns.has(x)))){i.flags|=65536,e&=-e,i.lanes|=e;var C=yx(i,a,e);yw(i,C);break e}}i=i.return}while(i!==null)}Mx(n)}catch(M){e=M,rt===n&&n!==null&&(rt=n=n.return);continue}break}while(!0)}function Lx(){var t=Ih.current;return Ih.current=Rh,t===null?Rh:t}function cy(){(ut===0||ut===3||ut===2)&&(ut=4),pt===null||!(ki&268435455)&&!(Ed&268435455)||os(pt,_t)}function Ch(t,e){var n=Ee;Ee|=2;var r=Lx();(pt!==t||_t!==e)&&(_r=null,wi(t,e));do try{OA();break}catch(s){Ox(t,s)}while(!0);if(Wg(),Ee=n,Ih.current=r,rt!==null)throw Error($(261));return pt=null,_t=0,ut}function OA(){for(;rt!==null;)Dx(rt)}function LA(){for(;rt!==null&&!iC();)Dx(rt)}function Dx(t){var e=jx(t.alternate,t,on);t.memoizedProps=t.pendingProps,e===null?Mx(t):rt=e,iy.current=null}function Mx(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=bA(n,e),n!==null){n.flags&=32767,rt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ut=6,rt=null;return}}else if(n=IA(n,e,on),n!==null){rt=n;return}if(e=e.sibling,e!==null){rt=e;return}rt=e=t}while(e!==null);ut===0&&(ut=5)}function si(t,e,n){var r=be,s=Tn.transition;try{Tn.transition=null,be=1,DA(t,e,n,r)}finally{Tn.transition=s,be=r}return null}function DA(t,e,n,r){do Ro();while(Ss!==null);if(Ee&6)throw Error($(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error($(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(mC(t,i),t===pt&&(rt=pt=null,_t=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||mc||(mc=!0,Ux(ch,function(){return Ro(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Tn.transition,Tn.transition=null;var o=be;be=1;var a=Ee;Ee|=4,iy.current=null,CA(t,n),Ax(n,t),tA(Qp),dh=!!Kp,Qp=Kp=null,t.current=n,AA(n),oC(),Ee=a,be=o,Tn.transition=i}else t.current=n;if(mc&&(mc=!1,Ss=t,kh=s),i=t.pendingLanes,i===0&&(Ns=null),uC(n.stateNode),en(t,Ze()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(bh)throw bh=!1,t=pm,pm=null,t;return kh&1&&t.tag!==0&&Ro(),i=t.pendingLanes,i&1?t===mm?vl++:(vl=0,mm=t):vl=0,Ys(),null}function Ro(){if(Ss!==null){var t=gS(kh),e=Tn.transition,n=be;try{if(Tn.transition=null,be=16>t?16:t,Ss===null)var r=!1;else{if(t=Ss,Ss=null,kh=0,Ee&6)throw Error($(331));var s=Ee;for(Ee|=4,Q=t.current;Q!==null;){var i=Q,o=i.child;if(Q.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(Q=c;Q!==null;){var h=Q;switch(h.tag){case 0:case 11:case 15:gl(8,h,i)}var f=h.child;if(f!==null)f.return=h,Q=f;else for(;Q!==null;){h=Q;var p=h.sibling,y=h.return;if(bx(h),h===c){Q=null;break}if(p!==null){p.return=y,Q=p;break}Q=y}}}var w=i.alternate;if(w!==null){var b=w.child;if(b!==null){w.child=null;do{var R=b.sibling;b.sibling=null,b=R}while(b!==null)}}Q=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Q=o;else e:for(;Q!==null;){if(i=Q,i.flags&2048)switch(i.tag){case 0:case 11:case 15:gl(9,i,i.return)}var T=i.sibling;if(T!==null){T.return=i.return,Q=T;break e}Q=i.return}}var v=t.current;for(Q=v;Q!==null;){o=Q;var x=o.child;if(o.subtreeFlags&2064&&x!==null)x.return=o,Q=x;else e:for(o=v;Q!==null;){if(a=Q,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:wd(9,a)}}catch(M){Ge(a,a.return,M)}if(a===o){Q=null;break e}var C=a.sibling;if(C!==null){C.return=a.return,Q=C;break e}Q=a.return}}if(Ee=s,Ys(),Zn&&typeof Zn.onPostCommitFiberRoot=="function")try{Zn.onPostCommitFiberRoot(dd,t)}catch{}r=!0}return r}finally{be=n,Tn.transition=e}}return!1}function jw(t,e,n){e=Go(n,e),e=gx(t,e,1),t=Ps(t,e,1),e=qt(),t!==null&&(fu(t,1,e),en(t,e))}function Ge(t,e,n){if(t.tag===3)jw(t,t,n);else for(;e!==null;){if(e.tag===3){jw(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ns===null||!Ns.has(r))){t=Go(n,t),t=yx(e,t,1),e=Ps(e,t,1),t=qt(),e!==null&&(fu(e,1,t),en(e,t));break}}e=e.return}}function MA(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=qt(),t.pingedLanes|=t.suspendedLanes&n,pt===t&&(_t&n)===n&&(ut===4||ut===3&&(_t&130023424)===_t&&500>Ze()-ay?wi(t,0):oy|=n),en(t,e)}function Vx(t,e){e===0&&(t.mode&1?(e=ic,ic<<=1,!(ic&130023424)&&(ic=4194304)):e=1);var n=qt();t=Dr(t,e),t!==null&&(fu(t,e,n),en(t,n))}function VA(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Vx(t,n)}function jA(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error($(314))}r!==null&&r.delete(e),Vx(t,n)}var jx;jx=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Yt.current)Xt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Xt=!1,RA(t,e,n);Xt=!!(t.flags&131072)}else Xt=!1,je&&e.flags&1048576&&$S(e,_h,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Uc(t,e),t=e.pendingProps;var s=Ho(e,Ot.current);xo(e,n),s=ey(null,e,r,t,s,n);var i=ty();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Zt(r)?(i=!0,yh(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Gg(e),s.updater=_d,e.stateNode=s,s._reactInternals=e,rm(e,r,t,n),e=om(null,e,r,!0,i,n)):(e.tag=0,je&&i&&$g(e),$t(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Uc(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=FA(r),t=An(r,t),s){case 0:e=im(null,e,r,t,n);break e;case 1:e=kw(null,e,r,t,n);break e;case 11:e=Iw(null,e,r,t,n);break e;case 14:e=bw(null,e,r,An(r.type,t),n);break e}throw Error($(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:An(r,s),im(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:An(r,s),kw(t,e,r,s,n);case 3:e:{if(Ex(e),t===null)throw Error($(387));r=e.pendingProps,i=e.memoizedState,s=i.element,QS(t,e),Th(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Go(Error($(423)),e),e=Cw(t,e,r,n,s);break e}else if(r!==s){s=Go(Error($(424)),e),e=Cw(t,e,r,n,s);break e}else for(an=As(e.stateNode.containerInfo.firstChild),un=e,je=!0,Dn=null,n=WS(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Wo(),r===s){e=Mr(t,e,n);break e}$t(t,e,r,n)}e=e.child}return e;case 5:return GS(e),t===null&&em(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Gp(r,s)?o=null:i!==null&&Gp(r,i)&&(e.flags|=32),wx(t,e),$t(t,e,o,n),e.child;case 6:return t===null&&em(e),null;case 13:return Tx(t,e,n);case 4:return Jg(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ko(e,null,r,n):$t(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:An(r,s),Iw(t,e,r,s,n);case 7:return $t(t,e,e.pendingProps,n),e.child;case 8:return $t(t,e,e.pendingProps.children,n),e.child;case 12:return $t(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Ne(wh,r._currentValue),r._currentValue=o,i!==null)if(Fn(i.value,o)){if(i.children===s.children&&!Yt.current){e=Mr(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=kr(-1,n&-n),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?l.next=l:(l.next=h.next,h.next=l),c.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),tm(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error($(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),tm(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}$t(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,xo(e,n),s=xn(s),r=r(s),e.flags|=1,$t(t,e,r,n),e.child;case 14:return r=e.type,s=An(r,e.pendingProps),s=An(r.type,s),bw(t,e,r,s,n);case 15:return vx(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:An(r,s),Uc(t,e),e.tag=1,Zt(r)?(t=!0,yh(e)):t=!1,xo(e,n),mx(e,r,s),rm(e,r,s,n),om(null,e,r,!0,t,n);case 19:return Sx(t,e,n);case 22:return _x(t,e,n)}throw Error($(156,e.tag))};function Ux(t,e){return dS(t,e)}function UA(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function En(t,e,n,r){return new UA(t,e,n,r)}function hy(t){return t=t.prototype,!(!t||!t.isReactComponent)}function FA(t){if(typeof t=="function")return hy(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Ag)return 11;if(t===Pg)return 14}return 2}function Ls(t,e){var n=t.alternate;return n===null?(n=En(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function $c(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")hy(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case ao:return Ei(n.children,s,i,e);case Cg:o=8,s|=8;break;case bp:return t=En(12,n,e,s|2),t.elementType=bp,t.lanes=i,t;case kp:return t=En(13,n,e,s),t.elementType=kp,t.lanes=i,t;case Cp:return t=En(19,n,e,s),t.elementType=Cp,t.lanes=i,t;case GT:return Td(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case KT:o=10;break e;case QT:o=9;break e;case Ag:o=11;break e;case Pg:o=14;break e;case ts:o=16,r=null;break e}throw Error($(130,t==null?t:typeof t,""))}return e=En(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Ei(t,e,n,r){return t=En(7,t,r,e),t.lanes=n,t}function Td(t,e,n,r){return t=En(22,t,r,e),t.elementType=GT,t.lanes=n,t.stateNode={isHidden:!1},t}function Xf(t,e,n){return t=En(6,t,null,e),t.lanes=n,t}function Yf(t,e,n){return e=En(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function BA(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Nf(0),this.expirationTimes=Nf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Nf(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function dy(t,e,n,r,s,i,o,a,l){return t=new BA(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=En(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Gg(i),t}function $A(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:oo,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Fx(t){if(!t)return zs;t=t._reactInternals;e:{if($i(t)!==t||t.tag!==1)throw Error($(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Zt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error($(171))}if(t.tag===1){var n=t.type;if(Zt(n))return FS(t,n,e)}return e}function Bx(t,e,n,r,s,i,o,a,l){return t=dy(n,r,!0,t,s,i,o,a,l),t.context=Fx(null),n=t.current,r=qt(),s=Os(n),i=kr(r,s),i.callback=e??null,Ps(n,i,s),t.current.lanes=s,fu(t,s,r),en(t,r),t}function Sd(t,e,n,r){var s=e.current,i=qt(),o=Os(s);return n=Fx(n),e.context===null?e.context=n:e.pendingContext=n,e=kr(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ps(s,e,o),t!==null&&(jn(t,s,o,i),Mc(t,s,o)),o}function Ah(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Uw(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function fy(t,e){Uw(t,e),(t=t.alternate)&&Uw(t,e)}function zA(){return null}var $x=typeof reportError=="function"?reportError:function(t){console.error(t)};function py(t){this._internalRoot=t}xd.prototype.render=py.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error($(409));Sd(t,e,null,null)};xd.prototype.unmount=py.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ci(function(){Sd(null,t,null,null)}),e[Lr]=null}};function xd(t){this._internalRoot=t}xd.prototype.unstable_scheduleHydration=function(t){if(t){var e=_S();t={blockedOn:null,target:t,priority:e};for(var n=0;n<is.length&&e!==0&&e<is[n].priority;n++);is.splice(n,0,t),n===0&&ES(t)}};function my(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Rd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Fw(){}function qA(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=Ah(o);i.call(c)}}var o=Bx(e,r,t,0,null,!1,!1,"",Fw);return t._reactRootContainer=o,t[Lr]=o.current,Dl(t.nodeType===8?t.parentNode:t),Ci(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var c=Ah(l);a.call(c)}}var l=dy(t,0,!1,null,null,!1,!1,"",Fw);return t._reactRootContainer=l,t[Lr]=l.current,Dl(t.nodeType===8?t.parentNode:t),Ci(function(){Sd(e,l,n,r)}),l}function Id(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=Ah(o);a.call(l)}}Sd(e,o,t,s)}else o=qA(n,e,t,s,r);return Ah(o)}yS=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=el(e.pendingLanes);n!==0&&(Lg(e,n|1),en(e,Ze()),!(Ee&6)&&(Jo=Ze()+500,Ys()))}break;case 13:Ci(function(){var r=Dr(t,1);if(r!==null){var s=qt();jn(r,t,1,s)}}),fy(t,1)}};Dg=function(t){if(t.tag===13){var e=Dr(t,134217728);if(e!==null){var n=qt();jn(e,t,134217728,n)}fy(t,134217728)}};vS=function(t){if(t.tag===13){var e=Os(t),n=Dr(t,e);if(n!==null){var r=qt();jn(n,t,e,r)}fy(t,e)}};_S=function(){return be};wS=function(t,e){var n=be;try{return be=t,e()}finally{be=n}};Up=function(t,e,n){switch(e){case"input":if(Np(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=gd(r);if(!s)throw Error($(90));XT(r),Np(r,s)}}}break;case"textarea":ZT(t,n);break;case"select":e=n.value,e!=null&&wo(t,!!n.multiple,e,!1)}};oS=ly;aS=Ci;var HA={usingClientEntryPoint:!1,Events:[mu,ho,gd,sS,iS,ly]},Ha={findFiberByHostInstance:ai,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},WA={bundleType:Ha.bundleType,version:Ha.version,rendererPackageName:Ha.rendererPackageName,rendererConfig:Ha.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:qr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=cS(t),t===null?null:t.stateNode},findFiberByHostInstance:Ha.findFiberByHostInstance||zA,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var gc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!gc.isDisabled&&gc.supportsFiber)try{dd=gc.inject(WA),Zn=gc}catch{}}dn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=HA;dn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!my(e))throw Error($(200));return $A(t,e,null,n)};dn.createRoot=function(t,e){if(!my(t))throw Error($(299));var n=!1,r="",s=$x;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=dy(t,1,!1,null,null,n,!1,r,s),t[Lr]=e.current,Dl(t.nodeType===8?t.parentNode:t),new py(e)};dn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error($(188)):(t=Object.keys(t).join(","),Error($(268,t)));return t=cS(e),t=t===null?null:t.stateNode,t};dn.flushSync=function(t){return Ci(t)};dn.hydrate=function(t,e,n){if(!Rd(e))throw Error($(200));return Id(null,t,e,!0,n)};dn.hydrateRoot=function(t,e,n){if(!my(t))throw Error($(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=$x;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Bx(e,null,t,1,n??null,s,!1,i,o),t[Lr]=e.current,Dl(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new xd(e)};dn.render=function(t,e,n){if(!Rd(e))throw Error($(200));return Id(null,t,e,!1,n)};dn.unmountComponentAtNode=function(t){if(!Rd(t))throw Error($(40));return t._reactRootContainer?(Ci(function(){Id(null,null,t,!1,function(){t._reactRootContainer=null,t[Lr]=null})}),!0):!1};dn.unstable_batchedUpdates=ly;dn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Rd(n))throw Error($(200));if(t==null||t._reactInternals===void 0)throw Error($(38));return Id(t,e,n,!1,r)};dn.version="18.3.1-next-f1338f8080-20240426";function zx(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(zx)}catch(t){console.error(t)}}zx(),zT.exports=dn;var KA=zT.exports,Bw=KA;Rp.createRoot=Bw.createRoot,Rp.hydrateRoot=Bw.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ql(){return ql=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ql.apply(this,arguments)}var xs;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(xs||(xs={}));const $w="popstate";function QA(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return vm("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Ph(s)}return JA(e,n,null,t)}function $e(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function qx(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function GA(){return Math.random().toString(36).substr(2,8)}function zw(t,e){return{usr:t.state,key:t.key,idx:e}}function vm(t,e,n,r){return n===void 0&&(n=null),ql({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?fa(e):e,{state:n,key:e&&e.key||r||GA()})}function Ph(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function fa(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function JA(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=xs.Pop,l=null,c=h();c==null&&(c=0,o.replaceState(ql({},o.state,{idx:c}),""));function h(){return(o.state||{idx:null}).idx}function f(){a=xs.Pop;let R=h(),T=R==null?null:R-c;c=R,l&&l({action:a,location:b.location,delta:T})}function p(R,T){a=xs.Push;let v=vm(b.location,R,T);c=h()+1;let x=zw(v,c),C=b.createHref(v);try{o.pushState(x,"",C)}catch(M){if(M instanceof DOMException&&M.name==="DataCloneError")throw M;s.location.assign(C)}i&&l&&l({action:a,location:b.location,delta:1})}function y(R,T){a=xs.Replace;let v=vm(b.location,R,T);c=h();let x=zw(v,c),C=b.createHref(v);o.replaceState(x,"",C),i&&l&&l({action:a,location:b.location,delta:0})}function w(R){let T=s.location.origin!=="null"?s.location.origin:s.location.href,v=typeof R=="string"?R:Ph(R);return v=v.replace(/ $/,"%20"),$e(T,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,T)}let b={get action(){return a},get location(){return t(s,o)},listen(R){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener($w,f),l=R,()=>{s.removeEventListener($w,f),l=null}},createHref(R){return e(s,R)},createURL:w,encodeLocation(R){let T=w(R);return{pathname:T.pathname,search:T.search,hash:T.hash}},push:p,replace:y,go(R){return o.go(R)}};return b}var qw;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(qw||(qw={}));function XA(t,e,n){return n===void 0&&(n="/"),YA(t,e,n)}function YA(t,e,n,r){let s=typeof e=="string"?fa(e):e,i=Xo(s.pathname||"/",n);if(i==null)return null;let o=Hx(t);ZA(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=cP(i);a=lP(o[l],c)}return a}function Hx(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&($e(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=Ds([r,l.relativePath]),h=n.concat(l);i.children&&i.children.length>0&&($e(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),Hx(i.children,e,h,c)),!(i.path==null&&!i.index)&&e.push({path:c,score:oP(c,i.index),routesMeta:h})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let l of Wx(i.path))s(i,o,l)}),e}function Wx(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=Wx(r.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function ZA(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:aP(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const eP=/^:[\w-]+$/,tP=3,nP=2,rP=1,sP=10,iP=-2,Hw=t=>t==="*";function oP(t,e){let n=t.split("/"),r=n.length;return n.some(Hw)&&(r+=iP),e&&(r+=nP),n.filter(s=>!Hw(s)).reduce((s,i)=>s+(eP.test(i)?tP:i===""?rP:sP),r)}function aP(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function lP(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,h=i==="/"?e:e.slice(i.length)||"/",f=_m({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},h),p=l.route;if(!f)return null;Object.assign(s,f.params),o.push({params:s,pathname:Ds([i,f.pathname]),pathnameBase:pP(Ds([i,f.pathnameBase])),route:p}),f.pathnameBase!=="/"&&(i=Ds([i,f.pathnameBase]))}return o}function _m(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=uP(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((c,h,f)=>{let{paramName:p,isOptional:y}=h;if(p==="*"){let b=a[f]||"";o=i.slice(0,i.length-b.length).replace(/(.)\/+$/,"$1")}const w=a[f];return y&&!w?c[p]=void 0:c[p]=(w||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:o,pattern:t}}function uP(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),qx(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function cP(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return qx(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Xo(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function hP(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?fa(t):t;return{pathname:n?n.startsWith("/")?n:dP(n,e):e,search:mP(r),hash:gP(s)}}function dP(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Zf(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function fP(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function gy(t,e){let n=fP(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function yy(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=fa(t):(s=ql({},t),$e(!s.pathname||!s.pathname.includes("?"),Zf("?","pathname","search",s)),$e(!s.pathname||!s.pathname.includes("#"),Zf("#","pathname","hash",s)),$e(!s.search||!s.search.includes("#"),Zf("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let f=e.length-1;if(!r&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),f-=1;s.pathname=p.join("/")}a=f>=0?e[f]:"/"}let l=hP(s,a),c=o&&o!=="/"&&o.endsWith("/"),h=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||h)&&(l.pathname+="/"),l}const Ds=t=>t.join("/").replace(/\/\/+/g,"/"),pP=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),mP=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,gP=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function yP(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Kx=["post","put","patch","delete"];new Set(Kx);const vP=["get",...Kx];new Set(vP);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Hl(){return Hl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Hl.apply(this,arguments)}const bd=L.createContext(null),Qx=L.createContext(null),Hr=L.createContext(null),kd=L.createContext(null),Wr=L.createContext({outlet:null,matches:[],isDataRoute:!1}),Gx=L.createContext(null);function _P(t,e){let{relative:n}=e===void 0?{}:e;pa()||$e(!1);let{basename:r,navigator:s}=L.useContext(Hr),{hash:i,pathname:o,search:a}=Cd(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:Ds([r,o])),s.createHref({pathname:l,search:a,hash:i})}function pa(){return L.useContext(kd)!=null}function Kr(){return pa()||$e(!1),L.useContext(kd).location}function Jx(t){L.useContext(Hr).static||L.useLayoutEffect(t)}function zi(){let{isDataRoute:t}=L.useContext(Wr);return t?NP():wP()}function wP(){pa()||$e(!1);let t=L.useContext(bd),{basename:e,future:n,navigator:r}=L.useContext(Hr),{matches:s}=L.useContext(Wr),{pathname:i}=Kr(),o=JSON.stringify(gy(s,n.v7_relativeSplatPath)),a=L.useRef(!1);return Jx(()=>{a.current=!0}),L.useCallback(function(c,h){if(h===void 0&&(h={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let f=yy(c,JSON.parse(o),i,h.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:Ds([e,f.pathname])),(h.replace?r.replace:r.push)(f,h.state,h)},[e,r,o,i,t])}function Xx(){let{matches:t}=L.useContext(Wr),e=t[t.length-1];return e?e.params:{}}function Cd(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=L.useContext(Hr),{matches:s}=L.useContext(Wr),{pathname:i}=Kr(),o=JSON.stringify(gy(s,r.v7_relativeSplatPath));return L.useMemo(()=>yy(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function EP(t,e){return TP(t,e)}function TP(t,e,n,r){pa()||$e(!1);let{navigator:s}=L.useContext(Hr),{matches:i}=L.useContext(Wr),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=Kr(),h;if(e){var f;let R=typeof e=="string"?fa(e):e;l==="/"||(f=R.pathname)!=null&&f.startsWith(l)||$e(!1),h=R}else h=c;let p=h.pathname||"/",y=p;if(l!=="/"){let R=l.replace(/^\//,"").split("/");y="/"+p.replace(/^\//,"").split("/").slice(R.length).join("/")}let w=XA(t,{pathname:y}),b=bP(w&&w.map(R=>Object.assign({},R,{params:Object.assign({},a,R.params),pathname:Ds([l,s.encodeLocation?s.encodeLocation(R.pathname).pathname:R.pathname]),pathnameBase:R.pathnameBase==="/"?l:Ds([l,s.encodeLocation?s.encodeLocation(R.pathnameBase).pathname:R.pathnameBase])})),i,n,r);return e&&b?L.createElement(kd.Provider,{value:{location:Hl({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:xs.Pop}},b):b}function SP(){let t=PP(),e=yP(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return L.createElement(L.Fragment,null,L.createElement("h2",null,"Unexpected Application Error!"),L.createElement("h3",{style:{fontStyle:"italic"}},e),n?L.createElement("pre",{style:s},n):null,null)}const xP=L.createElement(SP,null);class RP extends L.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?L.createElement(Wr.Provider,{value:this.props.routeContext},L.createElement(Gx.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function IP(t){let{routeContext:e,match:n,children:r}=t,s=L.useContext(bd);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),L.createElement(Wr.Provider,{value:e},r)}function bP(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let h=o.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);h>=0||$e(!1),o=o.slice(0,Math.min(o.length,h+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<o.length;h++){let f=o[h];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(c=h),f.route.id){let{loaderData:p,errors:y}=n,w=f.route.loader&&p[f.route.id]===void 0&&(!y||y[f.route.id]===void 0);if(f.route.lazy||w){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((h,f,p)=>{let y,w=!1,b=null,R=null;n&&(y=a&&f.route.id?a[f.route.id]:void 0,b=f.route.errorElement||xP,l&&(c<0&&p===0?(OP("route-fallback"),w=!0,R=null):c===p&&(w=!0,R=f.route.hydrateFallbackElement||null)));let T=e.concat(o.slice(0,p+1)),v=()=>{let x;return y?x=b:w?x=R:f.route.Component?x=L.createElement(f.route.Component,null):f.route.element?x=f.route.element:x=h,L.createElement(IP,{match:f,routeContext:{outlet:h,matches:T,isDataRoute:n!=null},children:x})};return n&&(f.route.ErrorBoundary||f.route.errorElement||p===0)?L.createElement(RP,{location:n.location,revalidation:n.revalidation,component:b,error:y,children:v(),routeContext:{outlet:null,matches:T,isDataRoute:!0}}):v()},null)}var Yx=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Yx||{}),Zx=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Zx||{});function kP(t){let e=L.useContext(bd);return e||$e(!1),e}function CP(t){let e=L.useContext(Qx);return e||$e(!1),e}function AP(t){let e=L.useContext(Wr);return e||$e(!1),e}function eR(t){let e=AP(),n=e.matches[e.matches.length-1];return n.route.id||$e(!1),n.route.id}function PP(){var t;let e=L.useContext(Gx),n=CP(),r=eR();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function NP(){let{router:t}=kP(Yx.UseNavigateStable),e=eR(Zx.UseNavigateStable),n=L.useRef(!1);return Jx(()=>{n.current=!0}),L.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Hl({fromRouteId:e},i)))},[t,e])}const Ww={};function OP(t,e,n){Ww[t]||(Ww[t]=!0)}function LP(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function tR(t){let{to:e,replace:n,state:r,relative:s}=t;pa()||$e(!1);let{future:i,static:o}=L.useContext(Hr),{matches:a}=L.useContext(Wr),{pathname:l}=Kr(),c=zi(),h=yy(e,gy(a,i.v7_relativeSplatPath),l,s==="path"),f=JSON.stringify(h);return L.useEffect(()=>c(JSON.parse(f),{replace:n,state:r,relative:s}),[c,f,s,n,r]),null}function sn(t){$e(!1)}function DP(t){let{basename:e="/",children:n=null,location:r,navigationType:s=xs.Pop,navigator:i,static:o=!1,future:a}=t;pa()&&$e(!1);let l=e.replace(/^\/*/,"/"),c=L.useMemo(()=>({basename:l,navigator:i,static:o,future:Hl({v7_relativeSplatPath:!1},a)}),[l,a,i,o]);typeof r=="string"&&(r=fa(r));let{pathname:h="/",search:f="",hash:p="",state:y=null,key:w="default"}=r,b=L.useMemo(()=>{let R=Xo(h,l);return R==null?null:{location:{pathname:R,search:f,hash:p,state:y,key:w},navigationType:s}},[l,h,f,p,y,w,s]);return b==null?null:L.createElement(Hr.Provider,{value:c},L.createElement(kd.Provider,{children:n,value:b}))}function MP(t){let{children:e,location:n}=t;return EP(wm(e),n)}new Promise(()=>{});function wm(t,e){e===void 0&&(e=[]);let n=[];return L.Children.forEach(t,(r,s)=>{if(!L.isValidElement(r))return;let i=[...e,s];if(r.type===L.Fragment){n.push.apply(n,wm(r.props.children,i));return}r.type!==sn&&$e(!1),!r.props.index||!r.props.children||$e(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=wm(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Nh(){return Nh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Nh.apply(this,arguments)}function nR(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function VP(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function jP(t,e){return t.button===0&&(!e||e==="_self")&&!VP(t)}const UP=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],FP=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],BP="6";try{window.__reactRouterVersion=BP}catch{}const $P=L.createContext({isTransitioning:!1}),zP="startTransition",Kw=Mk[zP];function qP(t){let{basename:e,children:n,future:r,window:s}=t,i=L.useRef();i.current==null&&(i.current=QA({window:s,v5Compat:!0}));let o=i.current,[a,l]=L.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},h=L.useCallback(f=>{c&&Kw?Kw(()=>l(f)):l(f)},[l,c]);return L.useLayoutEffect(()=>o.listen(h),[o,h]),L.useEffect(()=>LP(r),[r]),L.createElement(DP,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const HP=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",WP=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Vr=L.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:a,target:l,to:c,preventScrollReset:h,viewTransition:f}=e,p=nR(e,UP),{basename:y}=L.useContext(Hr),w,b=!1;if(typeof c=="string"&&WP.test(c)&&(w=c,HP))try{let x=new URL(window.location.href),C=c.startsWith("//")?new URL(x.protocol+c):new URL(c),M=Xo(C.pathname,y);C.origin===x.origin&&M!=null?c=M+C.search+C.hash:b=!0}catch{}let R=_P(c,{relative:s}),T=QP(c,{replace:o,state:a,target:l,preventScrollReset:h,relative:s,viewTransition:f});function v(x){r&&r(x),x.defaultPrevented||T(x)}return L.createElement("a",Nh({},p,{href:w||R,onClick:b||i?r:v,ref:n,target:l}))}),yc=L.forwardRef(function(e,n){let{"aria-current":r="page",caseSensitive:s=!1,className:i="",end:o=!1,style:a,to:l,viewTransition:c,children:h}=e,f=nR(e,FP),p=Cd(l,{relative:f.relative}),y=Kr(),w=L.useContext(Qx),{navigator:b,basename:R}=L.useContext(Hr),T=w!=null&&GP(p)&&c===!0,v=b.encodeLocation?b.encodeLocation(p).pathname:p.pathname,x=y.pathname,C=w&&w.navigation&&w.navigation.location?w.navigation.location.pathname:null;s||(x=x.toLowerCase(),C=C?C.toLowerCase():null,v=v.toLowerCase()),C&&R&&(C=Xo(C,R)||C);const M=v!=="/"&&v.endsWith("/")?v.length-1:v.length;let U=x===v||!o&&x.startsWith(v)&&x.charAt(M)==="/",I=C!=null&&(C===v||!o&&C.startsWith(v)&&C.charAt(v.length)==="/"),_={isActive:U,isPending:I,isTransitioning:T},S=U?r:void 0,k;typeof i=="function"?k=i(_):k=[i,U?"active":null,I?"pending":null,T?"transitioning":null].filter(Boolean).join(" ");let N=typeof a=="function"?a(_):a;return L.createElement(Vr,Nh({},f,{"aria-current":S,className:k,ref:n,style:N,to:l,viewTransition:c}),typeof h=="function"?h(_):h)});var Em;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Em||(Em={}));var Qw;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Qw||(Qw={}));function KP(t){let e=L.useContext(bd);return e||$e(!1),e}function QP(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:a}=e===void 0?{}:e,l=zi(),c=Kr(),h=Cd(t,{relative:o});return L.useCallback(f=>{if(jP(f,n)){f.preventDefault();let p=r!==void 0?r:Ph(c)===Ph(h);l(t,{replace:p,state:s,preventScrollReset:i,relative:o,viewTransition:a})}},[c,l,h,r,s,n,t,i,o,a])}function GP(t,e){e===void 0&&(e={});let n=L.useContext($P);n==null&&$e(!1);let{basename:r}=KP(Em.useViewTransitionState),s=Cd(t,{relative:e.relative});if(!n.isTransitioning)return!1;let i=Xo(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=Xo(n.nextLocation.pathname,r)||n.nextLocation.pathname;return _m(s.pathname,o)!=null||_m(s.pathname,i)!=null}var Gw={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rR=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},JP=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},sR={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,c=l?t[s+2]:0,h=i>>2,f=(i&3)<<4|a>>4;let p=(a&15)<<2|c>>6,y=c&63;l||(y=64,o||(p=64)),r.push(n[h],n[f],n[p],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(rR(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):JP(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const f=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||c==null||f==null)throw new XP;const p=i<<2|a>>4;if(r.push(p),c!==64){const y=a<<4&240|c>>2;if(r.push(y),f!==64){const w=c<<6&192|f;r.push(w)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class XP extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const YP=function(t){const e=rR(t);return sR.encodeByteArray(e,!0)},Oh=function(t){return YP(t).replace(/\./g,"")},iR=function(t){try{return sR.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZP(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eN=()=>ZP().__FIREBASE_DEFAULTS__,tN=()=>{if(typeof process>"u"||typeof Gw>"u")return;const t=Gw.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},nN=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&iR(t[1]);return e&&JSON.parse(e)},Ad=()=>{try{return eN()||tN()||nN()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},oR=t=>{var e,n;return(n=(e=Ad())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},aR=t=>{const e=oR(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},lR=()=>{var t;return(t=Ad())===null||t===void 0?void 0:t.config},uR=t=>{var e;return(e=Ad())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rN{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cR(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Oh(JSON.stringify(n)),Oh(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function sN(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Lt())}function iN(){var t;const e=(t=Ad())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function oN(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function aN(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function lN(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function uN(){const t=Lt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function cN(){return!iN()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function hN(){try{return typeof indexedDB=="object"}catch{return!1}}function dN(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fN="FirebaseError";class cr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=fN,Object.setPrototypeOf(this,cr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,yu.prototype.create)}}class yu{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?pN(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new cr(s,a,r)}}function pN(t,e){return t.replace(mN,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const mN=/\{\$([^}]+)}/g;function gN(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Lh(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(Jw(i)&&Jw(o)){if(!Lh(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Jw(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vu(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function nl(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function rl(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function yN(t,e){const n=new vN(t,e);return n.subscribe.bind(n)}class vN{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");_N(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=ep),s.error===void 0&&(s.error=ep),s.complete===void 0&&(s.complete=ep);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function _N(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function ep(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qe(t){return t&&t._delegate?t._delegate:t}class qs{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ii="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wN{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new rN;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(TN(e))try{this.getOrInitializeService({instanceIdentifier:ii})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=ii){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ii){return this.instances.has(e)}getOptions(e=ii){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:EN(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ii){return this.component?this.component.multipleInstances?e:ii:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function EN(t){return t===ii?void 0:t}function TN(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SN{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new wN(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ve;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ve||(ve={}));const xN={debug:ve.DEBUG,verbose:ve.VERBOSE,info:ve.INFO,warn:ve.WARN,error:ve.ERROR,silent:ve.SILENT},RN=ve.INFO,IN={[ve.DEBUG]:"log",[ve.VERBOSE]:"log",[ve.INFO]:"info",[ve.WARN]:"warn",[ve.ERROR]:"error"},bN=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=IN[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};let vy=class{constructor(e){this.name=e,this._logLevel=RN,this._logHandler=bN,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ve))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?xN[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ve.DEBUG,...e),this._logHandler(this,ve.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ve.VERBOSE,...e),this._logHandler(this,ve.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ve.INFO,...e),this._logHandler(this,ve.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ve.WARN,...e),this._logHandler(this,ve.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ve.ERROR,...e),this._logHandler(this,ve.ERROR,...e)}};const kN=(t,e)=>e.some(n=>t instanceof n);let Xw,Yw;function CN(){return Xw||(Xw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function AN(){return Yw||(Yw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const hR=new WeakMap,Tm=new WeakMap,dR=new WeakMap,tp=new WeakMap,_y=new WeakMap;function PN(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Ms(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&hR.set(n,t)}).catch(()=>{}),_y.set(e,t),e}function NN(t){if(Tm.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Tm.set(t,e)}let Sm={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Tm.get(t);if(e==="objectStoreNames")return t.objectStoreNames||dR.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ms(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function ON(t){Sm=t(Sm)}function LN(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(np(this),e,...n);return dR.set(r,e.sort?e.sort():[e]),Ms(r)}:AN().includes(t)?function(...e){return t.apply(np(this),e),Ms(hR.get(this))}:function(...e){return Ms(t.apply(np(this),e))}}function DN(t){return typeof t=="function"?LN(t):(t instanceof IDBTransaction&&NN(t),kN(t,CN())?new Proxy(t,Sm):t)}function Ms(t){if(t instanceof IDBRequest)return PN(t);if(tp.has(t))return tp.get(t);const e=DN(t);return e!==t&&(tp.set(t,e),_y.set(e,t)),e}const np=t=>_y.get(t);function MN(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=Ms(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Ms(o.result),l.oldVersion,l.newVersion,Ms(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const VN=["get","getKey","getAll","getAllKeys","count"],jN=["put","add","delete","clear"],rp=new Map;function Zw(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(rp.get(e))return rp.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=jN.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||VN.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&l.done]))[0]};return rp.set(e,i),i}ON(t=>({...t,get:(e,n,r)=>Zw(e,n)||t.get(e,n,r),has:(e,n)=>!!Zw(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UN{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(FN(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function FN(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const xm="@firebase/app",e0="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jr=new vy("@firebase/app"),BN="@firebase/app-compat",$N="@firebase/analytics-compat",zN="@firebase/analytics",qN="@firebase/app-check-compat",HN="@firebase/app-check",WN="@firebase/auth",KN="@firebase/auth-compat",QN="@firebase/database",GN="@firebase/data-connect",JN="@firebase/database-compat",XN="@firebase/functions",YN="@firebase/functions-compat",ZN="@firebase/installations",eO="@firebase/installations-compat",tO="@firebase/messaging",nO="@firebase/messaging-compat",rO="@firebase/performance",sO="@firebase/performance-compat",iO="@firebase/remote-config",oO="@firebase/remote-config-compat",aO="@firebase/storage",lO="@firebase/storage-compat",uO="@firebase/firestore",cO="@firebase/vertexai-preview",hO="@firebase/firestore-compat",dO="firebase",fO="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rm="[DEFAULT]",pO={[xm]:"fire-core",[BN]:"fire-core-compat",[zN]:"fire-analytics",[$N]:"fire-analytics-compat",[HN]:"fire-app-check",[qN]:"fire-app-check-compat",[WN]:"fire-auth",[KN]:"fire-auth-compat",[QN]:"fire-rtdb",[GN]:"fire-data-connect",[JN]:"fire-rtdb-compat",[XN]:"fire-fn",[YN]:"fire-fn-compat",[ZN]:"fire-iid",[eO]:"fire-iid-compat",[tO]:"fire-fcm",[nO]:"fire-fcm-compat",[rO]:"fire-perf",[sO]:"fire-perf-compat",[iO]:"fire-rc",[oO]:"fire-rc-compat",[aO]:"fire-gcs",[lO]:"fire-gcs-compat",[uO]:"fire-fst",[hO]:"fire-fst-compat",[cO]:"fire-vertex","fire-js":"fire-js",[dO]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dh=new Map,mO=new Map,Im=new Map;function t0(t,e){try{t.container.addComponent(e)}catch(n){jr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ai(t){const e=t.name;if(Im.has(e))return jr.debug(`There were multiple attempts to register component ${e}.`),!1;Im.set(e,t);for(const n of Dh.values())t0(n,t);for(const n of mO.values())t0(n,t);return!0}function Pd(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Jn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gO={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Vs=new yu("app","Firebase",gO);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yO{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new qs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Vs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qi=fO;function fR(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Rm,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Vs.create("bad-app-name",{appName:String(s)});if(n||(n=lR()),!n)throw Vs.create("no-options");const i=Dh.get(s);if(i){if(Lh(n,i.options)&&Lh(r,i.config))return i;throw Vs.create("duplicate-app",{appName:s})}const o=new SN(s);for(const l of Im.values())o.addComponent(l);const a=new yO(n,r,o);return Dh.set(s,a),a}function wy(t=Rm){const e=Dh.get(t);if(!e&&t===Rm&&lR())return fR();if(!e)throw Vs.create("no-app",{appName:t});return e}function tr(t,e,n){var r;let s=(r=pO[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),jr.warn(a.join(" "));return}Ai(new qs(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vO="firebase-heartbeat-database",_O=1,Wl="firebase-heartbeat-store";let sp=null;function pR(){return sp||(sp=MN(vO,_O,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Wl)}catch(n){console.warn(n)}}}}).catch(t=>{throw Vs.create("idb-open",{originalErrorMessage:t.message})})),sp}async function wO(t){try{const n=(await pR()).transaction(Wl),r=await n.objectStore(Wl).get(mR(t));return await n.done,r}catch(e){if(e instanceof cr)jr.warn(e.message);else{const n=Vs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});jr.warn(n.message)}}}async function n0(t,e){try{const r=(await pR()).transaction(Wl,"readwrite");await r.objectStore(Wl).put(e,mR(t)),await r.done}catch(n){if(n instanceof cr)jr.warn(n.message);else{const r=Vs.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});jr.warn(r.message)}}}function mR(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EO=1024,TO=30*24*60*60*1e3;class SO{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new RO(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=r0();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=TO}),this._storage.overwrite(this._heartbeatsCache))}catch(r){jr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=r0(),{heartbeatsToSend:r,unsentEntries:s}=xO(this._heartbeatsCache.heartbeats),i=Oh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return jr.warn(n),""}}}function r0(){return new Date().toISOString().substring(0,10)}function xO(t,e=EO){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),s0(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),s0(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class RO{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return hN()?dN().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await wO(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return n0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return n0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function s0(t){return Oh(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IO(t){Ai(new qs("platform-logger",e=>new UN(e),"PRIVATE")),Ai(new qs("heartbeat",e=>new SO(e),"PRIVATE")),tr(xm,e0,t),tr(xm,e0,"esm2017"),tr("fire-js","")}IO("");var bO="firebase",kO="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */tr(bO,kO,"app");function Ey(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function gR(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const CO=gR,yR=new yu("auth","Firebase",gR());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mh=new vy("@firebase/auth");function AO(t,...e){Mh.logLevel<=ve.WARN&&Mh.warn(`Auth (${qi}): ${t}`,...e)}function zc(t,...e){Mh.logLevel<=ve.ERROR&&Mh.error(`Auth (${qi}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function In(t,...e){throw Ty(t,...e)}function nr(t,...e){return Ty(t,...e)}function vR(t,e,n){const r=Object.assign(Object.assign({},CO()),{[e]:n});return new yu("auth","Firebase",r).create(e,{appName:t.name})}function Cr(t){return vR(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ty(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return yR.create(t,...e)}function Z(t,e,...n){if(!t)throw Ty(e,...n)}function Rr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw zc(e),new Error(e)}function Ur(t,e){t||Rr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bm(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function PO(){return i0()==="http:"||i0()==="https:"}function i0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NO(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(PO()||aN()||"connection"in navigator)?navigator.onLine:!0}function OO(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _u{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ur(n>e,"Short delay should be less than long delay!"),this.isMobile=sN()||lN()}get(){return NO()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sy(t,e){Ur(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _R{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Rr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Rr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Rr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LO={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DO=new _u(3e4,6e4);function hr(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Bn(t,e,n,r,s={}){return wR(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=vu(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},i);return oN()||(c.referrerPolicy="no-referrer"),_R.fetch()(ER(t,t.config.apiHost,n,a),c)})}async function wR(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},LO),e);try{const s=new VO(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw vc(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw vc(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw vc(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw vc(t,"user-disabled",o);const h=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw vR(t,h,c);In(t,h)}}catch(s){if(s instanceof cr)throw s;In(t,"network-request-failed",{message:String(s)})}}async function wu(t,e,n,r,s={}){const i=await Bn(t,e,n,r,s);return"mfaPendingCredential"in i&&In(t,"multi-factor-auth-required",{_serverResponse:i}),i}function ER(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?Sy(t.config,s):`${t.config.apiScheme}://${s}`}function MO(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class VO{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(nr(this.auth,"network-request-failed")),DO.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function vc(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=nr(t,e,r);return s.customData._tokenResponse=n,s}function o0(t){return t!==void 0&&t.enterprise!==void 0}class jO{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return MO(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function UO(t,e){return Bn(t,"GET","/v2/recaptchaConfig",hr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FO(t,e){return Bn(t,"POST","/v1/accounts:delete",e)}async function TR(t,e){return Bn(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _l(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function BO(t,e=!1){const n=qe(t),r=await n.getIdToken(e),s=xy(r);Z(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:_l(ip(s.auth_time)),issuedAtTime:_l(ip(s.iat)),expirationTime:_l(ip(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function ip(t){return Number(t)*1e3}function xy(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return zc("JWT malformed, contained fewer than 3 sections"),null;try{const s=iR(n);return s?JSON.parse(s):(zc("Failed to decode base64 JWT payload"),null)}catch(s){return zc("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function a0(t){const e=xy(t);return Z(e,"internal-error"),Z(typeof e.exp<"u","internal-error"),Z(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yo(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof cr&&$O(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function $O({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zO{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class km{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=_l(this.lastLoginAt),this.creationTime=_l(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vh(t){var e;const n=t.auth,r=await t.getIdToken(),s=await Yo(t,TR(n,{idToken:r}));Z(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?SR(i.providerUserInfo):[],a=HO(t.providerData,o),l=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),h=l?c:!1,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new km(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(t,f)}async function qO(t){const e=qe(t);await Vh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function HO(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function SR(t){return t.map(e=>{var{providerId:n}=e,r=Ey(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WO(t,e){const n=await wR(t,{},async()=>{const r=vu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=ER(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",_R.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function KO(t,e){return Bn(t,"POST","/v2/accounts:revokeToken",hr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Z(e.idToken,"internal-error"),Z(typeof e.idToken<"u","internal-error"),Z(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):a0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Z(e.length!==0,"internal-error");const n=a0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Z(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await WO(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Io;return r&&(Z(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(Z(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(Z(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Io,this.toJSON())}_performRefresh(){return Rr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zr(t,e){Z(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Ir{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=Ey(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new zO(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new km(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Yo(this,this.stsTokenManager.getToken(this.auth,e));return Z(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return BO(this,e)}reload(){return qO(this)}_assign(e){this!==e&&(Z(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Ir(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Z(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Vh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Jn(this.auth.app))return Promise.reject(Cr(this.auth));const e=await this.getIdToken();return await Yo(this,FO(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,a,l,c,h;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,p=(s=n.email)!==null&&s!==void 0?s:void 0,y=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,w=(o=n.photoURL)!==null&&o!==void 0?o:void 0,b=(a=n.tenantId)!==null&&a!==void 0?a:void 0,R=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,T=(c=n.createdAt)!==null&&c!==void 0?c:void 0,v=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:x,emailVerified:C,isAnonymous:M,providerData:U,stsTokenManager:I}=n;Z(x&&I,e,"internal-error");const _=Io.fromJSON(this.name,I);Z(typeof x=="string",e,"internal-error"),Zr(f,e.name),Zr(p,e.name),Z(typeof C=="boolean",e,"internal-error"),Z(typeof M=="boolean",e,"internal-error"),Zr(y,e.name),Zr(w,e.name),Zr(b,e.name),Zr(R,e.name),Zr(T,e.name),Zr(v,e.name);const S=new Ir({uid:x,auth:e,email:p,emailVerified:C,displayName:f,isAnonymous:M,photoURL:w,phoneNumber:y,tenantId:b,stsTokenManager:_,createdAt:T,lastLoginAt:v});return U&&Array.isArray(U)&&(S.providerData=U.map(k=>Object.assign({},k))),R&&(S._redirectEventId=R),S}static async _fromIdTokenResponse(e,n,r=!1){const s=new Io;s.updateFromServerResponse(n);const i=new Ir({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Vh(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];Z(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?SR(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),a=new Io;a.updateFromIdToken(r);const l=new Ir({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new km(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l0=new Map;function br(t){Ur(t instanceof Function,"Expected a class definition");let e=l0.get(t);return e?(Ur(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,l0.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xR{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}xR.type="NONE";const u0=xR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qc(t,e,n){return`firebase:${t}:${e}:${n}`}class bo{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=qc(this.userKey,s.apiKey,i),this.fullPersistenceKey=qc("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Ir._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new bo(br(u0),e,r);const s=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||br(u0);const o=qc(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const h=await c._get(o);if(h){const f=Ir._fromJSON(e,h);c!==i&&(a=f),i=c;break}}catch{}const l=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new bo(i,e,r):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==i)try{await c._remove(o)}catch{}})),new bo(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c0(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(kR(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(RR(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(AR(e))return"Blackberry";if(PR(e))return"Webos";if(IR(e))return"Safari";if((e.includes("chrome/")||bR(e))&&!e.includes("edge/"))return"Chrome";if(CR(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function RR(t=Lt()){return/firefox\//i.test(t)}function IR(t=Lt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function bR(t=Lt()){return/crios\//i.test(t)}function kR(t=Lt()){return/iemobile/i.test(t)}function CR(t=Lt()){return/android/i.test(t)}function AR(t=Lt()){return/blackberry/i.test(t)}function PR(t=Lt()){return/webos/i.test(t)}function Ry(t=Lt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function QO(t=Lt()){var e;return Ry(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function GO(){return uN()&&document.documentMode===10}function NR(t=Lt()){return Ry(t)||CR(t)||PR(t)||AR(t)||/windows phone/i.test(t)||kR(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OR(t,e=[]){let n;switch(t){case"Browser":n=c0(Lt());break;case"Worker":n=`${c0(Lt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${qi}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JO{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XO(t,e={}){return Bn(t,"GET","/v2/passwordPolicy",hr(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YO=6;class ZO{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:YO,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsLowercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(i=l.containsUppercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e2{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new h0(this),this.idTokenSubscription=new h0(this),this.beforeStateQueue=new JO(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=yR,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=br(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await bo.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await TR(this,{idToken:e}),r=await Ir._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Jn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=s==null?void 0:s._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(s=l.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Z(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Vh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=OO()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Jn(this.app))return Promise.reject(Cr(this));const n=e?qe(e):null;return n&&Z(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Z(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Jn(this.app)?Promise.reject(Cr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Jn(this.app)?Promise.reject(Cr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(br(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await XO(this),n=new ZO(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new yu("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await KO(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&br(e)||this._popupRedirectResolver;Z(n,this,"argument-error"),this.redirectPersistenceManager=await bo.create(this,[br(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Z(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Z(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=OR(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&AO(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Qr(t){return qe(t)}class h0{constructor(e){this.auth=e,this.observer=null,this.addObserver=yN(n=>this.observer=n)}get next(){return Z(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function t2(t){Nd=t}function LR(t){return Nd.loadJS(t)}function n2(){return Nd.recaptchaEnterpriseScript}function r2(){return Nd.gapiScript}function s2(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const i2="recaptcha-enterprise",o2="NO_RECAPTCHA";class a2{constructor(e){this.type=i2,this.auth=Qr(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{UO(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new jO(l);return i.tenantId==null?i._agentRecaptchaConfig=c:i._tenantRecaptchaConfigs[i.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function s(i,o,a){const l=window.grecaptcha;o0(l)?l.enterprise.ready(()=>{l.enterprise.execute(i,{action:e}).then(c=>{o(c)}).catch(()=>{o(o2)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((i,o)=>{r(this.auth).then(a=>{if(!n&&o0(window.grecaptcha))s(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=n2();l.length!==0&&(l+=a),LR(l).then(()=>{s(a,i,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function d0(t,e,n,r=!1){const s=new a2(t);let i;try{i=await s.verify(n)}catch{i=await s.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:i}):Object.assign(o,{captchaResponse:i}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function jh(t,e,n,r){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await d0(t,e,n,n==="getOobCode");return r(t,i)}else return r(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await d0(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l2(t,e){const n=Pd(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Lh(i,e??{}))return s;In(s,"already-initialized")}return n.initialize({options:e})}function u2(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(br);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function c2(t,e,n){const r=Qr(t);Z(r._canInitEmulator,r,"emulator-config-failed"),Z(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=DR(e),{host:o,port:a}=h2(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${i}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),d2()}function DR(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function h2(t){const e=DR(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:f0(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:f0(o)}}}function f0(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function d2(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iy{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Rr("not implemented")}_getIdTokenResponse(e){return Rr("not implemented")}_linkToIdToken(e,n){return Rr("not implemented")}_getReauthenticationResolver(e){return Rr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MR(t,e){return Bn(t,"POST","/v1/accounts:resetPassword",hr(t,e))}async function f2(t,e){return Bn(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function p2(t,e){return wu(t,"POST","/v1/accounts:signInWithPassword",hr(t,e))}async function m2(t,e){return Bn(t,"POST","/v1/accounts:sendOobCode",hr(t,e))}async function g2(t,e){return m2(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function y2(t,e){return wu(t,"POST","/v1/accounts:signInWithEmailLink",hr(t,e))}async function v2(t,e){return wu(t,"POST","/v1/accounts:signInWithEmailLink",hr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl extends Iy{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Kl(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Kl(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return jh(e,n,"signInWithPassword",p2);case"emailLink":return y2(e,{email:this._email,oobCode:this._password});default:In(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return jh(e,r,"signUpPassword",f2);case"emailLink":return v2(e,{idToken:n,email:this._email,oobCode:this._password});default:In(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ko(t,e){return wu(t,"POST","/v1/accounts:signInWithIdp",hr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _2="http://localhost";class Pi extends Iy{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Pi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):In("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=Ey(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new Pi(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return ko(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,ko(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ko(e,n)}buildRequest(){const e={requestUri:_2,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=vu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w2(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function E2(t){const e=nl(rl(t)).link,n=e?nl(rl(e)).deep_link_id:null,r=nl(rl(t)).deep_link_id;return(r?nl(rl(r)).link:null)||r||n||e||t}class by{constructor(e){var n,r,s,i,o,a;const l=nl(rl(e)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,h=(r=l.oobCode)!==null&&r!==void 0?r:null,f=w2((s=l.mode)!==null&&s!==void 0?s:null);Z(c&&h&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=h,this.continueUrl=(i=l.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=E2(e);try{return new by(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ma{constructor(){this.providerId=ma.PROVIDER_ID}static credential(e,n){return Kl._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=by.parseLink(n);return Z(r,"argument-error"),Kl._fromEmailAndCode(e,r.code,r.tenantId)}}ma.PROVIDER_ID="password";ma.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ma.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VR{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eu extends VR{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as extends Eu{constructor(){super("facebook.com")}static credential(e){return Pi._fromParams({providerId:as.PROVIDER_ID,signInMethod:as.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return as.credentialFromTaggedObject(e)}static credentialFromError(e){return as.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return as.credential(e.oauthAccessToken)}catch{return null}}}as.FACEBOOK_SIGN_IN_METHOD="facebook.com";as.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls extends Eu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Pi._fromParams({providerId:ls.PROVIDER_ID,signInMethod:ls.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ls.credentialFromTaggedObject(e)}static credentialFromError(e){return ls.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return ls.credential(n,r)}catch{return null}}}ls.GOOGLE_SIGN_IN_METHOD="google.com";ls.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us extends Eu{constructor(){super("github.com")}static credential(e){return Pi._fromParams({providerId:us.PROVIDER_ID,signInMethod:us.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return us.credentialFromTaggedObject(e)}static credentialFromError(e){return us.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return us.credential(e.oauthAccessToken)}catch{return null}}}us.GITHUB_SIGN_IN_METHOD="github.com";us.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs extends Eu{constructor(){super("twitter.com")}static credential(e,n){return Pi._fromParams({providerId:cs.PROVIDER_ID,signInMethod:cs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return cs.credentialFromTaggedObject(e)}static credentialFromError(e){return cs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return cs.credential(n,r)}catch{return null}}}cs.TWITTER_SIGN_IN_METHOD="twitter.com";cs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T2(t,e){return wu(t,"POST","/v1/accounts:signUp",hr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Ir._fromIdTokenResponse(e,r,s),o=p0(r);return new Ni({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=p0(r);return new Ni({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function p0(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uh extends cr{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Uh.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Uh(e,n,r,s)}}function jR(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Uh._fromErrorAndOperation(t,i,e,r):i})}async function S2(t,e,n=!1){const r=await Yo(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ni._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function x2(t,e,n=!1){const{auth:r}=t;if(Jn(r.app))return Promise.reject(Cr(r));const s="reauthenticate";try{const i=await Yo(t,jR(r,s,e,t),n);Z(i.idToken,r,"internal-error");const o=xy(i.idToken);Z(o,r,"internal-error");const{sub:a}=o;return Z(t.uid===a,r,"user-mismatch"),Ni._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&In(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UR(t,e,n=!1){if(Jn(t.app))return Promise.reject(Cr(t));const r="signIn",s=await jR(t,r,e),i=await Ni._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function R2(t,e){return UR(Qr(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ky{constructor(e,n){this.factorId=e,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}static _fromServerResponse(e,n){return"phoneInfo"in n?Cy._fromServerResponse(e,n):"totpInfo"in n?Ay._fromServerResponse(e,n):In(e,"internal-error")}}class Cy extends ky{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,n){return new Cy(n)}}class Ay extends ky{constructor(e){super("totp",e)}static _fromServerResponse(e,n){return new Ay(n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I2(t,e,n){var r;Z(((r=n.url)===null||r===void 0?void 0:r.length)>0,t,"invalid-continue-uri"),Z(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Z(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(Z(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Py(t){const e=Qr(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function b2(t,e,n){const r=Qr(t),s={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};n&&I2(r,s,n),await jh(r,s,"getOobCode",g2)}async function k2(t,e,n){await MR(qe(t),{oobCode:e,newPassword:n}).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Py(t),r})}async function C2(t,e){const n=qe(t),r=await MR(n,{oobCode:e}),s=r.requestType;switch(Z(s,n,"internal-error"),s){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Z(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Z(r.mfaInfo,n,"internal-error");default:Z(r.email,n,"internal-error")}let i=null;return r.mfaInfo&&(i=ky._fromServerResponse(Qr(n),r.mfaInfo)),{data:{email:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.newEmail:r.email)||null,previousEmail:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.email:r.newEmail)||null,multiFactorInfo:i},operation:s}}async function A2(t,e){const{data:n}=await C2(qe(t),e);return n.email}async function P2(t,e,n){if(Jn(t.app))return Promise.reject(Cr(t));const r=Qr(t),o=await jh(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",T2).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&Py(t),l}),a=await Ni._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function N2(t,e,n){return Jn(t.app)?Promise.reject(Cr(t)):R2(qe(t),ma.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Py(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function O2(t,e){return Bn(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function L2(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=qe(t),i={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await Yo(r,O2(r.auth,i));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D2(t,e){return qe(t).setPersistence(e)}function M2(t,e,n,r){return qe(t).onIdTokenChanged(e,n,r)}function V2(t,e,n){return qe(t).beforeAuthStateChanged(e,n)}function j2(t,e,n,r){return qe(t).onAuthStateChanged(e,n,r)}function U2(t){return qe(t).signOut()}const Fh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FR{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Fh,"1"),this.storage.removeItem(Fh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F2=1e3,B2=10;class BR extends FR{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=NR(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);GO()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,B2):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},F2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}BR.type="LOCAL";const $R=BR;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zR extends FR{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}zR.type="SESSION";const qR=zR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $2(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Od{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Od(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async c=>c(n.origin,i)),l=await $2(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Od.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ny(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z2{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,l)=>{const c=Ny("",20);s.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(f){const p=f;if(p.data.eventId===c)switch(p.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(p.data.response);break;default:clearTimeout(h),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rr(){return window}function q2(t){rr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HR(){return typeof rr().WorkerGlobalScope<"u"&&typeof rr().importScripts=="function"}async function H2(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function W2(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function K2(){return HR()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WR="firebaseLocalStorageDb",Q2=1,Bh="firebaseLocalStorage",KR="fbase_key";class Tu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Ld(t,e){return t.transaction([Bh],e?"readwrite":"readonly").objectStore(Bh)}function G2(){const t=indexedDB.deleteDatabase(WR);return new Tu(t).toPromise()}function Cm(){const t=indexedDB.open(WR,Q2);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Bh,{keyPath:KR})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Bh)?e(r):(r.close(),await G2(),e(await Cm()))})})}async function m0(t,e,n){const r=Ld(t,!0).put({[KR]:e,value:n});return new Tu(r).toPromise()}async function J2(t,e){const n=Ld(t,!1).get(e),r=await new Tu(n).toPromise();return r===void 0?null:r.value}function g0(t,e){const n=Ld(t,!0).delete(e);return new Tu(n).toPromise()}const X2=800,Y2=3;class QR{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Cm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>Y2)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return HR()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Od._getInstance(K2()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await H2(),!this.activeServiceWorker)return;this.sender=new z2(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||W2()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Cm();return await m0(e,Fh,"1"),await g0(e,Fh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>m0(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>J2(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>g0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Ld(s,!1).getAll();return new Tu(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),X2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}QR.type="LOCAL";const Z2=QR;new _u(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eL(t,e){return e?br(e):(Z(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oy extends Iy{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ko(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ko(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ko(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function tL(t){return UR(t.auth,new Oy(t),t.bypassAuthState)}function nL(t){const{auth:e,user:n}=t;return Z(n,e,"internal-error"),x2(n,new Oy(t),t.bypassAuthState)}async function rL(t){const{auth:e,user:n}=t;return Z(n,e,"internal-error"),S2(n,new Oy(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GR{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return tL;case"linkViaPopup":case"linkViaRedirect":return rL;case"reauthViaPopup":case"reauthViaRedirect":return nL;default:In(this.auth,"internal-error")}}resolve(e){Ur(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ur(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sL=new _u(2e3,1e4);class _o extends GR{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,_o.currentPopupAction&&_o.currentPopupAction.cancel(),_o.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Z(e,this.auth,"internal-error"),e}async onExecution(){Ur(this.filter.length===1,"Popup operations only handle one event");const e=Ny();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(nr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(nr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,_o.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(nr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,sL.get())};e()}}_o.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iL="pendingRedirect",Hc=new Map;class oL extends GR{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Hc.get(this.auth._key());if(!e){try{const r=await aL(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Hc.set(this.auth._key(),e)}return this.bypassAuthState||Hc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function aL(t,e){const n=cL(e),r=uL(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function lL(t,e){Hc.set(t._key(),e)}function uL(t){return br(t._redirectPersistence)}function cL(t){return qc(iL,t.config.apiKey,t.name)}async function hL(t,e,n=!1){if(Jn(t.app))return Promise.reject(Cr(t));const r=Qr(t),s=eL(r,e),o=await new oL(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dL=10*60*1e3;class fL{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!pL(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!JR(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(nr(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=dL&&this.cachedEventUids.clear(),this.cachedEventUids.has(y0(e))}saveEventToCache(e){this.cachedEventUids.add(y0(e)),this.lastProcessedEventTime=Date.now()}}function y0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function JR({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function pL(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return JR(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mL(t,e={}){return Bn(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gL=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,yL=/^https?/;async function vL(t){if(t.config.emulator)return;const{authorizedDomains:e}=await mL(t);for(const n of e)try{if(_L(n))return}catch{}In(t,"unauthorized-domain")}function _L(t){const e=bm(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!yL.test(n))return!1;if(gL.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wL=new _u(3e4,6e4);function v0(){const t=rr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function EL(t){return new Promise((e,n)=>{var r,s,i;function o(){v0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{v0(),n(nr(t,"network-request-failed"))},timeout:wL.get()})}if(!((s=(r=rr().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=rr().gapi)===null||i===void 0)&&i.load)o();else{const a=s2("iframefcb");return rr()[a]=()=>{gapi.load?o():n(nr(t,"network-request-failed"))},LR(`${r2()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Wc=null,e})}let Wc=null;function TL(t){return Wc=Wc||EL(t),Wc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SL=new _u(5e3,15e3),xL="__/auth/iframe",RL="emulator/auth/iframe",IL={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},bL=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function kL(t){const e=t.config;Z(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Sy(e,RL):`https://${t.config.authDomain}/${xL}`,r={apiKey:e.apiKey,appName:t.name,v:qi},s=bL.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${vu(r).slice(1)}`}async function CL(t){const e=await TL(t),n=rr().gapi;return Z(n,t,"internal-error"),e.open({where:document.body,url:kL(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:IL,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=nr(t,"network-request-failed"),a=rr().setTimeout(()=>{i(o)},SL.get());function l(){rr().clearTimeout(a),s(r)}r.ping(l).then(l,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AL={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},PL=500,NL=600,OL="_blank",LL="http://localhost";class _0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function DL(t,e,n,r=PL,s=NL){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},AL),{width:r.toString(),height:s.toString(),top:i,left:o}),c=Lt().toLowerCase();n&&(a=bR(c)?OL:n),RR(c)&&(e=e||LL,l.scrollbars="yes");const h=Object.entries(l).reduce((p,[y,w])=>`${p}${y}=${w},`,"");if(QO(c)&&a!=="_self")return ML(e||"",a),new _0(null);const f=window.open(e||"",a,h);Z(f,t,"popup-blocked");try{f.focus()}catch{}return new _0(f)}function ML(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VL="__/auth/handler",jL="emulator/auth/handler",UL=encodeURIComponent("fac");async function w0(t,e,n,r,s,i){Z(t.config.authDomain,t,"auth-domain-config-required"),Z(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:qi,eventId:s};if(e instanceof VR){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",gN(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,f]of Object.entries({}))o[h]=f}if(e instanceof Eu){const h=e.getScopes().filter(f=>f!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await t._getAppCheckToken(),c=l?`#${UL}=${encodeURIComponent(l)}`:"";return`${FL(t)}?${vu(a).slice(1)}${c}`}function FL({config:t}){return t.emulator?Sy(t,jL):`https://${t.authDomain}/${VL}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const op="webStorageSupport";class BL{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=qR,this._completeRedirectFn=hL,this._overrideRedirectResult=lL}async _openPopup(e,n,r,s){var i;Ur((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await w0(e,n,r,bm(),s);return DL(e,o,Ny())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await w0(e,n,r,bm(),s);return q2(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Ur(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await CL(e),r=new fL(e);return n.register("authEvent",s=>(Z(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(op,{type:op},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[op];o!==void 0&&n(!!o),In(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=vL(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return NR()||IR()||Ry()}}const $L=BL;var E0="@firebase/auth",T0="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zL{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Z(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qL(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function HL(t){Ai(new qs("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Z(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:OR(t)},c=new e2(r,s,i,l);return u2(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ai(new qs("auth-internal",e=>{const n=Qr(e.getProvider("auth").getImmediate());return(r=>new zL(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),tr(E0,T0,qL(t)),tr(E0,T0,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WL=5*60,KL=uR("authIdTokenMaxAge")||WL;let S0=null;const QL=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>KL)return;const s=n==null?void 0:n.token;S0!==s&&(S0=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function GL(t=wy()){const e=Pd(t,"auth");if(e.isInitialized())return e.getImmediate();const n=l2(t,{popupRedirectResolver:$L,persistence:[Z2,$R,qR]}),r=uR("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=QL(i.toString());V2(n,o,()=>o(n.currentUser)),M2(n,a=>o(a))}}const s=oR("auth");return s&&c2(n,`http://${s}`),n}function JL(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}t2({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=nr("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",JL().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});HL("Browser");var x0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ti,XR;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,_){function S(){}S.prototype=_.prototype,I.D=_.prototype,I.prototype=new S,I.prototype.constructor=I,I.C=function(k,N,O){for(var A=Array(arguments.length-2),Ue=2;Ue<arguments.length;Ue++)A[Ue-2]=arguments[Ue];return _.prototype[N].apply(k,A)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(I,_,S){S||(S=0);var k=Array(16);if(typeof _=="string")for(var N=0;16>N;++N)k[N]=_.charCodeAt(S++)|_.charCodeAt(S++)<<8|_.charCodeAt(S++)<<16|_.charCodeAt(S++)<<24;else for(N=0;16>N;++N)k[N]=_[S++]|_[S++]<<8|_[S++]<<16|_[S++]<<24;_=I.g[0],S=I.g[1],N=I.g[2];var O=I.g[3],A=_+(O^S&(N^O))+k[0]+3614090360&4294967295;_=S+(A<<7&4294967295|A>>>25),A=O+(N^_&(S^N))+k[1]+3905402710&4294967295,O=_+(A<<12&4294967295|A>>>20),A=N+(S^O&(_^S))+k[2]+606105819&4294967295,N=O+(A<<17&4294967295|A>>>15),A=S+(_^N&(O^_))+k[3]+3250441966&4294967295,S=N+(A<<22&4294967295|A>>>10),A=_+(O^S&(N^O))+k[4]+4118548399&4294967295,_=S+(A<<7&4294967295|A>>>25),A=O+(N^_&(S^N))+k[5]+1200080426&4294967295,O=_+(A<<12&4294967295|A>>>20),A=N+(S^O&(_^S))+k[6]+2821735955&4294967295,N=O+(A<<17&4294967295|A>>>15),A=S+(_^N&(O^_))+k[7]+4249261313&4294967295,S=N+(A<<22&4294967295|A>>>10),A=_+(O^S&(N^O))+k[8]+1770035416&4294967295,_=S+(A<<7&4294967295|A>>>25),A=O+(N^_&(S^N))+k[9]+2336552879&4294967295,O=_+(A<<12&4294967295|A>>>20),A=N+(S^O&(_^S))+k[10]+4294925233&4294967295,N=O+(A<<17&4294967295|A>>>15),A=S+(_^N&(O^_))+k[11]+2304563134&4294967295,S=N+(A<<22&4294967295|A>>>10),A=_+(O^S&(N^O))+k[12]+1804603682&4294967295,_=S+(A<<7&4294967295|A>>>25),A=O+(N^_&(S^N))+k[13]+4254626195&4294967295,O=_+(A<<12&4294967295|A>>>20),A=N+(S^O&(_^S))+k[14]+2792965006&4294967295,N=O+(A<<17&4294967295|A>>>15),A=S+(_^N&(O^_))+k[15]+1236535329&4294967295,S=N+(A<<22&4294967295|A>>>10),A=_+(N^O&(S^N))+k[1]+4129170786&4294967295,_=S+(A<<5&4294967295|A>>>27),A=O+(S^N&(_^S))+k[6]+3225465664&4294967295,O=_+(A<<9&4294967295|A>>>23),A=N+(_^S&(O^_))+k[11]+643717713&4294967295,N=O+(A<<14&4294967295|A>>>18),A=S+(O^_&(N^O))+k[0]+3921069994&4294967295,S=N+(A<<20&4294967295|A>>>12),A=_+(N^O&(S^N))+k[5]+3593408605&4294967295,_=S+(A<<5&4294967295|A>>>27),A=O+(S^N&(_^S))+k[10]+38016083&4294967295,O=_+(A<<9&4294967295|A>>>23),A=N+(_^S&(O^_))+k[15]+3634488961&4294967295,N=O+(A<<14&4294967295|A>>>18),A=S+(O^_&(N^O))+k[4]+3889429448&4294967295,S=N+(A<<20&4294967295|A>>>12),A=_+(N^O&(S^N))+k[9]+568446438&4294967295,_=S+(A<<5&4294967295|A>>>27),A=O+(S^N&(_^S))+k[14]+3275163606&4294967295,O=_+(A<<9&4294967295|A>>>23),A=N+(_^S&(O^_))+k[3]+4107603335&4294967295,N=O+(A<<14&4294967295|A>>>18),A=S+(O^_&(N^O))+k[8]+1163531501&4294967295,S=N+(A<<20&4294967295|A>>>12),A=_+(N^O&(S^N))+k[13]+2850285829&4294967295,_=S+(A<<5&4294967295|A>>>27),A=O+(S^N&(_^S))+k[2]+4243563512&4294967295,O=_+(A<<9&4294967295|A>>>23),A=N+(_^S&(O^_))+k[7]+1735328473&4294967295,N=O+(A<<14&4294967295|A>>>18),A=S+(O^_&(N^O))+k[12]+2368359562&4294967295,S=N+(A<<20&4294967295|A>>>12),A=_+(S^N^O)+k[5]+4294588738&4294967295,_=S+(A<<4&4294967295|A>>>28),A=O+(_^S^N)+k[8]+2272392833&4294967295,O=_+(A<<11&4294967295|A>>>21),A=N+(O^_^S)+k[11]+1839030562&4294967295,N=O+(A<<16&4294967295|A>>>16),A=S+(N^O^_)+k[14]+4259657740&4294967295,S=N+(A<<23&4294967295|A>>>9),A=_+(S^N^O)+k[1]+2763975236&4294967295,_=S+(A<<4&4294967295|A>>>28),A=O+(_^S^N)+k[4]+1272893353&4294967295,O=_+(A<<11&4294967295|A>>>21),A=N+(O^_^S)+k[7]+4139469664&4294967295,N=O+(A<<16&4294967295|A>>>16),A=S+(N^O^_)+k[10]+3200236656&4294967295,S=N+(A<<23&4294967295|A>>>9),A=_+(S^N^O)+k[13]+681279174&4294967295,_=S+(A<<4&4294967295|A>>>28),A=O+(_^S^N)+k[0]+3936430074&4294967295,O=_+(A<<11&4294967295|A>>>21),A=N+(O^_^S)+k[3]+3572445317&4294967295,N=O+(A<<16&4294967295|A>>>16),A=S+(N^O^_)+k[6]+76029189&4294967295,S=N+(A<<23&4294967295|A>>>9),A=_+(S^N^O)+k[9]+3654602809&4294967295,_=S+(A<<4&4294967295|A>>>28),A=O+(_^S^N)+k[12]+3873151461&4294967295,O=_+(A<<11&4294967295|A>>>21),A=N+(O^_^S)+k[15]+530742520&4294967295,N=O+(A<<16&4294967295|A>>>16),A=S+(N^O^_)+k[2]+3299628645&4294967295,S=N+(A<<23&4294967295|A>>>9),A=_+(N^(S|~O))+k[0]+4096336452&4294967295,_=S+(A<<6&4294967295|A>>>26),A=O+(S^(_|~N))+k[7]+1126891415&4294967295,O=_+(A<<10&4294967295|A>>>22),A=N+(_^(O|~S))+k[14]+2878612391&4294967295,N=O+(A<<15&4294967295|A>>>17),A=S+(O^(N|~_))+k[5]+4237533241&4294967295,S=N+(A<<21&4294967295|A>>>11),A=_+(N^(S|~O))+k[12]+1700485571&4294967295,_=S+(A<<6&4294967295|A>>>26),A=O+(S^(_|~N))+k[3]+2399980690&4294967295,O=_+(A<<10&4294967295|A>>>22),A=N+(_^(O|~S))+k[10]+4293915773&4294967295,N=O+(A<<15&4294967295|A>>>17),A=S+(O^(N|~_))+k[1]+2240044497&4294967295,S=N+(A<<21&4294967295|A>>>11),A=_+(N^(S|~O))+k[8]+1873313359&4294967295,_=S+(A<<6&4294967295|A>>>26),A=O+(S^(_|~N))+k[15]+4264355552&4294967295,O=_+(A<<10&4294967295|A>>>22),A=N+(_^(O|~S))+k[6]+2734768916&4294967295,N=O+(A<<15&4294967295|A>>>17),A=S+(O^(N|~_))+k[13]+1309151649&4294967295,S=N+(A<<21&4294967295|A>>>11),A=_+(N^(S|~O))+k[4]+4149444226&4294967295,_=S+(A<<6&4294967295|A>>>26),A=O+(S^(_|~N))+k[11]+3174756917&4294967295,O=_+(A<<10&4294967295|A>>>22),A=N+(_^(O|~S))+k[2]+718787259&4294967295,N=O+(A<<15&4294967295|A>>>17),A=S+(O^(N|~_))+k[9]+3951481745&4294967295,I.g[0]=I.g[0]+_&4294967295,I.g[1]=I.g[1]+(N+(A<<21&4294967295|A>>>11))&4294967295,I.g[2]=I.g[2]+N&4294967295,I.g[3]=I.g[3]+O&4294967295}r.prototype.u=function(I,_){_===void 0&&(_=I.length);for(var S=_-this.blockSize,k=this.B,N=this.h,O=0;O<_;){if(N==0)for(;O<=S;)s(this,I,O),O+=this.blockSize;if(typeof I=="string"){for(;O<_;)if(k[N++]=I.charCodeAt(O++),N==this.blockSize){s(this,k),N=0;break}}else for(;O<_;)if(k[N++]=I[O++],N==this.blockSize){s(this,k),N=0;break}}this.h=N,this.o+=_},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var _=1;_<I.length-8;++_)I[_]=0;var S=8*this.o;for(_=I.length-8;_<I.length;++_)I[_]=S&255,S/=256;for(this.u(I),I=Array(16),_=S=0;4>_;++_)for(var k=0;32>k;k+=8)I[S++]=this.g[_]>>>k&255;return I};function i(I,_){var S=a;return Object.prototype.hasOwnProperty.call(S,I)?S[I]:S[I]=_(I)}function o(I,_){this.h=_;for(var S=[],k=!0,N=I.length-1;0<=N;N--){var O=I[N]|0;k&&O==_||(S[N]=O,k=!1)}this.g=S}var a={};function l(I){return-128<=I&&128>I?i(I,function(_){return new o([_|0],0>_?-1:0)}):new o([I|0],0>I?-1:0)}function c(I){if(isNaN(I)||!isFinite(I))return f;if(0>I)return R(c(-I));for(var _=[],S=1,k=0;I>=S;k++)_[k]=I/S|0,S*=4294967296;return new o(_,0)}function h(I,_){if(I.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(I.charAt(0)=="-")return R(h(I.substring(1),_));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var S=c(Math.pow(_,8)),k=f,N=0;N<I.length;N+=8){var O=Math.min(8,I.length-N),A=parseInt(I.substring(N,N+O),_);8>O?(O=c(Math.pow(_,O)),k=k.j(O).add(c(A))):(k=k.j(S),k=k.add(c(A)))}return k}var f=l(0),p=l(1),y=l(16777216);t=o.prototype,t.m=function(){if(b(this))return-R(this).m();for(var I=0,_=1,S=0;S<this.g.length;S++){var k=this.i(S);I+=(0<=k?k:4294967296+k)*_,_*=4294967296}return I},t.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(w(this))return"0";if(b(this))return"-"+R(this).toString(I);for(var _=c(Math.pow(I,6)),S=this,k="";;){var N=C(S,_).g;S=T(S,N.j(_));var O=((0<S.g.length?S.g[0]:S.h)>>>0).toString(I);if(S=N,w(S))return O+k;for(;6>O.length;)O="0"+O;k=O+k}},t.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function w(I){if(I.h!=0)return!1;for(var _=0;_<I.g.length;_++)if(I.g[_]!=0)return!1;return!0}function b(I){return I.h==-1}t.l=function(I){return I=T(this,I),b(I)?-1:w(I)?0:1};function R(I){for(var _=I.g.length,S=[],k=0;k<_;k++)S[k]=~I.g[k];return new o(S,~I.h).add(p)}t.abs=function(){return b(this)?R(this):this},t.add=function(I){for(var _=Math.max(this.g.length,I.g.length),S=[],k=0,N=0;N<=_;N++){var O=k+(this.i(N)&65535)+(I.i(N)&65535),A=(O>>>16)+(this.i(N)>>>16)+(I.i(N)>>>16);k=A>>>16,O&=65535,A&=65535,S[N]=A<<16|O}return new o(S,S[S.length-1]&-2147483648?-1:0)};function T(I,_){return I.add(R(_))}t.j=function(I){if(w(this)||w(I))return f;if(b(this))return b(I)?R(this).j(R(I)):R(R(this).j(I));if(b(I))return R(this.j(R(I)));if(0>this.l(y)&&0>I.l(y))return c(this.m()*I.m());for(var _=this.g.length+I.g.length,S=[],k=0;k<2*_;k++)S[k]=0;for(k=0;k<this.g.length;k++)for(var N=0;N<I.g.length;N++){var O=this.i(k)>>>16,A=this.i(k)&65535,Ue=I.i(N)>>>16,se=I.i(N)&65535;S[2*k+2*N]+=A*se,v(S,2*k+2*N),S[2*k+2*N+1]+=O*se,v(S,2*k+2*N+1),S[2*k+2*N+1]+=A*Ue,v(S,2*k+2*N+1),S[2*k+2*N+2]+=O*Ue,v(S,2*k+2*N+2)}for(k=0;k<_;k++)S[k]=S[2*k+1]<<16|S[2*k];for(k=_;k<2*_;k++)S[k]=0;return new o(S,0)};function v(I,_){for(;(I[_]&65535)!=I[_];)I[_+1]+=I[_]>>>16,I[_]&=65535,_++}function x(I,_){this.g=I,this.h=_}function C(I,_){if(w(_))throw Error("division by zero");if(w(I))return new x(f,f);if(b(I))return _=C(R(I),_),new x(R(_.g),R(_.h));if(b(_))return _=C(I,R(_)),new x(R(_.g),_.h);if(30<I.g.length){if(b(I)||b(_))throw Error("slowDivide_ only works with positive integers.");for(var S=p,k=_;0>=k.l(I);)S=M(S),k=M(k);var N=U(S,1),O=U(k,1);for(k=U(k,2),S=U(S,2);!w(k);){var A=O.add(k);0>=A.l(I)&&(N=N.add(S),O=A),k=U(k,1),S=U(S,1)}return _=T(I,N.j(_)),new x(N,_)}for(N=f;0<=I.l(_);){for(S=Math.max(1,Math.floor(I.m()/_.m())),k=Math.ceil(Math.log(S)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),O=c(S),A=O.j(_);b(A)||0<A.l(I);)S-=k,O=c(S),A=O.j(_);w(O)&&(O=p),N=N.add(O),I=T(I,A)}return new x(N,I)}t.A=function(I){return C(this,I).h},t.and=function(I){for(var _=Math.max(this.g.length,I.g.length),S=[],k=0;k<_;k++)S[k]=this.i(k)&I.i(k);return new o(S,this.h&I.h)},t.or=function(I){for(var _=Math.max(this.g.length,I.g.length),S=[],k=0;k<_;k++)S[k]=this.i(k)|I.i(k);return new o(S,this.h|I.h)},t.xor=function(I){for(var _=Math.max(this.g.length,I.g.length),S=[],k=0;k<_;k++)S[k]=this.i(k)^I.i(k);return new o(S,this.h^I.h)};function M(I){for(var _=I.g.length+1,S=[],k=0;k<_;k++)S[k]=I.i(k)<<1|I.i(k-1)>>>31;return new o(S,I.h)}function U(I,_){var S=_>>5;_%=32;for(var k=I.g.length-S,N=[],O=0;O<k;O++)N[O]=0<_?I.i(O+S)>>>_|I.i(O+S+1)<<32-_:I.i(O+S);return new o(N,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,XR=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=h,Ti=o}).apply(typeof x0<"u"?x0:typeof self<"u"?self:typeof window<"u"?window:{});var _c=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var YR,sl,ZR,Kc,Am,eI,tI,nI;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,d,m){return u==Array.prototype||u==Object.prototype||(u[d]=m.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof _c=="object"&&_c];for(var d=0;d<u.length;++d){var m=u[d];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var r=n(this);function s(u,d){if(d)e:{var m=r;u=u.split(".");for(var E=0;E<u.length-1;E++){var D=u[E];if(!(D in m))break e;m=m[D]}u=u[u.length-1],E=m[u],d=d(E),d!=E&&d!=null&&e(m,u,{configurable:!0,writable:!0,value:d})}}function i(u,d){u instanceof String&&(u+="");var m=0,E=!1,D={next:function(){if(!E&&m<u.length){var j=m++;return{value:d(j,u[j]),done:!1}}return E=!0,{done:!0,value:void 0}}};return D[Symbol.iterator]=function(){return D},D}s("Array.prototype.values",function(u){return u||function(){return i(this,function(d,m){return m})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(u){var d=typeof u;return d=d!="object"?d:u?Array.isArray(u)?"array":d:"null",d=="array"||d=="object"&&typeof u.length=="number"}function c(u){var d=typeof u;return d=="object"&&u!=null||d=="function"}function h(u,d,m){return u.call.apply(u.bind,arguments)}function f(u,d,m){if(!u)throw Error();if(2<arguments.length){var E=Array.prototype.slice.call(arguments,2);return function(){var D=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(D,E),u.apply(d,D)}}return function(){return u.apply(d,arguments)}}function p(u,d,m){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:f,p.apply(null,arguments)}function y(u,d){var m=Array.prototype.slice.call(arguments,1);return function(){var E=m.slice();return E.push.apply(E,arguments),u.apply(this,E)}}function w(u,d){function m(){}m.prototype=d.prototype,u.aa=d.prototype,u.prototype=new m,u.prototype.constructor=u,u.Qb=function(E,D,j){for(var H=Array(arguments.length-2),Ae=2;Ae<arguments.length;Ae++)H[Ae-2]=arguments[Ae];return d.prototype[D].apply(E,H)}}function b(u){const d=u.length;if(0<d){const m=Array(d);for(let E=0;E<d;E++)m[E]=u[E];return m}return[]}function R(u,d){for(let m=1;m<arguments.length;m++){const E=arguments[m];if(l(E)){const D=u.length||0,j=E.length||0;u.length=D+j;for(let H=0;H<j;H++)u[D+H]=E[H]}else u.push(E)}}class T{constructor(d,m){this.i=d,this.j=m,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function v(u){return/^[\s\xa0]*$/.test(u)}function x(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function C(u){return C[" "](u),u}C[" "]=function(){};var M=x().indexOf("Gecko")!=-1&&!(x().toLowerCase().indexOf("webkit")!=-1&&x().indexOf("Edge")==-1)&&!(x().indexOf("Trident")!=-1||x().indexOf("MSIE")!=-1)&&x().indexOf("Edge")==-1;function U(u,d,m){for(const E in u)d.call(m,u[E],E,u)}function I(u,d){for(const m in u)d.call(void 0,u[m],m,u)}function _(u){const d={};for(const m in u)d[m]=u[m];return d}const S="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(u,d){let m,E;for(let D=1;D<arguments.length;D++){E=arguments[D];for(m in E)u[m]=E[m];for(let j=0;j<S.length;j++)m=S[j],Object.prototype.hasOwnProperty.call(E,m)&&(u[m]=E[m])}}function N(u){var d=1;u=u.split(":");const m=[];for(;0<d&&u.length;)m.push(u.shift()),d--;return u.length&&m.push(u.join(":")),m}function O(u){a.setTimeout(()=>{throw u},0)}function A(){var u=Y;let d=null;return u.g&&(d=u.g,u.g=u.g.next,u.g||(u.h=null),d.next=null),d}class Ue{constructor(){this.h=this.g=null}add(d,m){const E=se.get();E.set(d,m),this.h?this.h.next=E:this.g=E,this.h=E}}var se=new T(()=>new Ve,u=>u.reset());class Ve{constructor(){this.next=this.g=this.h=null}set(d,m){this.h=d,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let Mt,q=!1,Y=new Ue,re=()=>{const u=a.Promise.resolve(void 0);Mt=()=>{u.then(Pe)}};var Pe=()=>{for(var u;u=A();){try{u.h.call(u.g)}catch(m){O(m)}var d=se;d.j(u),100>d.h&&(d.h++,u.next=d.g,d.g=u)}q=!1};function Ce(){this.s=this.s,this.C=this.C}Ce.prototype.s=!1,Ce.prototype.ma=function(){this.s||(this.s=!0,this.N())},Ce.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Xe(u,d){this.type=u,this.g=this.target=d,this.defaultPrevented=!1}Xe.prototype.h=function(){this.defaultPrevented=!0};var dr=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,d=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const m=()=>{};a.addEventListener("test",m,d),a.removeEventListener("test",m,d)}catch{}return u}();function fr(u,d){if(Xe.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var m=this.type=u.type,E=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=d,d=u.relatedTarget){if(M){e:{try{C(d.nodeName);var D=!0;break e}catch{}D=!1}D||(d=null)}}else m=="mouseover"?d=u.fromElement:m=="mouseout"&&(d=u.toElement);this.relatedTarget=d,E?(this.clientX=E.clientX!==void 0?E.clientX:E.pageX,this.clientY=E.clientY!==void 0?E.clientY:E.pageY,this.screenX=E.screenX||0,this.screenY=E.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:pr[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&fr.aa.h.call(this)}}w(fr,Xe);var pr={2:"touch",3:"pen",4:"mouse"};fr.prototype.h=function(){fr.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var mr="closure_listenable_"+(1e6*Math.random()|0),$b=0;function zb(u,d,m,E,D){this.listener=u,this.proxy=null,this.src=d,this.type=m,this.capture=!!E,this.ha=D,this.key=++$b,this.da=this.fa=!1}function Du(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Mu(u){this.src=u,this.g={},this.h=0}Mu.prototype.add=function(u,d,m,E,D){var j=u.toString();u=this.g[j],u||(u=this.g[j]=[],this.h++);var H=rf(u,d,E,D);return-1<H?(d=u[H],m||(d.fa=!1)):(d=new zb(d,this.src,j,!!E,D),d.fa=m,u.push(d)),d};function nf(u,d){var m=d.type;if(m in u.g){var E=u.g[m],D=Array.prototype.indexOf.call(E,d,void 0),j;(j=0<=D)&&Array.prototype.splice.call(E,D,1),j&&(Du(d),u.g[m].length==0&&(delete u.g[m],u.h--))}}function rf(u,d,m,E){for(var D=0;D<u.length;++D){var j=u[D];if(!j.da&&j.listener==d&&j.capture==!!m&&j.ha==E)return D}return-1}var sf="closure_lm_"+(1e6*Math.random()|0),of={};function Ov(u,d,m,E,D){if(Array.isArray(d)){for(var j=0;j<d.length;j++)Ov(u,d[j],m,E,D);return null}return m=Mv(m),u&&u[mr]?u.K(d,m,c(E)?!!E.capture:!1,D):qb(u,d,m,!1,E,D)}function qb(u,d,m,E,D,j){if(!d)throw Error("Invalid event type");var H=c(D)?!!D.capture:!!D,Ae=lf(u);if(Ae||(u[sf]=Ae=new Mu(u)),m=Ae.add(d,m,E,H,j),m.proxy)return m;if(E=Hb(),m.proxy=E,E.src=u,E.listener=m,u.addEventListener)dr||(D=H),D===void 0&&(D=!1),u.addEventListener(d.toString(),E,D);else if(u.attachEvent)u.attachEvent(Dv(d.toString()),E);else if(u.addListener&&u.removeListener)u.addListener(E);else throw Error("addEventListener and attachEvent are unavailable.");return m}function Hb(){function u(m){return d.call(u.src,u.listener,m)}const d=Wb;return u}function Lv(u,d,m,E,D){if(Array.isArray(d))for(var j=0;j<d.length;j++)Lv(u,d[j],m,E,D);else E=c(E)?!!E.capture:!!E,m=Mv(m),u&&u[mr]?(u=u.i,d=String(d).toString(),d in u.g&&(j=u.g[d],m=rf(j,m,E,D),-1<m&&(Du(j[m]),Array.prototype.splice.call(j,m,1),j.length==0&&(delete u.g[d],u.h--)))):u&&(u=lf(u))&&(d=u.g[d.toString()],u=-1,d&&(u=rf(d,m,E,D)),(m=-1<u?d[u]:null)&&af(m))}function af(u){if(typeof u!="number"&&u&&!u.da){var d=u.src;if(d&&d[mr])nf(d.i,u);else{var m=u.type,E=u.proxy;d.removeEventListener?d.removeEventListener(m,E,u.capture):d.detachEvent?d.detachEvent(Dv(m),E):d.addListener&&d.removeListener&&d.removeListener(E),(m=lf(d))?(nf(m,u),m.h==0&&(m.src=null,d[sf]=null)):Du(u)}}}function Dv(u){return u in of?of[u]:of[u]="on"+u}function Wb(u,d){if(u.da)u=!0;else{d=new fr(d,this);var m=u.listener,E=u.ha||u.src;u.fa&&af(u),u=m.call(E,d)}return u}function lf(u){return u=u[sf],u instanceof Mu?u:null}var uf="__closure_events_fn_"+(1e9*Math.random()>>>0);function Mv(u){return typeof u=="function"?u:(u[uf]||(u[uf]=function(d){return u.handleEvent(d)}),u[uf])}function St(){Ce.call(this),this.i=new Mu(this),this.M=this,this.F=null}w(St,Ce),St.prototype[mr]=!0,St.prototype.removeEventListener=function(u,d,m,E){Lv(this,u,d,m,E)};function Vt(u,d){var m,E=u.F;if(E)for(m=[];E;E=E.F)m.push(E);if(u=u.M,E=d.type||d,typeof d=="string")d=new Xe(d,u);else if(d instanceof Xe)d.target=d.target||u;else{var D=d;d=new Xe(E,u),k(d,D)}if(D=!0,m)for(var j=m.length-1;0<=j;j--){var H=d.g=m[j];D=Vu(H,E,!0,d)&&D}if(H=d.g=u,D=Vu(H,E,!0,d)&&D,D=Vu(H,E,!1,d)&&D,m)for(j=0;j<m.length;j++)H=d.g=m[j],D=Vu(H,E,!1,d)&&D}St.prototype.N=function(){if(St.aa.N.call(this),this.i){var u=this.i,d;for(d in u.g){for(var m=u.g[d],E=0;E<m.length;E++)Du(m[E]);delete u.g[d],u.h--}}this.F=null},St.prototype.K=function(u,d,m,E){return this.i.add(String(u),d,!1,m,E)},St.prototype.L=function(u,d,m,E){return this.i.add(String(u),d,!0,m,E)};function Vu(u,d,m,E){if(d=u.i.g[String(d)],!d)return!0;d=d.concat();for(var D=!0,j=0;j<d.length;++j){var H=d[j];if(H&&!H.da&&H.capture==m){var Ae=H.listener,mt=H.ha||H.src;H.fa&&nf(u.i,H),D=Ae.call(mt,E)!==!1&&D}}return D&&!E.defaultPrevented}function Vv(u,d,m){if(typeof u=="function")m&&(u=p(u,m));else if(u&&typeof u.handleEvent=="function")u=p(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(u,d||0)}function jv(u){u.g=Vv(()=>{u.g=null,u.i&&(u.i=!1,jv(u))},u.l);const d=u.h;u.h=null,u.m.apply(null,d)}class Kb extends Ce{constructor(d,m){super(),this.m=d,this.l=m,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:jv(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ra(u){Ce.call(this),this.h=u,this.g={}}w(Ra,Ce);var Uv=[];function Fv(u){U(u.g,function(d,m){this.g.hasOwnProperty(m)&&af(d)},u),u.g={}}Ra.prototype.N=function(){Ra.aa.N.call(this),Fv(this)},Ra.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var cf=a.JSON.stringify,Qb=a.JSON.parse,Gb=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function hf(){}hf.prototype.h=null;function Bv(u){return u.h||(u.h=u.i())}function $v(){}var Ia={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function df(){Xe.call(this,"d")}w(df,Xe);function ff(){Xe.call(this,"c")}w(ff,Xe);var Zs={},zv=null;function ju(){return zv=zv||new St}Zs.La="serverreachability";function qv(u){Xe.call(this,Zs.La,u)}w(qv,Xe);function ba(u){const d=ju();Vt(d,new qv(d))}Zs.STAT_EVENT="statevent";function Hv(u,d){Xe.call(this,Zs.STAT_EVENT,u),this.stat=d}w(Hv,Xe);function jt(u){const d=ju();Vt(d,new Hv(d,u))}Zs.Ma="timingevent";function Wv(u,d){Xe.call(this,Zs.Ma,u),this.size=d}w(Wv,Xe);function ka(u,d){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},d)}function Ca(){this.g=!0}Ca.prototype.xa=function(){this.g=!1};function Jb(u,d,m,E,D,j){u.info(function(){if(u.g)if(j)for(var H="",Ae=j.split("&"),mt=0;mt<Ae.length;mt++){var Se=Ae[mt].split("=");if(1<Se.length){var xt=Se[0];Se=Se[1];var Rt=xt.split("_");H=2<=Rt.length&&Rt[1]=="type"?H+(xt+"="+Se+"&"):H+(xt+"=redacted&")}}else H=null;else H=j;return"XMLHTTP REQ ("+E+") [attempt "+D+"]: "+d+`
`+m+`
`+H})}function Xb(u,d,m,E,D,j,H){u.info(function(){return"XMLHTTP RESP ("+E+") [ attempt "+D+"]: "+d+`
`+m+`
`+j+" "+H})}function Qi(u,d,m,E){u.info(function(){return"XMLHTTP TEXT ("+d+"): "+Zb(u,m)+(E?" "+E:"")})}function Yb(u,d){u.info(function(){return"TIMEOUT: "+d})}Ca.prototype.info=function(){};function Zb(u,d){if(!u.g)return d;if(!d)return null;try{var m=JSON.parse(d);if(m){for(u=0;u<m.length;u++)if(Array.isArray(m[u])){var E=m[u];if(!(2>E.length)){var D=E[1];if(Array.isArray(D)&&!(1>D.length)){var j=D[0];if(j!="noop"&&j!="stop"&&j!="close")for(var H=1;H<D.length;H++)D[H]=""}}}}return cf(m)}catch{return d}}var Uu={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Kv={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},pf;function Fu(){}w(Fu,hf),Fu.prototype.g=function(){return new XMLHttpRequest},Fu.prototype.i=function(){return{}},pf=new Fu;function Gr(u,d,m,E){this.j=u,this.i=d,this.l=m,this.R=E||1,this.U=new Ra(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Qv}function Qv(){this.i=null,this.g="",this.h=!1}var Gv={},mf={};function gf(u,d,m){u.L=1,u.v=qu(gr(d)),u.m=m,u.P=!0,Jv(u,null)}function Jv(u,d){u.F=Date.now(),Bu(u),u.A=gr(u.v);var m=u.A,E=u.R;Array.isArray(E)||(E=[String(E)]),c_(m.i,"t",E),u.C=0,m=u.j.J,u.h=new Qv,u.g=k_(u.j,m?d:null,!u.m),0<u.O&&(u.M=new Kb(p(u.Y,u,u.g),u.O)),d=u.U,m=u.g,E=u.ca;var D="readystatechange";Array.isArray(D)||(D&&(Uv[0]=D.toString()),D=Uv);for(var j=0;j<D.length;j++){var H=Ov(m,D[j],E||d.handleEvent,!1,d.h||d);if(!H)break;d.g[H.key]=H}d=u.H?_(u.H):{},u.m?(u.u||(u.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,d)):(u.u="GET",u.g.ea(u.A,u.u,null,d)),ba(),Jb(u.i,u.u,u.A,u.l,u.R,u.m)}Gr.prototype.ca=function(u){u=u.target;const d=this.M;d&&yr(u)==3?d.j():this.Y(u)},Gr.prototype.Y=function(u){try{if(u==this.g)e:{const Rt=yr(this.g);var d=this.g.Ba();const Xi=this.g.Z();if(!(3>Rt)&&(Rt!=3||this.g&&(this.h.h||this.g.oa()||y_(this.g)))){this.J||Rt!=4||d==7||(d==8||0>=Xi?ba(3):ba(2)),yf(this);var m=this.g.Z();this.X=m;t:if(Xv(this)){var E=y_(this.g);u="";var D=E.length,j=yr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ei(this),Aa(this);var H="";break t}this.h.i=new a.TextDecoder}for(d=0;d<D;d++)this.h.h=!0,u+=this.h.i.decode(E[d],{stream:!(j&&d==D-1)});E.length=0,this.h.g+=u,this.C=0,H=this.h.g}else H=this.g.oa();if(this.o=m==200,Xb(this.i,this.u,this.A,this.l,this.R,Rt,m),this.o){if(this.T&&!this.K){t:{if(this.g){var Ae,mt=this.g;if((Ae=mt.g?mt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(Ae)){var Se=Ae;break t}}Se=null}if(m=Se)Qi(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,vf(this,m);else{this.o=!1,this.s=3,jt(12),ei(this),Aa(this);break e}}if(this.P){m=!0;let kn;for(;!this.J&&this.C<H.length;)if(kn=ek(this,H),kn==mf){Rt==4&&(this.s=4,jt(14),m=!1),Qi(this.i,this.l,null,"[Incomplete Response]");break}else if(kn==Gv){this.s=4,jt(15),Qi(this.i,this.l,H,"[Invalid Chunk]"),m=!1;break}else Qi(this.i,this.l,kn,null),vf(this,kn);if(Xv(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Rt!=4||H.length!=0||this.h.h||(this.s=1,jt(16),m=!1),this.o=this.o&&m,!m)Qi(this.i,this.l,H,"[Invalid Chunked Response]"),ei(this),Aa(this);else if(0<H.length&&!this.W){this.W=!0;var xt=this.j;xt.g==this&&xt.ba&&!xt.M&&(xt.j.info("Great, no buffering proxy detected. Bytes received: "+H.length),xf(xt),xt.M=!0,jt(11))}}else Qi(this.i,this.l,H,null),vf(this,H);Rt==4&&ei(this),this.o&&!this.J&&(Rt==4?x_(this.j,this):(this.o=!1,Bu(this)))}else yk(this.g),m==400&&0<H.indexOf("Unknown SID")?(this.s=3,jt(12)):(this.s=0,jt(13)),ei(this),Aa(this)}}}catch{}finally{}};function Xv(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function ek(u,d){var m=u.C,E=d.indexOf(`
`,m);return E==-1?mf:(m=Number(d.substring(m,E)),isNaN(m)?Gv:(E+=1,E+m>d.length?mf:(d=d.slice(E,E+m),u.C=E+m,d)))}Gr.prototype.cancel=function(){this.J=!0,ei(this)};function Bu(u){u.S=Date.now()+u.I,Yv(u,u.I)}function Yv(u,d){if(u.B!=null)throw Error("WatchDog timer not null");u.B=ka(p(u.ba,u),d)}function yf(u){u.B&&(a.clearTimeout(u.B),u.B=null)}Gr.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(Yb(this.i,this.A),this.L!=2&&(ba(),jt(17)),ei(this),this.s=2,Aa(this)):Yv(this,this.S-u)};function Aa(u){u.j.G==0||u.J||x_(u.j,u)}function ei(u){yf(u);var d=u.M;d&&typeof d.ma=="function"&&d.ma(),u.M=null,Fv(u.U),u.g&&(d=u.g,u.g=null,d.abort(),d.ma())}function vf(u,d){try{var m=u.j;if(m.G!=0&&(m.g==u||_f(m.h,u))){if(!u.K&&_f(m.h,u)&&m.G==3){try{var E=m.Da.g.parse(d)}catch{E=null}if(Array.isArray(E)&&E.length==3){var D=E;if(D[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<u.F)Ju(m),Qu(m);else break e;Sf(m),jt(18)}}else m.za=D[1],0<m.za-m.T&&37500>D[2]&&m.F&&m.v==0&&!m.C&&(m.C=ka(p(m.Za,m),6e3));if(1>=t_(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else ni(m,11)}else if((u.K||m.g==u)&&Ju(m),!v(d))for(D=m.Da.g.parse(d),d=0;d<D.length;d++){let Se=D[d];if(m.T=Se[0],Se=Se[1],m.G==2)if(Se[0]=="c"){m.K=Se[1],m.ia=Se[2];const xt=Se[3];xt!=null&&(m.la=xt,m.j.info("VER="+m.la));const Rt=Se[4];Rt!=null&&(m.Aa=Rt,m.j.info("SVER="+m.Aa));const Xi=Se[5];Xi!=null&&typeof Xi=="number"&&0<Xi&&(E=1.5*Xi,m.L=E,m.j.info("backChannelRequestTimeoutMs_="+E)),E=m;const kn=u.g;if(kn){const Yu=kn.g?kn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Yu){var j=E.h;j.g||Yu.indexOf("spdy")==-1&&Yu.indexOf("quic")==-1&&Yu.indexOf("h2")==-1||(j.j=j.l,j.g=new Set,j.h&&(wf(j,j.h),j.h=null))}if(E.D){const Rf=kn.g?kn.g.getResponseHeader("X-HTTP-Session-Id"):null;Rf&&(E.ya=Rf,Oe(E.I,E.D,Rf))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-u.F,m.j.info("Handshake RTT: "+m.R+"ms")),E=m;var H=u;if(E.qa=b_(E,E.J?E.ia:null,E.W),H.K){n_(E.h,H);var Ae=H,mt=E.L;mt&&(Ae.I=mt),Ae.B&&(yf(Ae),Bu(Ae)),E.g=H}else T_(E);0<m.i.length&&Gu(m)}else Se[0]!="stop"&&Se[0]!="close"||ni(m,7);else m.G==3&&(Se[0]=="stop"||Se[0]=="close"?Se[0]=="stop"?ni(m,7):Tf(m):Se[0]!="noop"&&m.l&&m.l.ta(Se),m.v=0)}}ba(4)}catch{}}var tk=class{constructor(u,d){this.g=u,this.map=d}};function Zv(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function e_(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function t_(u){return u.h?1:u.g?u.g.size:0}function _f(u,d){return u.h?u.h==d:u.g?u.g.has(d):!1}function wf(u,d){u.g?u.g.add(d):u.h=d}function n_(u,d){u.h&&u.h==d?u.h=null:u.g&&u.g.has(d)&&u.g.delete(d)}Zv.prototype.cancel=function(){if(this.i=r_(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function r_(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let d=u.i;for(const m of u.g.values())d=d.concat(m.D);return d}return b(u.i)}function nk(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(l(u)){for(var d=[],m=u.length,E=0;E<m;E++)d.push(u[E]);return d}d=[],m=0;for(E in u)d[m++]=u[E];return d}function rk(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(l(u)||typeof u=="string"){var d=[];u=u.length;for(var m=0;m<u;m++)d.push(m);return d}d=[],m=0;for(const E in u)d[m++]=E;return d}}}function s_(u,d){if(u.forEach&&typeof u.forEach=="function")u.forEach(d,void 0);else if(l(u)||typeof u=="string")Array.prototype.forEach.call(u,d,void 0);else for(var m=rk(u),E=nk(u),D=E.length,j=0;j<D;j++)d.call(void 0,E[j],m&&m[j],u)}var i_=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function sk(u,d){if(u){u=u.split("&");for(var m=0;m<u.length;m++){var E=u[m].indexOf("="),D=null;if(0<=E){var j=u[m].substring(0,E);D=u[m].substring(E+1)}else j=u[m];d(j,D?decodeURIComponent(D.replace(/\+/g," ")):"")}}}function ti(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof ti){this.h=u.h,$u(this,u.j),this.o=u.o,this.g=u.g,zu(this,u.s),this.l=u.l;var d=u.i,m=new Oa;m.i=d.i,d.g&&(m.g=new Map(d.g),m.h=d.h),o_(this,m),this.m=u.m}else u&&(d=String(u).match(i_))?(this.h=!1,$u(this,d[1]||"",!0),this.o=Pa(d[2]||""),this.g=Pa(d[3]||"",!0),zu(this,d[4]),this.l=Pa(d[5]||"",!0),o_(this,d[6]||"",!0),this.m=Pa(d[7]||"")):(this.h=!1,this.i=new Oa(null,this.h))}ti.prototype.toString=function(){var u=[],d=this.j;d&&u.push(Na(d,a_,!0),":");var m=this.g;return(m||d=="file")&&(u.push("//"),(d=this.o)&&u.push(Na(d,a_,!0),"@"),u.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&u.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&u.push("/"),u.push(Na(m,m.charAt(0)=="/"?ak:ok,!0))),(m=this.i.toString())&&u.push("?",m),(m=this.m)&&u.push("#",Na(m,uk)),u.join("")};function gr(u){return new ti(u)}function $u(u,d,m){u.j=m?Pa(d,!0):d,u.j&&(u.j=u.j.replace(/:$/,""))}function zu(u,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);u.s=d}else u.s=null}function o_(u,d,m){d instanceof Oa?(u.i=d,ck(u.i,u.h)):(m||(d=Na(d,lk)),u.i=new Oa(d,u.h))}function Oe(u,d,m){u.i.set(d,m)}function qu(u){return Oe(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Pa(u,d){return u?d?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Na(u,d,m){return typeof u=="string"?(u=encodeURI(u).replace(d,ik),m&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function ik(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var a_=/[#\/\?@]/g,ok=/[#\?:]/g,ak=/[#\?]/g,lk=/[#\?@]/g,uk=/#/g;function Oa(u,d){this.h=this.g=null,this.i=u||null,this.j=!!d}function Jr(u){u.g||(u.g=new Map,u.h=0,u.i&&sk(u.i,function(d,m){u.add(decodeURIComponent(d.replace(/\+/g," ")),m)}))}t=Oa.prototype,t.add=function(u,d){Jr(this),this.i=null,u=Gi(this,u);var m=this.g.get(u);return m||this.g.set(u,m=[]),m.push(d),this.h+=1,this};function l_(u,d){Jr(u),d=Gi(u,d),u.g.has(d)&&(u.i=null,u.h-=u.g.get(d).length,u.g.delete(d))}function u_(u,d){return Jr(u),d=Gi(u,d),u.g.has(d)}t.forEach=function(u,d){Jr(this),this.g.forEach(function(m,E){m.forEach(function(D){u.call(d,D,E,this)},this)},this)},t.na=function(){Jr(this);const u=Array.from(this.g.values()),d=Array.from(this.g.keys()),m=[];for(let E=0;E<d.length;E++){const D=u[E];for(let j=0;j<D.length;j++)m.push(d[E])}return m},t.V=function(u){Jr(this);let d=[];if(typeof u=="string")u_(this,u)&&(d=d.concat(this.g.get(Gi(this,u))));else{u=Array.from(this.g.values());for(let m=0;m<u.length;m++)d=d.concat(u[m])}return d},t.set=function(u,d){return Jr(this),this.i=null,u=Gi(this,u),u_(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[d]),this.h+=1,this},t.get=function(u,d){return u?(u=this.V(u),0<u.length?String(u[0]):d):d};function c_(u,d,m){l_(u,d),0<m.length&&(u.i=null,u.g.set(Gi(u,d),b(m)),u.h+=m.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],d=Array.from(this.g.keys());for(var m=0;m<d.length;m++){var E=d[m];const j=encodeURIComponent(String(E)),H=this.V(E);for(E=0;E<H.length;E++){var D=j;H[E]!==""&&(D+="="+encodeURIComponent(String(H[E]))),u.push(D)}}return this.i=u.join("&")};function Gi(u,d){return d=String(d),u.j&&(d=d.toLowerCase()),d}function ck(u,d){d&&!u.j&&(Jr(u),u.i=null,u.g.forEach(function(m,E){var D=E.toLowerCase();E!=D&&(l_(this,E),c_(this,D,m))},u)),u.j=d}function hk(u,d){const m=new Ca;if(a.Image){const E=new Image;E.onload=y(Xr,m,"TestLoadImage: loaded",!0,d,E),E.onerror=y(Xr,m,"TestLoadImage: error",!1,d,E),E.onabort=y(Xr,m,"TestLoadImage: abort",!1,d,E),E.ontimeout=y(Xr,m,"TestLoadImage: timeout",!1,d,E),a.setTimeout(function(){E.ontimeout&&E.ontimeout()},1e4),E.src=u}else d(!1)}function dk(u,d){const m=new Ca,E=new AbortController,D=setTimeout(()=>{E.abort(),Xr(m,"TestPingServer: timeout",!1,d)},1e4);fetch(u,{signal:E.signal}).then(j=>{clearTimeout(D),j.ok?Xr(m,"TestPingServer: ok",!0,d):Xr(m,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(D),Xr(m,"TestPingServer: error",!1,d)})}function Xr(u,d,m,E,D){try{D&&(D.onload=null,D.onerror=null,D.onabort=null,D.ontimeout=null),E(m)}catch{}}function fk(){this.g=new Gb}function pk(u,d,m){const E=m||"";try{s_(u,function(D,j){let H=D;c(D)&&(H=cf(D)),d.push(E+j+"="+encodeURIComponent(H))})}catch(D){throw d.push(E+"type="+encodeURIComponent("_badmap")),D}}function Hu(u){this.l=u.Ub||null,this.j=u.eb||!1}w(Hu,hf),Hu.prototype.g=function(){return new Wu(this.l,this.j)},Hu.prototype.i=function(u){return function(){return u}}({});function Wu(u,d){St.call(this),this.D=u,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}w(Wu,St),t=Wu.prototype,t.open=function(u,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=d,this.readyState=1,Da(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(d.body=u),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,La(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Da(this)),this.g&&(this.readyState=3,Da(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;h_(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function h_(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var d=u.value?u.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!u.done}))&&(this.response=this.responseText+=d)}u.done?La(this):Da(this),this.readyState==3&&h_(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,La(this))},t.Qa=function(u){this.g&&(this.response=u,La(this))},t.ga=function(){this.g&&La(this)};function La(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Da(u)}t.setRequestHeader=function(u,d){this.u.append(u,d)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],d=this.h.entries();for(var m=d.next();!m.done;)m=m.value,u.push(m[0]+": "+m[1]),m=d.next();return u.join(`\r
`)};function Da(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Wu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function d_(u){let d="";return U(u,function(m,E){d+=E,d+=":",d+=m,d+=`\r
`}),d}function Ef(u,d,m){e:{for(E in m){var E=!1;break e}E=!0}E||(m=d_(m),typeof u=="string"?m!=null&&encodeURIComponent(String(m)):Oe(u,d,m))}function Ke(u){St.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}w(Ke,St);var mk=/^https?$/i,gk=["POST","PUT"];t=Ke.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,d,m,E){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);d=d?d.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():pf.g(),this.v=this.o?Bv(this.o):Bv(pf),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(d,String(u),!0),this.B=!1}catch(j){f_(this,j);return}if(u=m||"",m=new Map(this.headers),E)if(Object.getPrototypeOf(E)===Object.prototype)for(var D in E)m.set(D,E[D]);else if(typeof E.keys=="function"&&typeof E.get=="function")for(const j of E.keys())m.set(j,E.get(j));else throw Error("Unknown input type for opt_headers: "+String(E));E=Array.from(m.keys()).find(j=>j.toLowerCase()=="content-type"),D=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(gk,d,void 0))||E||D||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[j,H]of m)this.g.setRequestHeader(j,H);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{g_(this),this.u=!0,this.g.send(u),this.u=!1}catch(j){f_(this,j)}};function f_(u,d){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=d,u.m=5,p_(u),Ku(u)}function p_(u){u.A||(u.A=!0,Vt(u,"complete"),Vt(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Vt(this,"complete"),Vt(this,"abort"),Ku(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ku(this,!0)),Ke.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?m_(this):this.bb())},t.bb=function(){m_(this)};function m_(u){if(u.h&&typeof o<"u"&&(!u.v[1]||yr(u)!=4||u.Z()!=2)){if(u.u&&yr(u)==4)Vv(u.Ea,0,u);else if(Vt(u,"readystatechange"),yr(u)==4){u.h=!1;try{const H=u.Z();e:switch(H){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var m;if(!(m=d)){var E;if(E=H===0){var D=String(u.D).match(i_)[1]||null;!D&&a.self&&a.self.location&&(D=a.self.location.protocol.slice(0,-1)),E=!mk.test(D?D.toLowerCase():"")}m=E}if(m)Vt(u,"complete"),Vt(u,"success");else{u.m=6;try{var j=2<yr(u)?u.g.statusText:""}catch{j=""}u.l=j+" ["+u.Z()+"]",p_(u)}}finally{Ku(u)}}}}function Ku(u,d){if(u.g){g_(u);const m=u.g,E=u.v[0]?()=>{}:null;u.g=null,u.v=null,d||Vt(u,"ready");try{m.onreadystatechange=E}catch{}}}function g_(u){u.I&&(a.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function yr(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<yr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var d=this.g.responseText;return u&&d.indexOf(u)==0&&(d=d.substring(u.length)),Qb(d)}};function y_(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function yk(u){const d={};u=(u.g&&2<=yr(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let E=0;E<u.length;E++){if(v(u[E]))continue;var m=N(u[E]);const D=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();const j=d[D]||[];d[D]=j,j.push(m)}I(d,function(E){return E.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ma(u,d,m){return m&&m.internalChannelParams&&m.internalChannelParams[u]||d}function v_(u){this.Aa=0,this.i=[],this.j=new Ca,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ma("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ma("baseRetryDelayMs",5e3,u),this.cb=Ma("retryDelaySeedMs",1e4,u),this.Wa=Ma("forwardChannelMaxRetries",2,u),this.wa=Ma("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Zv(u&&u.concurrentRequestLimit),this.Da=new fk,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=v_.prototype,t.la=8,t.G=1,t.connect=function(u,d,m,E){jt(0),this.W=u,this.H=d||{},m&&E!==void 0&&(this.H.OSID=m,this.H.OAID=E),this.F=this.X,this.I=b_(this,null,this.W),Gu(this)};function Tf(u){if(__(u),u.G==3){var d=u.U++,m=gr(u.I);if(Oe(m,"SID",u.K),Oe(m,"RID",d),Oe(m,"TYPE","terminate"),Va(u,m),d=new Gr(u,u.j,d),d.L=2,d.v=qu(gr(m)),m=!1,a.navigator&&a.navigator.sendBeacon)try{m=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!m&&a.Image&&(new Image().src=d.v,m=!0),m||(d.g=k_(d.j,null),d.g.ea(d.v)),d.F=Date.now(),Bu(d)}I_(u)}function Qu(u){u.g&&(xf(u),u.g.cancel(),u.g=null)}function __(u){Qu(u),u.u&&(a.clearTimeout(u.u),u.u=null),Ju(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function Gu(u){if(!e_(u.h)&&!u.s){u.s=!0;var d=u.Ga;Mt||re(),q||(Mt(),q=!0),Y.add(d,u),u.B=0}}function vk(u,d){return t_(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=d.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=ka(p(u.Ga,u,d),R_(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const D=new Gr(this,this.j,u);let j=this.o;if(this.S&&(j?(j=_(j),k(j,this.S)):j=this.S),this.m!==null||this.O||(D.H=j,j=null),this.P)e:{for(var d=0,m=0;m<this.i.length;m++){t:{var E=this.i[m];if("__data__"in E.map&&(E=E.map.__data__,typeof E=="string")){E=E.length;break t}E=void 0}if(E===void 0)break;if(d+=E,4096<d){d=m;break e}if(d===4096||m===this.i.length-1){d=m+1;break e}}d=1e3}else d=1e3;d=E_(this,D,d),m=gr(this.I),Oe(m,"RID",u),Oe(m,"CVER",22),this.D&&Oe(m,"X-HTTP-Session-Id",this.D),Va(this,m),j&&(this.O?d="headers="+encodeURIComponent(String(d_(j)))+"&"+d:this.m&&Ef(m,this.m,j)),wf(this.h,D),this.Ua&&Oe(m,"TYPE","init"),this.P?(Oe(m,"$req",d),Oe(m,"SID","null"),D.T=!0,gf(D,m,null)):gf(D,m,d),this.G=2}}else this.G==3&&(u?w_(this,u):this.i.length==0||e_(this.h)||w_(this))};function w_(u,d){var m;d?m=d.l:m=u.U++;const E=gr(u.I);Oe(E,"SID",u.K),Oe(E,"RID",m),Oe(E,"AID",u.T),Va(u,E),u.m&&u.o&&Ef(E,u.m,u.o),m=new Gr(u,u.j,m,u.B+1),u.m===null&&(m.H=u.o),d&&(u.i=d.D.concat(u.i)),d=E_(u,m,1e3),m.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),wf(u.h,m),gf(m,E,d)}function Va(u,d){u.H&&U(u.H,function(m,E){Oe(d,E,m)}),u.l&&s_({},function(m,E){Oe(d,E,m)})}function E_(u,d,m){m=Math.min(u.i.length,m);var E=u.l?p(u.l.Na,u.l,u):null;e:{var D=u.i;let j=-1;for(;;){const H=["count="+m];j==-1?0<m?(j=D[0].g,H.push("ofs="+j)):j=0:H.push("ofs="+j);let Ae=!0;for(let mt=0;mt<m;mt++){let Se=D[mt].g;const xt=D[mt].map;if(Se-=j,0>Se)j=Math.max(0,D[mt].g-100),Ae=!1;else try{pk(xt,H,"req"+Se+"_")}catch{E&&E(xt)}}if(Ae){E=H.join("&");break e}}}return u=u.i.splice(0,m),d.D=u,E}function T_(u){if(!u.g&&!u.u){u.Y=1;var d=u.Fa;Mt||re(),q||(Mt(),q=!0),Y.add(d,u),u.v=0}}function Sf(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=ka(p(u.Fa,u),R_(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,S_(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=ka(p(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,jt(10),Qu(this),S_(this))};function xf(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function S_(u){u.g=new Gr(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var d=gr(u.qa);Oe(d,"RID","rpc"),Oe(d,"SID",u.K),Oe(d,"AID",u.T),Oe(d,"CI",u.F?"0":"1"),!u.F&&u.ja&&Oe(d,"TO",u.ja),Oe(d,"TYPE","xmlhttp"),Va(u,d),u.m&&u.o&&Ef(d,u.m,u.o),u.L&&(u.g.I=u.L);var m=u.g;u=u.ia,m.L=1,m.v=qu(gr(d)),m.m=null,m.P=!0,Jv(m,u)}t.Za=function(){this.C!=null&&(this.C=null,Qu(this),Sf(this),jt(19))};function Ju(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function x_(u,d){var m=null;if(u.g==d){Ju(u),xf(u),u.g=null;var E=2}else if(_f(u.h,d))m=d.D,n_(u.h,d),E=1;else return;if(u.G!=0){if(d.o)if(E==1){m=d.m?d.m.length:0,d=Date.now()-d.F;var D=u.B;E=ju(),Vt(E,new Wv(E,m)),Gu(u)}else T_(u);else if(D=d.s,D==3||D==0&&0<d.X||!(E==1&&vk(u,d)||E==2&&Sf(u)))switch(m&&0<m.length&&(d=u.h,d.i=d.i.concat(m)),D){case 1:ni(u,5);break;case 4:ni(u,10);break;case 3:ni(u,6);break;default:ni(u,2)}}}function R_(u,d){let m=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(m*=2),m*d}function ni(u,d){if(u.j.info("Error code "+d),d==2){var m=p(u.fb,u),E=u.Xa;const D=!E;E=new ti(E||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||$u(E,"https"),qu(E),D?hk(E.toString(),m):dk(E.toString(),m)}else jt(2);u.G=0,u.l&&u.l.sa(d),I_(u),__(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),jt(2)):(this.j.info("Failed to ping google.com"),jt(1))};function I_(u){if(u.G=0,u.ka=[],u.l){const d=r_(u.h);(d.length!=0||u.i.length!=0)&&(R(u.ka,d),R(u.ka,u.i),u.h.i.length=0,b(u.i),u.i.length=0),u.l.ra()}}function b_(u,d,m){var E=m instanceof ti?gr(m):new ti(m);if(E.g!="")d&&(E.g=d+"."+E.g),zu(E,E.s);else{var D=a.location;E=D.protocol,d=d?d+"."+D.hostname:D.hostname,D=+D.port;var j=new ti(null);E&&$u(j,E),d&&(j.g=d),D&&zu(j,D),m&&(j.l=m),E=j}return m=u.D,d=u.ya,m&&d&&Oe(E,m,d),Oe(E,"VER",u.la),Va(u,E),E}function k_(u,d,m){if(d&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=u.Ca&&!u.pa?new Ke(new Hu({eb:m})):new Ke(u.pa),d.Ha(u.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function C_(){}t=C_.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Xu(){}Xu.prototype.g=function(u,d){return new rn(u,d)};function rn(u,d){St.call(this),this.g=new v_(d),this.l=u,this.h=d&&d.messageUrlParams||null,u=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(u?u["X-WebChannel-Content-Type"]=d.messageContentType:u={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(u?u["X-WebChannel-Client-Profile"]=d.va:u={"X-WebChannel-Client-Profile":d.va}),this.g.S=u,(u=d&&d.Sb)&&!v(u)&&(this.g.m=u),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!v(d)&&(this.g.D=d,u=this.h,u!==null&&d in u&&(u=this.h,d in u&&delete u[d])),this.j=new Ji(this)}w(rn,St),rn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},rn.prototype.close=function(){Tf(this.g)},rn.prototype.o=function(u){var d=this.g;if(typeof u=="string"){var m={};m.__data__=u,u=m}else this.u&&(m={},m.__data__=cf(u),u=m);d.i.push(new tk(d.Ya++,u)),d.G==3&&Gu(d)},rn.prototype.N=function(){this.g.l=null,delete this.j,Tf(this.g),delete this.g,rn.aa.N.call(this)};function A_(u){df.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var d=u.__sm__;if(d){e:{for(const m in d){u=m;break e}u=void 0}(this.i=u)&&(u=this.i,d=d!==null&&u in d?d[u]:void 0),this.data=d}else this.data=u}w(A_,df);function P_(){ff.call(this),this.status=1}w(P_,ff);function Ji(u){this.g=u}w(Ji,C_),Ji.prototype.ua=function(){Vt(this.g,"a")},Ji.prototype.ta=function(u){Vt(this.g,new A_(u))},Ji.prototype.sa=function(u){Vt(this.g,new P_)},Ji.prototype.ra=function(){Vt(this.g,"b")},Xu.prototype.createWebChannel=Xu.prototype.g,rn.prototype.send=rn.prototype.o,rn.prototype.open=rn.prototype.m,rn.prototype.close=rn.prototype.close,nI=function(){return new Xu},tI=function(){return ju()},eI=Zs,Am={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Uu.NO_ERROR=0,Uu.TIMEOUT=8,Uu.HTTP_ERROR=6,Kc=Uu,Kv.COMPLETE="complete",ZR=Kv,$v.EventType=Ia,Ia.OPEN="a",Ia.CLOSE="b",Ia.ERROR="c",Ia.MESSAGE="d",St.prototype.listen=St.prototype.K,sl=$v,Ke.prototype.listenOnce=Ke.prototype.L,Ke.prototype.getLastError=Ke.prototype.Ka,Ke.prototype.getLastErrorCode=Ke.prototype.Ba,Ke.prototype.getStatus=Ke.prototype.Z,Ke.prototype.getResponseJson=Ke.prototype.Oa,Ke.prototype.getResponseText=Ke.prototype.oa,Ke.prototype.send=Ke.prototype.ea,Ke.prototype.setWithCredentials=Ke.prototype.Ha,YR=Ke}).apply(typeof _c<"u"?_c:typeof self<"u"?self:typeof window<"u"?window:{});const R0="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ct.UNAUTHENTICATED=new Ct(null),Ct.GOOGLE_CREDENTIALS=new Ct("google-credentials-uid"),Ct.FIRST_PARTY=new Ct("first-party-uid"),Ct.MOCK_USER=new Ct("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ga="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oi=new vy("@firebase/firestore");function Wa(){return Oi.logLevel}function G(t,...e){if(Oi.logLevel<=ve.DEBUG){const n=e.map(Ly);Oi.debug(`Firestore (${ga}): ${t}`,...n)}}function Fr(t,...e){if(Oi.logLevel<=ve.ERROR){const n=e.map(Ly);Oi.error(`Firestore (${ga}): ${t}`,...n)}}function Zo(t,...e){if(Oi.logLevel<=ve.WARN){const n=e.map(Ly);Oi.warn(`Firestore (${ga}): ${t}`,...n)}}function Ly(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oe(t="Unexpected state"){const e=`FIRESTORE (${ga}) INTERNAL ASSERTION FAILED: `+t;throw Fr(e),new Error(e)}function ke(t,e){t||oe()}function ce(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class te extends cr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rI{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class XL{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ct.UNAUTHENTICATED))}shutdown(){}}class YL{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class ZL{constructor(e){this.t=e,this.currentUser=Ct.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ke(this.o===void 0);let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new js;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new js,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{G("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(G("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new js)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(G("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ke(typeof r.accessToken=="string"),new rI(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ke(e===null||typeof e=="string"),new Ct(e)}}class eD{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Ct.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class tD{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new eD(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Ct.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class nD{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class rD{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){ke(this.o===void 0);const r=i=>{i.error!=null&&G("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,G("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{G("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):G("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ke(typeof n.token=="string"),this.R=n.token,new nD(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sD(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sI{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=sD(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function xe(t,e){return t<e?-1:t>e?1:0}function ea(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new te(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new te(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new te(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new te(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ct.fromMillis(Date.now())}static fromDate(e){return ct.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new ct(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?xe(this.nanoseconds,e.nanoseconds):xe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ae(e)}static min(){return new ae(new ct(0,0))}static max(){return new ae(new ct(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ql{constructor(e,n,r){n===void 0?n=0:n>e.length&&oe(),r===void 0?r=e.length-n:r>e.length-n&&oe(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Ql.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ql?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Je extends Ql{construct(e,n,r){return new Je(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new te(B.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Je(n)}static emptyPath(){return new Je([])}}const iD=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class vt extends Ql{construct(e,n,r){return new vt(e,n,r)}static isValidIdentifier(e){return iD.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),vt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new vt(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new te(B.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new te(B.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new te(B.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new te(B.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new vt(n)}static emptyPath(){return new vt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(e){this.path=e}static fromPath(e){return new ne(Je.fromString(e))}static fromName(e){return new ne(Je.fromString(e).popFirst(5))}static empty(){return new ne(Je.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Je.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Je.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ne(new Je(e.slice()))}}function oD(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ae.fromTimestamp(r===1e9?new ct(n+1,0):new ct(n,r));return new Hs(s,ne.empty(),e)}function aD(t){return new Hs(t.readTime,t.key,-1)}class Hs{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Hs(ae.min(),ne.empty(),-1)}static max(){return new Hs(ae.max(),ne.empty(),-1)}}function lD(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ne.comparator(t.documentKey,e.documentKey),n!==0?n:xe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uD="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class cD{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Su(t){if(t.code!==B.FAILED_PRECONDITION||t.message!==uD)throw t;G("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&oe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new F((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof F?n:F.resolve(n)}catch(n){return F.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):F.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):F.reject(n)}static resolve(e){return new F((n,r)=>{n(e)})}static reject(e){return new F((n,r)=>{r(e)})}static waitFor(e){return new F((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},l=>r(l))}),o=!0,i===s&&n()})}static or(e){let n=F.resolve(!1);for(const r of e)n=n.next(s=>s?F.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new F((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const c=l;n(e[c]).next(h=>{o[c]=h,++a,a===i&&r(o)},h=>s(h))}})}static doWhile(e,n){return new F((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function hD(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function xu(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dy{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Dy.oe=-1;function Dd(t){return t==null}function $h(t){return t===0&&1/t==-1/0}function dD(t){return typeof t=="number"&&Number.isInteger(t)&&!$h(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I0(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ya(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function iI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class He{constructor(e,n){this.comparator=e,this.root=n||yt.EMPTY}insert(e,n){return new He(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,yt.BLACK,null,null))}remove(e){return new He(this.comparator,this.root.remove(e,this.comparator).copy(null,null,yt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new wc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new wc(this.root,e,this.comparator,!1)}getReverseIterator(){return new wc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new wc(this.root,e,this.comparator,!0)}}class wc{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class yt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??yt.RED,this.left=s??yt.EMPTY,this.right=i??yt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new yt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return yt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return yt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,yt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,yt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw oe();const e=this.left.check();if(e!==this.right.check())throw oe();return e+(this.isRed()?0:1)}}yt.EMPTY=null,yt.RED=!0,yt.BLACK=!1;yt.EMPTY=new class{constructor(){this.size=0}get key(){throw oe()}get value(){throw oe()}get color(){throw oe()}get left(){throw oe()}get right(){throw oe()}copy(e,n,r,s,i){return this}insert(e,n,r){return new yt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{constructor(e){this.comparator=e,this.data=new He(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new b0(this.data.getIterator())}getIteratorFrom(e){return new b0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof wt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new wt(this.comparator);return n.data=e,n}}class b0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(e){this.fields=e,e.sort(vt.comparator)}static empty(){return new Mn([])}unionWith(e){let n=new wt(vt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Mn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ea(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new oI("Invalid base64 string: "+i):i}}(e);return new Tt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new Tt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return xe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Tt.EMPTY_BYTE_STRING=new Tt("");const fD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ws(t){if(ke(!!t),typeof t=="string"){let e=0;const n=fD.exec(t);if(ke(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ye(t.seconds),nanos:Ye(t.nanos)}}function Ye(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Li(t){return typeof t=="string"?Tt.fromBase64String(t):Tt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function My(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Vy(t){const e=t.mapValue.fields.__previous_value__;return My(e)?Vy(e):e}function Gl(t){const e=Ws(t.mapValue.fields.__local_write_time__.timestampValue);return new ct(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pD{constructor(e,n,r,s,i,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class Jl{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Jl("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Jl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ec={mapValue:{}};function Di(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?My(t)?4:gD(t)?9007199254740991:mD(t)?10:11:oe()}function ar(t,e){if(t===e)return!0;const n=Di(t);if(n!==Di(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Gl(t).isEqual(Gl(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Ws(s.timestampValue),a=Ws(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Li(s.bytesValue).isEqual(Li(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Ye(s.geoPointValue.latitude)===Ye(i.geoPointValue.latitude)&&Ye(s.geoPointValue.longitude)===Ye(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Ye(s.integerValue)===Ye(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Ye(s.doubleValue),a=Ye(i.doubleValue);return o===a?$h(o)===$h(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return ea(t.arrayValue.values||[],e.arrayValue.values||[],ar);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(I0(o)!==I0(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!ar(o[l],a[l])))return!1;return!0}(t,e);default:return oe()}}function Xl(t,e){return(t.values||[]).find(n=>ar(n,e))!==void 0}function ta(t,e){if(t===e)return 0;const n=Di(t),r=Di(e);if(n!==r)return xe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return xe(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=Ye(i.integerValue||i.doubleValue),l=Ye(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return k0(t.timestampValue,e.timestampValue);case 4:return k0(Gl(t),Gl(e));case 5:return xe(t.stringValue,e.stringValue);case 6:return function(i,o){const a=Li(i),l=Li(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const h=xe(a[c],l[c]);if(h!==0)return h}return xe(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=xe(Ye(i.latitude),Ye(o.latitude));return a!==0?a:xe(Ye(i.longitude),Ye(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return C0(t.arrayValue,e.arrayValue);case 10:return function(i,o){var a,l,c,h;const f=i.fields||{},p=o.fields||{},y=(a=f.value)===null||a===void 0?void 0:a.arrayValue,w=(l=p.value)===null||l===void 0?void 0:l.arrayValue,b=xe(((c=y==null?void 0:y.values)===null||c===void 0?void 0:c.length)||0,((h=w==null?void 0:w.values)===null||h===void 0?void 0:h.length)||0);return b!==0?b:C0(y,w)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Ec.mapValue&&o===Ec.mapValue)return 0;if(i===Ec.mapValue)return 1;if(o===Ec.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),c=o.fields||{},h=Object.keys(c);l.sort(),h.sort();for(let f=0;f<l.length&&f<h.length;++f){const p=xe(l[f],h[f]);if(p!==0)return p;const y=ta(a[l[f]],c[h[f]]);if(y!==0)return y}return xe(l.length,h.length)}(t.mapValue,e.mapValue);default:throw oe()}}function k0(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return xe(t,e);const n=Ws(t),r=Ws(e),s=xe(n.seconds,r.seconds);return s!==0?s:xe(n.nanos,r.nanos)}function C0(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=ta(n[s],r[s]);if(i)return i}return xe(n.length,r.length)}function na(t){return Pm(t)}function Pm(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Ws(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Li(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ne.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Pm(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Pm(n.fields[o])}`;return s+"}"}(t.mapValue):oe()}function Nm(t){return!!t&&"integerValue"in t}function jy(t){return!!t&&"arrayValue"in t}function A0(t){return!!t&&"nullValue"in t}function P0(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Qc(t){return!!t&&"mapValue"in t}function mD(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function wl(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ya(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=wl(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=wl(t.arrayValue.values[n]);return e}return Object.assign({},t)}function gD(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e){this.value=e}static empty(){return new wn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Qc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=wl(n)}setAll(e){let n=vt.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=wl(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Qc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ar(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Qc(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){ya(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new wn(wl(this.value))}}function aI(t){const e=[];return ya(t.fields,(n,r)=>{const s=new vt([n]);if(Qc(r)){const i=aI(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Mn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Pt(e,0,ae.min(),ae.min(),ae.min(),wn.empty(),0)}static newFoundDocument(e,n,r,s){return new Pt(e,1,n,ae.min(),r,s,0)}static newNoDocument(e,n){return new Pt(e,2,n,ae.min(),ae.min(),wn.empty(),0)}static newUnknownDocument(e,n){return new Pt(e,3,n,ae.min(),ae.min(),wn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=wn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=wn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Pt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Pt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zh{constructor(e,n){this.position=e,this.inclusive=n}}function N0(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=ne.comparator(ne.fromName(o.referenceValue),n.key):r=ta(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function O0(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ar(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qh{constructor(e,n="asc"){this.field=e,this.dir=n}}function yD(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lI{}class lt extends lI{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new _D(e,n,r):n==="array-contains"?new TD(e,r):n==="in"?new SD(e,r):n==="not-in"?new xD(e,r):n==="array-contains-any"?new RD(e,r):new lt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new wD(e,r):new ED(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(ta(n,this.value)):n!==null&&Di(this.value)===Di(n)&&this.matchesComparison(ta(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return oe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class lr extends lI{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new lr(e,n)}matches(e){return uI(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function uI(t){return t.op==="and"}function cI(t){return vD(t)&&uI(t)}function vD(t){for(const e of t.filters)if(e instanceof lr)return!1;return!0}function Om(t){if(t instanceof lt)return t.field.canonicalString()+t.op.toString()+na(t.value);if(cI(t))return t.filters.map(e=>Om(e)).join(",");{const e=t.filters.map(n=>Om(n)).join(",");return`${t.op}(${e})`}}function hI(t,e){return t instanceof lt?function(r,s){return s instanceof lt&&r.op===s.op&&r.field.isEqual(s.field)&&ar(r.value,s.value)}(t,e):t instanceof lr?function(r,s){return s instanceof lr&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&hI(o,s.filters[a]),!0):!1}(t,e):void oe()}function dI(t){return t instanceof lt?function(n){return`${n.field.canonicalString()} ${n.op} ${na(n.value)}`}(t):t instanceof lr?function(n){return n.op.toString()+" {"+n.getFilters().map(dI).join(" ,")+"}"}(t):"Filter"}class _D extends lt{constructor(e,n,r){super(e,n,r),this.key=ne.fromName(r.referenceValue)}matches(e){const n=ne.comparator(e.key,this.key);return this.matchesComparison(n)}}class wD extends lt{constructor(e,n){super(e,"in",n),this.keys=fI("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class ED extends lt{constructor(e,n){super(e,"not-in",n),this.keys=fI("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function fI(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ne.fromName(r.referenceValue))}class TD extends lt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return jy(n)&&Xl(n.arrayValue,this.value)}}class SD extends lt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Xl(this.value.arrayValue,n)}}class xD extends lt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Xl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Xl(this.value.arrayValue,n)}}class RD extends lt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!jy(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Xl(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ID{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.ue=null}}function L0(t,e=null,n=[],r=[],s=null,i=null,o=null){return new ID(t,e,n,r,s,i,o)}function Uy(t){const e=ce(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Om(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Dd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>na(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>na(r)).join(",")),e.ue=n}return e.ue}function Fy(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!yD(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!hI(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!O0(t.startAt,e.startAt)&&O0(t.endAt,e.endAt)}function Lm(t){return ne.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Md{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function bD(t,e,n,r,s,i,o,a){return new Md(t,e,n,r,s,i,o,a)}function By(t){return new Md(t)}function D0(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function kD(t){return t.collectionGroup!==null}function El(t){const e=ce(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new wt(vt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new qh(i,r))}),n.has(vt.keyField().canonicalString())||e.ce.push(new qh(vt.keyField(),r))}return e.ce}function sr(t){const e=ce(t);return e.le||(e.le=CD(e,El(t))),e.le}function CD(t,e){if(t.limitType==="F")return L0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new qh(s.field,i)});const n=t.endAt?new zh(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new zh(t.startAt.position,t.startAt.inclusive):null;return L0(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Dm(t,e,n){return new Md(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Vd(t,e){return Fy(sr(t),sr(e))&&t.limitType===e.limitType}function pI(t){return`${Uy(sr(t))}|lt:${t.limitType}`}function no(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>dI(s)).join(", ")}]`),Dd(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>na(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>na(s)).join(",")),`Target(${r})`}(sr(t))}; limitType=${t.limitType})`}function jd(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):ne.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of El(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,l){const c=N0(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,El(r),s)||r.endAt&&!function(o,a,l){const c=N0(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,El(r),s))}(t,e)}function AD(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function mI(t){return(e,n)=>{let r=!1;for(const s of El(t)){const i=PD(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function PD(t,e,n){const r=t.field.isKeyField()?ne.comparator(e.key,n.key):function(i,o,a){const l=o.data.field(i),c=a.data.field(i);return l!==null&&c!==null?ta(l,c):oe()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return oe()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){ya(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return iI(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ND=new He(ne.comparator);function Br(){return ND}const gI=new He(ne.comparator);function il(...t){let e=gI;for(const n of t)e=e.insert(n.key,n);return e}function yI(t){let e=gI;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ci(){return Tl()}function vI(){return Tl()}function Tl(){return new va(t=>t.toString(),(t,e)=>t.isEqual(e))}const OD=new He(ne.comparator),LD=new wt(ne.comparator);function me(...t){let e=LD;for(const n of t)e=e.add(n);return e}const DD=new wt(xe);function MD(){return DD}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $y(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:$h(e)?"-0":e}}function _I(t){return{integerValue:""+t}}function VD(t,e){return dD(e)?_I(e):$y(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ud{constructor(){this._=void 0}}function jD(t,e,n){return t instanceof Hh?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&My(i)&&(i=Vy(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof Yl?EI(t,e):t instanceof Zl?TI(t,e):function(s,i){const o=wI(s,i),a=M0(o)+M0(s.Pe);return Nm(o)&&Nm(s.Pe)?_I(a):$y(s.serializer,a)}(t,e)}function UD(t,e,n){return t instanceof Yl?EI(t,e):t instanceof Zl?TI(t,e):n}function wI(t,e){return t instanceof Wh?function(r){return Nm(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Hh extends Ud{}class Yl extends Ud{constructor(e){super(),this.elements=e}}function EI(t,e){const n=SI(e);for(const r of t.elements)n.some(s=>ar(s,r))||n.push(r);return{arrayValue:{values:n}}}class Zl extends Ud{constructor(e){super(),this.elements=e}}function TI(t,e){let n=SI(e);for(const r of t.elements)n=n.filter(s=>!ar(s,r));return{arrayValue:{values:n}}}class Wh extends Ud{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function M0(t){return Ye(t.integerValue||t.doubleValue)}function SI(t){return jy(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function FD(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Yl&&s instanceof Yl||r instanceof Zl&&s instanceof Zl?ea(r.elements,s.elements,ar):r instanceof Wh&&s instanceof Wh?ar(r.Pe,s.Pe):r instanceof Hh&&s instanceof Hh}(t.transform,e.transform)}class BD{constructor(e,n){this.version=e,this.transformResults=n}}class Ar{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ar}static exists(e){return new Ar(void 0,e)}static updateTime(e){return new Ar(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Gc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}let Fd=class{};function xI(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new II(t.key,Ar.none()):new Ru(t.key,t.data,Ar.none());{const n=t.data,r=wn.empty();let s=new wt(vt.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Hi(t.key,r,new Mn(s.toArray()),Ar.none())}}function $D(t,e,n){t instanceof Ru?function(s,i,o){const a=s.value.clone(),l=j0(s.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Hi?function(s,i,o){if(!Gc(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=j0(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(RI(s)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Sl(t,e,n,r){return t instanceof Ru?function(i,o,a,l){if(!Gc(i.precondition,o))return a;const c=i.value.clone(),h=U0(i.fieldTransforms,l,o);return c.setAll(h),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof Hi?function(i,o,a,l){if(!Gc(i.precondition,o))return a;const c=U0(i.fieldTransforms,l,o),h=o.data;return h.setAll(RI(i)),h.setAll(c),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(i,o,a){return Gc(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function zD(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=wI(r.transform,s||null);i!=null&&(n===null&&(n=wn.empty()),n.set(r.field,i))}return n||null}function V0(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&ea(r,s,(i,o)=>FD(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ru extends Fd{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Hi extends Fd{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function RI(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function j0(t,e,n){const r=new Map;ke(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,UD(o,a,n[s]))}return r}function U0(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,jD(i,o,e))}return r}class II extends Fd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class qD extends Fd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HD{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&$D(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Sl(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Sl(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=vI();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const l=xI(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(ae.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),me())}isEqual(e){return this.batchId===e.batchId&&ea(this.mutations,e.mutations,(n,r)=>V0(n,r))&&ea(this.baseMutations,e.baseMutations,(n,r)=>V0(n,r))}}class zy{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){ke(e.mutations.length===r.length);let s=function(){return OD}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new zy(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WD{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KD{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tt,_e;function QD(t){switch(t){default:return oe();case B.CANCELLED:case B.UNKNOWN:case B.DEADLINE_EXCEEDED:case B.RESOURCE_EXHAUSTED:case B.INTERNAL:case B.UNAVAILABLE:case B.UNAUTHENTICATED:return!1;case B.INVALID_ARGUMENT:case B.NOT_FOUND:case B.ALREADY_EXISTS:case B.PERMISSION_DENIED:case B.FAILED_PRECONDITION:case B.ABORTED:case B.OUT_OF_RANGE:case B.UNIMPLEMENTED:case B.DATA_LOSS:return!0}}function bI(t){if(t===void 0)return Fr("GRPC error has no .code"),B.UNKNOWN;switch(t){case tt.OK:return B.OK;case tt.CANCELLED:return B.CANCELLED;case tt.UNKNOWN:return B.UNKNOWN;case tt.DEADLINE_EXCEEDED:return B.DEADLINE_EXCEEDED;case tt.RESOURCE_EXHAUSTED:return B.RESOURCE_EXHAUSTED;case tt.INTERNAL:return B.INTERNAL;case tt.UNAVAILABLE:return B.UNAVAILABLE;case tt.UNAUTHENTICATED:return B.UNAUTHENTICATED;case tt.INVALID_ARGUMENT:return B.INVALID_ARGUMENT;case tt.NOT_FOUND:return B.NOT_FOUND;case tt.ALREADY_EXISTS:return B.ALREADY_EXISTS;case tt.PERMISSION_DENIED:return B.PERMISSION_DENIED;case tt.FAILED_PRECONDITION:return B.FAILED_PRECONDITION;case tt.ABORTED:return B.ABORTED;case tt.OUT_OF_RANGE:return B.OUT_OF_RANGE;case tt.UNIMPLEMENTED:return B.UNIMPLEMENTED;case tt.DATA_LOSS:return B.DATA_LOSS;default:return oe()}}(_e=tt||(tt={}))[_e.OK=0]="OK",_e[_e.CANCELLED=1]="CANCELLED",_e[_e.UNKNOWN=2]="UNKNOWN",_e[_e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",_e[_e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",_e[_e.NOT_FOUND=5]="NOT_FOUND",_e[_e.ALREADY_EXISTS=6]="ALREADY_EXISTS",_e[_e.PERMISSION_DENIED=7]="PERMISSION_DENIED",_e[_e.UNAUTHENTICATED=16]="UNAUTHENTICATED",_e[_e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",_e[_e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",_e[_e.ABORTED=10]="ABORTED",_e[_e.OUT_OF_RANGE=11]="OUT_OF_RANGE",_e[_e.UNIMPLEMENTED=12]="UNIMPLEMENTED",_e[_e.INTERNAL=13]="INTERNAL",_e[_e.UNAVAILABLE=14]="UNAVAILABLE",_e[_e.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GD(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JD=new Ti([4294967295,4294967295],0);function F0(t){const e=GD().encode(t),n=new XR;return n.update(e),new Uint8Array(n.digest())}function B0(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Ti([n,r],0),new Ti([s,i],0)]}class qy{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ol(`Invalid padding: ${n}`);if(r<0)throw new ol(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ol(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ol(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Ti.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(Ti.fromNumber(r)));return s.compare(JD)===1&&(s=new Ti([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=F0(e),[r,s]=B0(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new qy(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=F0(e),[r,s]=B0(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class ol extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bd{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Iu.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Bd(ae.min(),s,new He(xe),Br(),me())}}class Iu{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Iu(r,n,me(),me(),me())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class kI{constructor(e,n){this.targetId=e,this.me=n}}class CI{constructor(e,n,r=Tt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class $0{constructor(){this.fe=0,this.ge=q0(),this.pe=Tt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=me(),n=me(),r=me();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:oe()}}),new Iu(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=q0()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ke(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class XD{constructor(e){this.Le=e,this.Be=new Map,this.ke=Br(),this.qe=z0(),this.Qe=new He(xe)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:oe()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(Lm(i))if(r===0){const o=new ne(i.path);this.Ue(n,o,Pt.newNoDocument(o,ae.min()))}else ke(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=Li(r).toUint8Array()}catch(l){if(l instanceof oI)return Zo("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new qy(o,s,i)}catch(l){return Zo(l instanceof ol?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,o)=>{const a=this.Je(o);if(a){if(i.current&&Lm(a.target)){const l=new ne(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,Pt.newNoDocument(l,e))}i.be&&(n.set(o,i.ve()),i.Ce())}});let r=me();this.qe.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));const s=new Bd(e,n,this.Qe,this.ke,r);return this.ke=Br(),this.qe=z0(),this.Qe=new He(xe),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new $0,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new wt(xe),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||G("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new $0),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function z0(){return new He(ne.comparator)}function q0(){return new He(ne.comparator)}const YD={asc:"ASCENDING",desc:"DESCENDING"},ZD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},eM={and:"AND",or:"OR"};class tM{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Mm(t,e){return t.useProto3Json||Dd(e)?e:{value:e}}function Kh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function AI(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function nM(t,e){return Kh(t,e.toTimestamp())}function ir(t){return ke(!!t),ae.fromTimestamp(function(n){const r=Ws(n);return new ct(r.seconds,r.nanos)}(t))}function Hy(t,e){return Vm(t,e).canonicalString()}function Vm(t,e){const n=function(s){return new Je(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function PI(t){const e=Je.fromString(t);return ke(MI(e)),e}function jm(t,e){return Hy(t.databaseId,e.path)}function ap(t,e){const n=PI(e);if(n.get(1)!==t.databaseId.projectId)throw new te(B.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new te(B.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ne(OI(n))}function NI(t,e){return Hy(t.databaseId,e)}function rM(t){const e=PI(t);return e.length===4?Je.emptyPath():OI(e)}function Um(t){return new Je(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function OI(t){return ke(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function H0(t,e,n){return{name:jm(t,e),fields:n.value.mapValue.fields}}function sM(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:oe()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,h){return c.useProto3Json?(ke(h===void 0||typeof h=="string"),Tt.fromBase64String(h||"")):(ke(h===void 0||h instanceof Buffer||h instanceof Uint8Array),Tt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const h=c.code===void 0?B.UNKNOWN:bI(c.code);return new te(h,c.message||"")}(o);n=new CI(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=ap(t,r.document.name),i=ir(r.document.updateTime),o=r.document.createTime?ir(r.document.createTime):ae.min(),a=new wn({mapValue:{fields:r.document.fields}}),l=Pt.newFoundDocument(s,i,o,a),c=r.targetIds||[],h=r.removedTargetIds||[];n=new Jc(c,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=ap(t,r.document),i=r.readTime?ir(r.readTime):ae.min(),o=Pt.newNoDocument(s,i),a=r.removedTargetIds||[];n=new Jc([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=ap(t,r.document),i=r.removedTargetIds||[];n=new Jc([],i,s,null)}else{if(!("filter"in e))return oe();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new KD(s,i),a=r.targetId;n=new kI(a,o)}}return n}function iM(t,e){let n;if(e instanceof Ru)n={update:H0(t,e.key,e.value)};else if(e instanceof II)n={delete:jm(t,e.key)};else if(e instanceof Hi)n={update:H0(t,e.key,e.data),updateMask:pM(e.fieldMask)};else{if(!(e instanceof qD))return oe();n={verify:jm(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof Hh)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Yl)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Zl)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Wh)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw oe()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:nM(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:oe()}(t,e.precondition)),n}function oM(t,e){return t&&t.length>0?(ke(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?ir(s.updateTime):ir(i);return o.isEqual(ae.min())&&(o=ir(i)),new BD(o,s.transformResults||[])}(n,e))):[]}function aM(t,e){return{documents:[NI(t,e.path)]}}function lM(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=NI(t,s);const i=function(c){if(c.length!==0)return DI(lr.create(c,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(c){if(c.length!==0)return c.map(h=>function(p){return{field:ro(p.field),direction:hM(p.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Mm(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:s}}function uM(t){let e=rM(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){ke(r===1);const h=n.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=function(f){const p=LI(f);return p instanceof lr&&cI(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(p=>function(w){return new qh(so(w.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(p))}(n.orderBy));let a=null;n.limit&&(a=function(f){let p;return p=typeof f=="object"?f.value:f,Dd(p)?null:p}(n.limit));let l=null;n.startAt&&(l=function(f){const p=!!f.before,y=f.values||[];return new zh(y,p)}(n.startAt));let c=null;return n.endAt&&(c=function(f){const p=!f.before,y=f.values||[];return new zh(y,p)}(n.endAt)),bD(e,s,o,i,a,"F",l,c)}function cM(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return oe()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function LI(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=so(n.unaryFilter.field);return lt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=so(n.unaryFilter.field);return lt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=so(n.unaryFilter.field);return lt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=so(n.unaryFilter.field);return lt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return oe()}}(t):t.fieldFilter!==void 0?function(n){return lt.create(so(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return oe()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return lr.create(n.compositeFilter.filters.map(r=>LI(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return oe()}}(n.compositeFilter.op))}(t):oe()}function hM(t){return YD[t]}function dM(t){return ZD[t]}function fM(t){return eM[t]}function ro(t){return{fieldPath:t.canonicalString()}}function so(t){return vt.fromServerFormat(t.fieldPath)}function DI(t){return t instanceof lt?function(n){if(n.op==="=="){if(P0(n.value))return{unaryFilter:{field:ro(n.field),op:"IS_NAN"}};if(A0(n.value))return{unaryFilter:{field:ro(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(P0(n.value))return{unaryFilter:{field:ro(n.field),op:"IS_NOT_NAN"}};if(A0(n.value))return{unaryFilter:{field:ro(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ro(n.field),op:dM(n.op),value:n.value}}}(t):t instanceof lr?function(n){const r=n.getFilters().map(s=>DI(s));return r.length===1?r[0]:{compositeFilter:{op:fM(n.op),filters:r}}}(t):oe()}function pM(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function MI(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rs{constructor(e,n,r,s,i=ae.min(),o=ae.min(),a=Tt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Rs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Rs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Rs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Rs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mM{constructor(e){this.ct=e}}function gM(t){const e=uM({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Dm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yM{constructor(){this.un=new vM}addToCollectionParentIndex(e,n){return this.un.add(n),F.resolve()}getCollectionParents(e,n){return F.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return F.resolve()}deleteFieldIndex(e,n){return F.resolve()}deleteAllFieldIndexes(e){return F.resolve()}createTargetIndexes(e,n){return F.resolve()}getDocumentsMatchingTarget(e,n){return F.resolve(null)}getIndexType(e,n){return F.resolve(0)}getFieldIndexes(e,n){return F.resolve([])}getNextCollectionGroupToUpdate(e){return F.resolve(null)}getMinOffset(e,n){return F.resolve(Hs.min())}getMinOffsetFromCollectionGroup(e,n){return F.resolve(Hs.min())}updateCollectionGroup(e,n,r){return F.resolve()}updateIndexEntries(e,n){return F.resolve()}}class vM{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new wt(Je.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new wt(Je.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new ra(0)}static kn(){return new ra(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _M{constructor(){this.changes=new va(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Pt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?F.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wM{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EM{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Sl(r.mutation,s,Mn.empty(),ct.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,me()).next(()=>r))}getLocalViewOfDocuments(e,n,r=me()){const s=ci();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=il();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=ci();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,me()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=Br();const o=Tl(),a=function(){return Tl()}();return n.forEach((l,c)=>{const h=r.get(c.key);s.has(c.key)&&(h===void 0||h.mutation instanceof Hi)?i=i.insert(c.key,c):h!==void 0?(o.set(c.key,h.mutation.getFieldMask()),Sl(h.mutation,c,h.mutation.getFieldMask(),ct.now())):o.set(c.key,Mn.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((c,h)=>o.set(c,h)),n.forEach((c,h)=>{var f;return a.set(c,new wM(h,(f=o.get(c))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Tl();let s=new He((o,a)=>o-a),i=me();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let h=r.get(l)||Mn.empty();h=a.applyToLocalView(c,h),r.set(l,h);const f=(s.get(a.batchId)||me()).add(l);s=s.insert(a.batchId,f)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,h=l.value,f=vI();h.forEach(p=>{if(!i.has(p)){const y=xI(n.get(p),r.get(p));y!==null&&f.set(p,y),i=i.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,f))}return F.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return ne.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):kD(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):F.resolve(ci());let a=-1,l=i;return o.next(c=>F.forEach(c,(h,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),i.get(h)?F.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{l=l.insert(h,p)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,l,c,me())).next(h=>({batchId:a,changes:yI(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ne(n)).next(r=>{let s=il();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=il();return this.indexManager.getCollectionParents(e,i).next(a=>F.forEach(a,l=>{const c=function(f,p){return new Md(p,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,r,s).next(h=>{h.forEach((f,p)=>{o=o.insert(f,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((l,c)=>{const h=c.getKey();o.get(h)===null&&(o=o.insert(h,Pt.newInvalidDocument(h)))});let a=il();return o.forEach((l,c)=>{const h=i.get(l);h!==void 0&&Sl(h.mutation,c,Mn.empty(),ct.now()),jd(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TM{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return F.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:ir(s.createTime)}}(n)),F.resolve()}getNamedQuery(e,n){return F.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:gM(s.bundledQuery),readTime:ir(s.readTime)}}(n)),F.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SM{constructor(){this.overlays=new He(ne.comparator),this.Ir=new Map}getOverlay(e,n){return F.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ci();return F.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),F.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),F.resolve()}getOverlaysForCollection(e,n,r){const s=ci(),i=n.length+1,o=new ne(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return F.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new He((c,h)=>c-h);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let h=i.get(c.largestBatchId);h===null&&(h=ci(),i=i.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const a=ci(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,h)=>a.set(c,h)),!(a.size()>=s)););return F.resolve(a)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new WD(n,r));let i=this.Ir.get(n);i===void 0&&(i=me(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xM{constructor(){this.sessionToken=Tt.EMPTY_BYTE_STRING}getSessionToken(e){return F.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,F.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wy{constructor(){this.Tr=new wt(dt.Er),this.dr=new wt(dt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new dt(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new dt(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new ne(new Je([])),r=new dt(n,e),s=new dt(n,e+1),i=[];return this.dr.forEachInRange([r,s],o=>{this.Vr(o),i.push(o.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new ne(new Je([])),r=new dt(n,e),s=new dt(n,e+1);let i=me();return this.dr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new dt(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class dt{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return ne.comparator(e.key,n.key)||xe(e.wr,n.wr)}static Ar(e,n){return xe(e.wr,n.wr)||ne.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RM{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new wt(dt.Er)}checkEmpty(e){return F.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new HD(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.br=this.br.add(new dt(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return F.resolve(o)}lookupMutationBatch(e,n){return F.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return F.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return F.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return F.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new dt(n,0),s=new dt(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],o=>{const a=this.Dr(o.wr);i.push(a)}),F.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new wt(xe);return n.forEach(s=>{const i=new dt(s,0),o=new dt(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],a=>{r=r.add(a.wr)})}),F.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;ne.isDocumentKey(i)||(i=i.child(""));const o=new dt(new ne(i),0);let a=new wt(xe);return this.br.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(a=a.add(l.wr)),!0)},o),F.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){ke(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return F.forEach(n.mutations,s=>{const i=new dt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new dt(n,0),s=this.br.firstAfterOrEqual(r);return F.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,F.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IM{constructor(e){this.Mr=e,this.docs=function(){return new He(ne.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return F.resolve(r?r.document.mutableCopy():Pt.newInvalidDocument(n))}getEntries(e,n){let r=Br();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Pt.newInvalidDocument(s))}),F.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Br();const o=n.path,a=new ne(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:h}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||lD(aD(h),r)<=0||(s.has(h.key)||jd(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return F.resolve(i)}getAllFromCollectionGroup(e,n,r,s){oe()}Or(e,n){return F.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new bM(this)}getSize(e){return F.resolve(this.size)}}class bM extends _M{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),F.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kM{constructor(e){this.persistence=e,this.Nr=new va(n=>Uy(n),Fy),this.lastRemoteSnapshotVersion=ae.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Wy,this.targetCount=0,this.kr=ra.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),F.resolve()}getLastRemoteSnapshotVersion(e){return F.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return F.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),F.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),F.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new ra(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,F.resolve()}updateTargetData(e,n){return this.Kn(n),F.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,F.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),F.waitFor(i).next(()=>s)}getTargetCount(e){return F.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return F.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),F.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),F.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),F.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return F.resolve(r)}containsKey(e,n){return F.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CM{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Dy(0),this.Kr=!1,this.Kr=!0,this.$r=new xM,this.referenceDelegate=e(this),this.Ur=new kM(this),this.indexManager=new yM,this.remoteDocumentCache=function(s){return new IM(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new mM(n),this.Gr=new TM(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new SM,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new RM(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){G("MemoryPersistence","Starting transaction:",e);const s=new AM(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return F.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class AM extends cD{constructor(e){super(),this.currentSequenceNumber=e}}class Ky{constructor(e){this.persistence=e,this.Jr=new Wy,this.Yr=null}static Zr(e){return new Ky(e)}get Xr(){if(this.Yr)return this.Yr;throw oe()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),F.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),F.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),F.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return F.forEach(this.Xr,r=>{const s=ne.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,ae.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return F.or([()=>F.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qy{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=me(),s=me();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Qy(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PM{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NM{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return cN()?8:hD(Lt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new PM;return this.Xi(e,n,o).next(a=>{if(i.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(Wa()<=ve.DEBUG&&G("QueryEngine","SDK will not create cache indexes for query:",no(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),F.resolve()):(Wa()<=ve.DEBUG&&G("QueryEngine","Query:",no(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(Wa()<=ve.DEBUG&&G("QueryEngine","The SDK decides to create cache indexes for query:",no(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,sr(n))):F.resolve())}Yi(e,n){if(D0(n))return F.resolve(null);let r=sr(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Dm(n,null,"F"),r=sr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=me(...i);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.ts(n,a);return this.ns(n,c,o,l.readTime)?this.Yi(e,Dm(n,null,"F")):this.rs(e,c,n,l)}))})))}Zi(e,n,r,s){return D0(n)||s.isEqual(ae.min())?F.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const o=this.ts(n,i);return this.ns(n,o,r,s)?F.resolve(null):(Wa()<=ve.DEBUG&&G("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),no(n)),this.rs(e,o,n,oD(s,-1)).next(a=>a))})}ts(e,n){let r=new wt(mI(e));return n.forEach((s,i)=>{jd(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return Wa()<=ve.DEBUG&&G("QueryEngine","Using full collection scan to execute query:",no(n)),this.Ji.getDocumentsMatchingQuery(e,n,Hs.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OM{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new He(xe),this._s=new va(i=>Uy(i),Fy),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new EM(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function LM(t,e,n,r){return new OM(t,e,n,r)}async function VI(t,e){const n=ce(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=me();for(const c of s){o.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}for(const c of i){a.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(r,l).next(c=>({hs:c,removedBatchIds:o,addedBatchIds:a}))})})}function DM(t,e){const n=ce(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,h){const f=c.batch,p=f.keys();let y=F.resolve();return p.forEach(w=>{y=y.next(()=>h.getEntry(l,w)).next(b=>{const R=c.docVersions.get(w);ke(R!==null),b.version.compareTo(R)<0&&(f.applyToRemoteDocument(b,c),b.isValidDocument()&&(b.setReadTime(c.commitVersion),h.addEntry(b)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(l,f))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=me();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function jI(t){const e=ce(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function MM(t,e){const n=ce(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const a=[];e.targetChanges.forEach((h,f)=>{const p=s.get(f);if(!p)return;a.push(n.Ur.removeMatchingKeys(i,h.removedDocuments,f).next(()=>n.Ur.addMatchingKeys(i,h.addedDocuments,f)));let y=p.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(f)!==null?y=y.withResumeToken(Tt.EMPTY_BYTE_STRING,ae.min()).withLastLimboFreeSnapshotVersion(ae.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),s=s.insert(f,y),function(b,R,T){return b.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=3e8?!0:T.addedDocuments.size+T.modifiedDocuments.size+T.removedDocuments.size>0}(p,y,h)&&a.push(n.Ur.updateTargetData(i,y))});let l=Br(),c=me();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))}),a.push(VM(i,o,e.documentUpdates).next(h=>{l=h.Ps,c=h.Is})),!r.isEqual(ae.min())){const h=n.Ur.getLastRemoteSnapshotVersion(i).next(f=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(h)}return F.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,c)).next(()=>l)}).then(i=>(n.os=s,i))}function VM(t,e,n){let r=me(),s=me();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Br();return n.forEach((a,l)=>{const c=i.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(ae.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):G("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Ps:o,Is:s}})}function jM(t,e){const n=ce(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function UM(t,e){const n=ce(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,F.resolve(s)):n.Ur.allocateTargetId(r).next(o=>(s=new Rs(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Fm(t,e,n){const r=ce(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!xu(o))throw o;G("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function W0(t,e,n){const r=ce(t);let s=ae.min(),i=me();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,h){const f=ce(l),p=f._s.get(h);return p!==void 0?F.resolve(f.os.get(p)):f.Ur.getTargetData(c,h)}(r,o,sr(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?s:ae.min(),n?i:me())).next(a=>(FM(r,AD(e),a),{documents:a,Ts:i})))}function FM(t,e,n){let r=t.us.get(e)||ae.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class K0{constructor(){this.activeTargetIds=MD()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class BM{constructor(){this.so=new K0,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new K0,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $M{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q0{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){G("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){G("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Tc=null;function lp(){return Tc===null?Tc=function(){return 268435456+Math.round(2147483648*Math.random())}():Tc++,"0x"+Tc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zM={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qM{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kt="WebChannelConnection";class HM extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,o){const a=lp(),l=this.xo(n,r.toUriEncodedString());G("RestConnection",`Sending RPC '${n}' ${a}:`,l,s);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,i,o),this.No(n,l,c,s).then(h=>(G("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw Zo("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",l,"request:",s),h})}Lo(n,r,s,i,o,a){return this.Mo(n,r,s,i,o)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ga}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}xo(n,r){const s=zM[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=lp();return new Promise((o,a)=>{const l=new YR;l.setWithCredentials(!0),l.listenOnce(ZR.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Kc.NO_ERROR:const h=l.getResponseJson();G(kt,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(h)),o(h);break;case Kc.TIMEOUT:G(kt,`RPC '${e}' ${i} timed out`),a(new te(B.DEADLINE_EXCEEDED,"Request time out"));break;case Kc.HTTP_ERROR:const f=l.getStatus();if(G(kt,`RPC '${e}' ${i} failed with status:`,f,"response text:",l.getResponseText()),f>0){let p=l.getResponseJson();Array.isArray(p)&&(p=p[0]);const y=p==null?void 0:p.error;if(y&&y.status&&y.message){const w=function(R){const T=R.toLowerCase().replace(/_/g,"-");return Object.values(B).indexOf(T)>=0?T:B.UNKNOWN}(y.status);a(new te(w,y.message))}else a(new te(B.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new te(B.UNAVAILABLE,"Connection failed."));break;default:oe()}}finally{G(kt,`RPC '${e}' ${i} completed.`)}});const c=JSON.stringify(s);G(kt,`RPC '${e}' ${i} sending request:`,s),l.send(n,"POST",c,r,15)})}Bo(e,n,r){const s=lp(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=nI(),a=tI(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const h=i.join("");G(kt,`Creating RPC '${e}' stream ${s}: ${h}`,l);const f=o.createWebChannel(h,l);let p=!1,y=!1;const w=new qM({Io:R=>{y?G(kt,`Not sending because RPC '${e}' stream ${s} is closed:`,R):(p||(G(kt,`Opening RPC '${e}' stream ${s} transport.`),f.open(),p=!0),G(kt,`RPC '${e}' stream ${s} sending:`,R),f.send(R))},To:()=>f.close()}),b=(R,T,v)=>{R.listen(T,x=>{try{v(x)}catch(C){setTimeout(()=>{throw C},0)}})};return b(f,sl.EventType.OPEN,()=>{y||(G(kt,`RPC '${e}' stream ${s} transport opened.`),w.yo())}),b(f,sl.EventType.CLOSE,()=>{y||(y=!0,G(kt,`RPC '${e}' stream ${s} transport closed`),w.So())}),b(f,sl.EventType.ERROR,R=>{y||(y=!0,Zo(kt,`RPC '${e}' stream ${s} transport errored:`,R),w.So(new te(B.UNAVAILABLE,"The operation could not be completed")))}),b(f,sl.EventType.MESSAGE,R=>{var T;if(!y){const v=R.data[0];ke(!!v);const x=v,C=x.error||((T=x[0])===null||T===void 0?void 0:T.error);if(C){G(kt,`RPC '${e}' stream ${s} received error:`,C);const M=C.status;let U=function(S){const k=tt[S];if(k!==void 0)return bI(k)}(M),I=C.message;U===void 0&&(U=B.INTERNAL,I="Unknown error status: "+M+" with message "+C.message),y=!0,w.So(new te(U,I)),f.close()}else G(kt,`RPC '${e}' stream ${s} received:`,v),w.bo(v)}}),b(a,eI.STAT_EVENT,R=>{R.stat===Am.PROXY?G(kt,`RPC '${e}' stream ${s} detected buffering proxy`):R.stat===Am.NOPROXY&&G(kt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{w.wo()},0),w}}function up(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $d(t){return new tM(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UI{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&G("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FI{constructor(e,n,r,s,i,o,a,l){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new UI(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===B.RESOURCE_EXHAUSTED?(Fr(n.toString()),Fr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===B.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new te(B.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return G("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(G("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class WM extends FI{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=sM(this.serializer,e),r=function(i){if(!("targetChange"in i))return ae.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?ae.min():o.readTime?ir(o.readTime):ae.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Um(this.serializer),n.addTarget=function(i,o){let a;const l=o.target;if(a=Lm(l)?{documents:aM(i,l)}:{query:lM(i,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=AI(i,o.resumeToken);const c=Mm(i,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(ae.min())>0){a.readTime=Kh(i,o.snapshotVersion.toTimestamp());const c=Mm(i,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=cM(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Um(this.serializer),n.removeTarget=e,this.a_(n)}}class KM extends FI{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return ke(!!e.streamToken),this.lastStreamToken=e.streamToken,ke(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){ke(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=oM(e.writeResults,e.commitTime),r=ir(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Um(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>iM(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QM extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new te(B.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Mo(e,Vm(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new te(B.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,Vm(n,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new te(B.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class GM{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Fr(n),this.D_=!1):G("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JM{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(o=>{r.enqueueAndForget(async()=>{Wi(this)&&(G("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=ce(l);c.L_.add(4),await bu(c),c.q_.set("Unknown"),c.L_.delete(4),await zd(c)}(this))})}),this.q_=new GM(r,s)}}async function zd(t){if(Wi(t))for(const e of t.B_)await e(!0)}async function bu(t){for(const e of t.B_)await e(!1)}function BI(t,e){const n=ce(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Yy(n)?Xy(n):_a(n).r_()&&Jy(n,e))}function Gy(t,e){const n=ce(t),r=_a(n);n.N_.delete(e),r.r_()&&$I(n,e),n.N_.size===0&&(r.r_()?r.o_():Wi(n)&&n.q_.set("Unknown"))}function Jy(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ae.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}_a(t).A_(e)}function $I(t,e){t.Q_.xe(e),_a(t).R_(e)}function Xy(t){t.Q_=new XD({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),_a(t).start(),t.q_.v_()}function Yy(t){return Wi(t)&&!_a(t).n_()&&t.N_.size>0}function Wi(t){return ce(t).L_.size===0}function zI(t){t.Q_=void 0}async function XM(t){t.q_.set("Online")}async function YM(t){t.N_.forEach((e,n)=>{Jy(t,e)})}async function ZM(t,e){zI(t),Yy(t)?(t.q_.M_(e),Xy(t)):t.q_.set("Unknown")}async function eV(t,e,n){if(t.q_.set("Online"),e instanceof CI&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.N_.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.N_.delete(a),s.Q_.removeTarget(a))}(t,e)}catch(r){G("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Qh(t,r)}else if(e instanceof Jc?t.Q_.Ke(e):e instanceof kI?t.Q_.He(e):t.Q_.We(e),!n.isEqual(ae.min()))try{const r=await jI(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.Q_.rt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const h=i.N_.get(c);h&&i.N_.set(c,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const h=i.N_.get(l);if(!h)return;i.N_.set(l,h.withResumeToken(Tt.EMPTY_BYTE_STRING,h.snapshotVersion)),$I(i,l);const f=new Rs(h.target,l,c,h.sequenceNumber);Jy(i,f)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){G("RemoteStore","Failed to raise snapshot:",r),await Qh(t,r)}}async function Qh(t,e,n){if(!xu(e))throw e;t.L_.add(1),await bu(t),t.q_.set("Offline"),n||(n=()=>jI(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{G("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await zd(t)})}function qI(t,e){return e().catch(n=>Qh(t,n,e))}async function qd(t){const e=ce(t),n=Ks(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;tV(e);)try{const s=await jM(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,nV(e,s)}catch(s){await Qh(e,s)}HI(e)&&WI(e)}function tV(t){return Wi(t)&&t.O_.length<10}function nV(t,e){t.O_.push(e);const n=Ks(t);n.r_()&&n.V_&&n.m_(e.mutations)}function HI(t){return Wi(t)&&!Ks(t).n_()&&t.O_.length>0}function WI(t){Ks(t).start()}async function rV(t){Ks(t).p_()}async function sV(t){const e=Ks(t);for(const n of t.O_)e.m_(n.mutations)}async function iV(t,e,n){const r=t.O_.shift(),s=zy.from(r,e,n);await qI(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await qd(t)}async function oV(t,e){e&&Ks(t).V_&&await async function(r,s){if(function(o){return QD(o)&&o!==B.ABORTED}(s.code)){const i=r.O_.shift();Ks(r).s_(),await qI(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await qd(r)}}(t,e),HI(t)&&WI(t)}async function G0(t,e){const n=ce(t);n.asyncQueue.verifyOperationInProgress(),G("RemoteStore","RemoteStore received new credentials");const r=Wi(n);n.L_.add(3),await bu(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await zd(n)}async function aV(t,e){const n=ce(t);e?(n.L_.delete(2),await zd(n)):e||(n.L_.add(2),await bu(n),n.q_.set("Unknown"))}function _a(t){return t.K_||(t.K_=function(n,r,s){const i=ce(n);return i.w_(),new WM(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:XM.bind(null,t),Ro:YM.bind(null,t),mo:ZM.bind(null,t),d_:eV.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Yy(t)?Xy(t):t.q_.set("Unknown")):(await t.K_.stop(),zI(t))})),t.K_}function Ks(t){return t.U_||(t.U_=function(n,r,s){const i=ce(n);return i.w_(),new KM(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:rV.bind(null,t),mo:oV.bind(null,t),f_:sV.bind(null,t),g_:iV.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await qd(t)):(await t.U_.stop(),t.O_.length>0&&(G("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zy{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new js,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new Zy(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new te(B.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ev(t,e){if(Fr("AsyncQueue",`${e}: ${t}`),xu(t))return new te(B.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{constructor(e){this.comparator=e?(n,r)=>e(n,r)||ne.comparator(n.key,r.key):(n,r)=>ne.comparator(n.key,r.key),this.keyedMap=il(),this.sortedSet=new He(this.comparator)}static emptySet(e){return new Co(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Co)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Co;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J0{constructor(){this.W_=new He(ne.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):oe():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class sa{constructor(e,n,r,s,i,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new sa(e,n,Co.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Vd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lV{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class uV{constructor(){this.queries=X0(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=ce(n),i=s.queries;s.queries=X0(),i.forEach((o,a)=>{for(const l of a.j_)l.onError(r)})})(this,new te(B.ABORTED,"Firestore shutting down"))}}function X0(){return new va(t=>pI(t),Vd)}async function cV(t,e){const n=ce(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new lV,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=ev(o,`Initialization of query '${no(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&tv(n)}async function hV(t,e){const n=ce(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function dV(t,e){const n=ce(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.j_)a.X_(s)&&(r=!0);o.z_=s}}r&&tv(n)}function fV(t,e,n){const r=ce(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function tv(t){t.Y_.forEach(e=>{e.next()})}var Bm,Y0;(Y0=Bm||(Bm={})).ea="default",Y0.Cache="cache";class pV{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new sa(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=sa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Bm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KI{constructor(e){this.key=e}}class QI{constructor(e){this.key=e}}class mV{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=me(),this.mutatedKeys=me(),this.Aa=mI(e),this.Ra=new Co(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new J0,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,f)=>{const p=s.get(h),y=jd(this.query,f)?f:null,w=!!p&&this.mutatedKeys.has(p.key),b=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let R=!1;p&&y?p.data.isEqual(y.data)?w!==b&&(r.track({type:3,doc:y}),R=!0):this.ga(p,y)||(r.track({type:2,doc:y}),R=!0,(l&&this.Aa(y,l)>0||c&&this.Aa(y,c)<0)&&(a=!0)):!p&&y?(r.track({type:0,doc:y}),R=!0):p&&!y&&(r.track({type:1,doc:p}),R=!0,(l||c)&&(a=!0)),R&&(y?(o=o.add(y),i=b?i.add(h):i.delete(h)):(o=o.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),i=i.delete(h.key),r.track({type:1,doc:h})}return{Ra:o,fa:r,ns:a,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((h,f)=>function(y,w){const b=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return oe()}};return b(y)-b(w)}(h.type,f.type)||this.Aa(h.doc,f.doc)),this.pa(r),s=s!=null&&s;const a=n&&!s?this.ya():[],l=this.da.size===0&&this.current&&!s?1:0,c=l!==this.Ea;return this.Ea=l,o.length!==0||c?{snapshot:new sa(this.query,e.Ra,i,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new J0,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=me(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new QI(r))}),this.da.forEach(r=>{e.has(r)||n.push(new KI(r))}),n}ba(e){this.Ta=e.Ts,this.da=me();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return sa.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class gV{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class yV{constructor(e){this.key=e,this.va=!1}}class vV{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new va(a=>pI(a),Vd),this.Ma=new Map,this.xa=new Set,this.Oa=new He(ne.comparator),this.Na=new Map,this.La=new Wy,this.Ba={},this.ka=new Map,this.qa=ra.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function _V(t,e,n=!0){const r=e1(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await GI(r,e,n,!0),s}async function wV(t,e){const n=e1(t);await GI(n,e,!0,!1)}async function GI(t,e,n,r){const s=await UM(t.localStore,sr(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return r&&(a=await EV(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&BI(t.remoteStore,s),a}async function EV(t,e,n,r,s){t.Ka=(f,p,y)=>async function(b,R,T,v){let x=R.view.ma(T);x.ns&&(x=await W0(b.localStore,R.query,!1).then(({documents:I})=>R.view.ma(I,x)));const C=v&&v.targetChanges.get(R.targetId),M=v&&v.targetMismatches.get(R.targetId)!=null,U=R.view.applyChanges(x,b.isPrimaryClient,C,M);return eE(b,R.targetId,U.wa),U.snapshot}(t,f,p,y);const i=await W0(t.localStore,e,!0),o=new mV(e,i.Ts),a=o.ma(i.documents),l=Iu.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),c=o.applyChanges(a,t.isPrimaryClient,l);eE(t,n,c.wa);const h=new gV(e,n,o);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}async function TV(t,e,n){const r=ce(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(o=>!Vd(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Fm(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Gy(r.remoteStore,s.targetId),$m(r,s.targetId)}).catch(Su)):($m(r,s.targetId),await Fm(r.localStore,s.targetId,!0))}async function SV(t,e){const n=ce(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Gy(n.remoteStore,r.targetId))}async function xV(t,e,n){const r=PV(t);try{const s=await function(o,a){const l=ce(o),c=ct.now(),h=a.reduce((y,w)=>y.add(w.key),me());let f,p;return l.persistence.runTransaction("Locally write mutations","readwrite",y=>{let w=Br(),b=me();return l.cs.getEntries(y,h).next(R=>{w=R,w.forEach((T,v)=>{v.isValidDocument()||(b=b.add(T))})}).next(()=>l.localDocuments.getOverlayedDocuments(y,w)).next(R=>{f=R;const T=[];for(const v of a){const x=zD(v,f.get(v.key).overlayedDocument);x!=null&&T.push(new Hi(v.key,x,aI(x.value.mapValue),Ar.exists(!0)))}return l.mutationQueue.addMutationBatch(y,c,T,a)}).next(R=>{p=R;const T=R.applyToLocalDocumentSet(f,b);return l.documentOverlayCache.saveOverlays(y,R.batchId,T)})}).then(()=>({batchId:p.batchId,changes:yI(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,l){let c=o.Ba[o.currentUser.toKey()];c||(c=new He(xe)),c=c.insert(a,l),o.Ba[o.currentUser.toKey()]=c}(r,s.batchId,n),await ku(r,s.changes),await qd(r.remoteStore)}catch(s){const i=ev(s,"Failed to persist write");n.reject(i)}}async function JI(t,e){const n=ce(t);try{const r=await MM(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Na.get(i);o&&(ke(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?ke(o.va):s.removedDocuments.size>0&&(ke(o.va),o.va=!1))}),await ku(n,r,e)}catch(r){await Su(r)}}function Z0(t,e,n){const r=ce(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,o)=>{const a=o.view.Z_(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=ce(o);l.onlineState=a;let c=!1;l.queries.forEach((h,f)=>{for(const p of f.j_)p.Z_(a)&&(c=!0)}),c&&tv(l)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function RV(t,e,n){const r=ce(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let o=new He(ne.comparator);o=o.insert(i,Pt.newNoDocument(i,ae.min()));const a=me().add(i),l=new Bd(ae.min(),new Map,new He(xe),o,a);await JI(r,l),r.Oa=r.Oa.remove(i),r.Na.delete(e),nv(r)}else await Fm(r.localStore,e,!1).then(()=>$m(r,e,n)).catch(Su)}async function IV(t,e){const n=ce(t),r=e.batch.batchId;try{const s=await DM(n.localStore,e);YI(n,r,null),XI(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ku(n,s)}catch(s){await Su(s)}}async function bV(t,e,n){const r=ce(t);try{const s=await function(o,a){const l=ce(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return l.mutationQueue.lookupMutationBatch(c,a).next(f=>(ke(f!==null),h=f.keys(),l.mutationQueue.removeMutationBatch(c,f))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>l.localDocuments.getDocuments(c,h))})}(r.localStore,e);YI(r,e,n),XI(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await ku(r,s)}catch(s){await Su(s)}}function XI(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function YI(t,e,n){const r=ce(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function $m(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||ZI(t,r)})}function ZI(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Gy(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),nv(t))}function eE(t,e,n){for(const r of n)r instanceof KI?(t.La.addReference(r.key,e),kV(t,r)):r instanceof QI?(G("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||ZI(t,r.key)):oe()}function kV(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(G("SyncEngine","New document in limbo: "+n),t.xa.add(r),nv(t))}function nv(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new ne(Je.fromString(e)),r=t.qa.next();t.Na.set(r,new yV(n)),t.Oa=t.Oa.insert(n,r),BI(t.remoteStore,new Rs(sr(By(n.path)),r,"TargetPurposeLimboResolution",Dy.oe))}}async function ku(t,e,n){const r=ce(t),s=[],i=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,l)=>{o.push(r.Ka(l,e,n).then(c=>{var h;if((c||n)&&r.isPrimaryClient){const f=c?!c.fromCache:(h=n==null?void 0:n.targetChanges.get(l.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(l.targetId,f?"current":"not-current")}if(c){s.push(c);const f=Qy.Wi(l.targetId,c);i.push(f)}}))}),await Promise.all(o),r.Ca.d_(s),await async function(l,c){const h=ce(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>F.forEach(c,p=>F.forEach(p.$i,y=>h.persistence.referenceDelegate.addReference(f,p.targetId,y)).next(()=>F.forEach(p.Ui,y=>h.persistence.referenceDelegate.removeReference(f,p.targetId,y)))))}catch(f){if(!xu(f))throw f;G("LocalStore","Failed to update sequence numbers: "+f)}for(const f of c){const p=f.targetId;if(!f.fromCache){const y=h.os.get(p),w=y.snapshotVersion,b=y.withLastLimboFreeSnapshotVersion(w);h.os=h.os.insert(p,b)}}}(r.localStore,i))}async function CV(t,e){const n=ce(t);if(!n.currentUser.isEqual(e)){G("SyncEngine","User change. New user:",e.toKey());const r=await VI(n.localStore,e);n.currentUser=e,function(i,o){i.ka.forEach(a=>{a.forEach(l=>{l.reject(new te(B.CANCELLED,o))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ku(n,r.hs)}}function AV(t,e){const n=ce(t),r=n.Na.get(e);if(r&&r.va)return me().add(r.key);{let s=me();const i=n.Ma.get(e);if(!i)return s;for(const o of i){const a=n.Fa.get(o);s=s.unionWith(a.view.Va)}return s}}function e1(t){const e=ce(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=JI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=AV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=RV.bind(null,e),e.Ca.d_=dV.bind(null,e.eventManager),e.Ca.$a=fV.bind(null,e.eventManager),e}function PV(t){const e=ce(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=IV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=bV.bind(null,e),e}class Gh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=$d(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return LM(this.persistence,new NM,e.initialUser,this.serializer)}Ga(e){return new CM(Ky.Zr,this.serializer)}Wa(e){return new BM}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Gh.provider={build:()=>new Gh};class zm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Z0(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=CV.bind(null,this.syncEngine),await aV(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new uV}()}createDatastore(e){const n=$d(e.databaseInfo.databaseId),r=function(i){return new HM(i)}(e.databaseInfo);return function(i,o,a,l){return new QM(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new JM(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>Z0(this.syncEngine,n,0),function(){return Q0.D()?new Q0:new $M}())}createSyncEngine(e,n){return function(s,i,o,a,l,c,h){const f=new vV(s,i,o,a,l,c);return h&&(f.Qa=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=ce(s);G("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await bu(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}zm.provider={build:()=>new zm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NV{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Fr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OV{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Ct.UNAUTHENTICATED,this.clientId=sI.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{G("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(G("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new js;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=ev(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function cp(t,e){t.asyncQueue.verifyOperationInProgress(),G("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await VI(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function tE(t,e){t.asyncQueue.verifyOperationInProgress();const n=await LV(t);G("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>G0(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>G0(e.remoteStore,s)),t._onlineComponents=e}async function LV(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){G("FirestoreClient","Using user provided OfflineComponentProvider");try{await cp(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===B.FAILED_PRECONDITION||s.code===B.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Zo("Error using user provided cache. Falling back to memory cache: "+n),await cp(t,new Gh)}}else G("FirestoreClient","Using default OfflineComponentProvider"),await cp(t,new Gh);return t._offlineComponents}async function t1(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(G("FirestoreClient","Using user provided OnlineComponentProvider"),await tE(t,t._uninitializedComponentsProvider._online)):(G("FirestoreClient","Using default OnlineComponentProvider"),await tE(t,new zm))),t._onlineComponents}function DV(t){return t1(t).then(e=>e.syncEngine)}async function MV(t){const e=await t1(t),n=e.eventManager;return n.onListen=_V.bind(null,e.syncEngine),n.onUnlisten=TV.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=wV.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=SV.bind(null,e.syncEngine),n}function VV(t,e,n={}){const r=new js;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const h=new NV({next:p=>{h.Za(),o.enqueueAndForget(()=>hV(i,f));const y=p.docs.has(a);!y&&p.fromCache?c.reject(new te(B.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&p.fromCache&&l&&l.source==="server"?c.reject(new te(B.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(p)},error:p=>c.reject(p)}),f=new pV(By(a.path),h,{includeMetadataChanges:!0,_a:!0});return cV(i,f)}(await MV(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n1(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nE=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jV(t,e,n){if(!n)throw new te(B.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function UV(t,e,n,r){if(e===!0&&r===!0)throw new te(B.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function rE(t){if(!ne.isDocumentKey(t))throw new te(B.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function rv(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":oe()}function eu(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new te(B.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=rv(t);throw new te(B.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sE{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new te(B.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new te(B.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}UV("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=n1((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new te(B.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new te(B.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new te(B.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class sv{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new sE({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new te(B.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new te(B.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new sE(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new XL;switch(r.type){case"firstParty":return new tD(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new te(B.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=nE.get(n);r&&(G("ComponentProvider","Removing Datastore"),nE.delete(n),r.terminate())}(this),Promise.resolve()}}function FV(t,e,n,r={}){var s;const i=(t=eu(t,sv))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&Zo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=Ct.MOCK_USER;else{a=cR(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new te(B.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Ct(c)}t._authCredentials=new YL(new rI(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let BV=class r1{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new r1(this.firestore,e,this._query)}};class Sn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new tu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Sn(this.firestore,e,this._key)}}class tu extends BV{constructor(e,n,r){super(e,n,By(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Sn(this.firestore,null,new ne(e))}withConverter(e){return new tu(this.firestore,e,this._path)}}function iE(t,e,...n){if(t=qe(t),arguments.length===1&&(e=sI.newId()),jV("doc","path",e),t instanceof sv){const r=Je.fromString(e,...n);return rE(r),new Sn(t,null,new ne(r))}{if(!(t instanceof Sn||t instanceof tu))throw new te(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Je.fromString(e,...n));return rE(r),new Sn(t.firestore,t instanceof tu?t.converter:null,new ne(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oE{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new UI(this,"async_queue_retry"),this.Vu=()=>{const r=up();r&&G("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=up();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=up();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new js;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!xu(e))throw e;G("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Fr("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=Zy.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&oe()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class iv extends sv{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new oE,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new oE(e),this._firestoreClient=void 0,await e}}}function $V(t,e){const n=typeof t=="object"?t:wy(),r=typeof t=="string"?t:"(default)",s=Pd(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=aR("firestore");i&&FV(s,...i)}return s}function s1(t){if(t._terminated)throw new te(B.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||zV(t),t._firestoreClient}function zV(t){var e,n,r;const s=t._freezeSettings(),i=function(a,l,c,h){return new pD(a,l,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,n1(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new OV(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ia(Tt.fromBase64String(e))}catch(n){throw new te(B.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ia(Tt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ov{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new te(B.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new vt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i1{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class av{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new te(B.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new te(B.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return xe(this._lat,e._lat)||xe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lv{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qV=/^__.*__$/;class HV{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Hi(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ru(e,this.data,n,this.fieldTransforms)}}function o1(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw oe()}}class uv{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new uv(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Jh(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(o1(this.Cu)&&qV.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class WV{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||$d(e)}Qu(e,n,r,s=!1){return new uv({Cu:e,methodName:n,qu:r,path:vt.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function KV(t){const e=t._freezeSettings(),n=$d(t._databaseId);return new WV(t._databaseId,!!e.ignoreUndefinedProperties,n)}function QV(t,e,n,r,s,i={}){const o=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);c1("Data must be an object, but it was:",o,r);const a=l1(r,o);let l,c;if(i.merge)l=new Mn(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const h=[];for(const f of i.mergeFields){const p=GV(e,f,n);if(!o.contains(p))throw new te(B.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);XV(h,p)||h.push(p)}l=new Mn(h),c=o.fieldTransforms.filter(f=>l.covers(f.field))}else l=null,c=o.fieldTransforms;return new HV(new wn(a),l,c)}function a1(t,e){if(u1(t=qe(t)))return c1("Unsupported field value:",e,t),l1(t,e);if(t instanceof i1)return function(r,s){if(!o1(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let l=a1(a,s.Lu(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=qe(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return VD(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=ct.fromDate(r);return{timestampValue:Kh(s.serializer,i)}}if(r instanceof ct){const i=new ct(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Kh(s.serializer,i)}}if(r instanceof av)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ia)return{bytesValue:AI(s.serializer,r._byteString)};if(r instanceof Sn){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Hy(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof lv)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return $y(a.serializer,l)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${rv(r)}`)}(t,e)}function l1(t,e){const n={};return iI(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ya(t,(r,s)=>{const i=a1(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function u1(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ct||t instanceof av||t instanceof ia||t instanceof Sn||t instanceof i1||t instanceof lv)}function c1(t,e,n){if(!u1(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=rv(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function GV(t,e,n){if((e=qe(e))instanceof ov)return e._internalPath;if(typeof e=="string")return h1(t,e);throw Jh("Field path arguments must be of type string or ",t,!1,void 0,n)}const JV=new RegExp("[~\\*/\\[\\]]");function h1(t,e,n){if(e.search(JV)>=0)throw Jh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ov(...e.split("."))._internalPath}catch{throw Jh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Jh(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new te(B.INVALID_ARGUMENT,a+t+l)}function XV(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d1{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Sn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new YV(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(f1("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class YV extends d1{data(){return super.data()}}function f1(t,e){return typeof e=="string"?h1(t,e):e instanceof ov?e._internalPath:e._delegate._internalPath}class ZV{convertValue(e,n="none"){switch(Di(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ye(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Li(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw oe()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ya(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>Ye(o.doubleValue));return new lv(i)}convertGeoPoint(e){return new av(Ye(e.latitude),Ye(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Vy(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Gl(e));default:return null}}convertTimestamp(e){const n=Ws(e);return new ct(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Je.fromString(e);ke(MI(r));const s=new Jl(r.get(1),r.get(3)),i=new ne(r.popFirst(5));return s.isEqual(n)||Fr(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ej(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tj{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class p1 extends d1{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new nj(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(f1("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class nj extends p1{data(e={}){return super.data(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rj(t){t=eu(t,Sn);const e=eu(t.firestore,iv);return VV(s1(e),t._key).then(n=>aj(e,t,n))}class sj extends ZV{constructor(e){super(),this.firestore=e}convertBytes(e){return new ia(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Sn(this.firestore,null,n)}}function ij(t,e,n){t=eu(t,Sn);const r=eu(t.firestore,iv),s=ej(t.converter,e,n);return oj(r,[QV(KV(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Ar.none())])}function oj(t,e){return function(r,s){const i=new js;return r.asyncQueue.enqueueAndForget(async()=>xV(await DV(r),s,i)),i.promise}(s1(t),e)}function aj(t,e,n){const r=n.docs.get(e._key),s=new sj(t);return new p1(t,s,e._key,r,new tj(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){ga=s})(qi),Ai(new qs("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new iv(new ZL(r.getProvider("auth-internal")),new rD(r.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new te(B.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Jl(c.options.projectId,h)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),tr(R0,"4.7.3",e),tr(R0,"4.7.3","esm2017")})();const lj={apiKey:"AIzaSyAM8X0Zr8mHo6BLsnF6bEWZV5wtRx2A5bg",authDomain:"wego-a91a4.firebaseapp.com",projectId:"wego-a91a4",storageBucket:"wego-a91a4.appspot.com",messagingSenderId:"820437029637",appId:"1:820437029637:web:d9238d05591017d2001d6c",measurementId:"G-JWKEJBVBG1"},m1=fR(lj),$r=GL(m1),aE=$V(m1),g1=L.createContext({user:null,loading:!0});function uj({children:t}){const[e,n]=L.useState(null),[r,s]=L.useState(!0);return L.useEffect(()=>(D2($r,$R).catch(()=>{}),j2($r,o=>{n(o??null),s(!1)})),[]),g.jsx(g1.Provider,{value:{user:e,loading:r},children:t})}function Cu(){return L.useContext(g1)}function y1(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=y1(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function cj(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=y1(t))&&(r&&(r+=" "),r+=e);return r}var wa=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Mi=typeof window>"u"||"Deno"in globalThis;function zt(){}function hj(t,e){return typeof t=="function"?t(e):t}function qm(t){return typeof t=="number"&&t>=0&&t!==1/0}function v1(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Us(t,e){return typeof t=="function"?t(e):t}function gn(t,e){return typeof t=="function"?t(e):t}function lE(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:a}=t;if(o){if(r){if(e.queryHash!==cv(o,e.options))return!1}else if(!nu(e.queryKey,o))return!1}if(n!=="all"){const l=e.isActive();if(n==="active"&&!l||n==="inactive"&&l)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||s&&s!==e.state.fetchStatus||i&&!i(e))}function uE(t,e){const{exact:n,status:r,predicate:s,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(n){if(Vi(e.options.mutationKey)!==Vi(i))return!1}else if(!nu(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function cv(t,e){return((e==null?void 0:e.queryKeyHashFn)||Vi)(t)}function Vi(t){return JSON.stringify(t,(e,n)=>Hm(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function nu(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>nu(t[n],e[n])):!1}function _1(t,e){if(t===e)return t;const n=cE(t)&&cE(e);if(n||Hm(t)&&Hm(e)){const r=n?t:Object.keys(t),s=r.length,i=n?e:Object.keys(e),o=i.length,a=n?[]:{},l=new Set(r);let c=0;for(let h=0;h<o;h++){const f=n?h:i[h];(!n&&l.has(f)||n)&&t[f]===void 0&&e[f]===void 0?(a[f]=void 0,c++):(a[f]=_1(t[f],e[f]),a[f]===t[f]&&t[f]!==void 0&&c++)}return s===o&&c===s?t:a}return e}function Xh(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function cE(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Hm(t){if(!hE(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!hE(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function hE(t){return Object.prototype.toString.call(t)==="[object Object]"}function dj(t){return new Promise(e=>{setTimeout(e,t)})}function Wm(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?_1(t,e):e}function fj(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function pj(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var hv=Symbol();function w1(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===hv?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function E1(t,e){return typeof t=="function"?t(...e):!!t}var di,ds,Po,ET,mj=(ET=class extends wa{constructor(){super();ee(this,di);ee(this,ds);ee(this,Po);W(this,Po,e=>{if(!Mi&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){P(this,ds)||this.setEventListener(P(this,Po))}onUnsubscribe(){var e;this.hasListeners()||((e=P(this,ds))==null||e.call(this),W(this,ds,void 0))}setEventListener(e){var n;W(this,Po,e),(n=P(this,ds))==null||n.call(this),W(this,ds,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){P(this,di)!==e&&(W(this,di,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof P(this,di)=="boolean"?P(this,di):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},di=new WeakMap,ds=new WeakMap,Po=new WeakMap,ET),dv=new mj,No,fs,Oo,TT,gj=(TT=class extends wa{constructor(){super();ee(this,No,!0);ee(this,fs);ee(this,Oo);W(this,Oo,e=>{if(!Mi&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){P(this,fs)||this.setEventListener(P(this,Oo))}onUnsubscribe(){var e;this.hasListeners()||((e=P(this,fs))==null||e.call(this),W(this,fs,void 0))}setEventListener(e){var n;W(this,Oo,e),(n=P(this,fs))==null||n.call(this),W(this,fs,e(this.setOnline.bind(this)))}setOnline(e){P(this,No)!==e&&(W(this,No,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return P(this,No)}},No=new WeakMap,fs=new WeakMap,Oo=new WeakMap,TT),Yh=new gj;function Km(){let t,e;const n=new Promise((s,i)=>{t=s,e=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}function yj(t){return Math.min(1e3*2**t,3e4)}function T1(t){return(t??"online")==="online"?Yh.isOnline():!0}var S1=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function x1(t){let e=!1,n=0,r;const s=Km(),i=()=>s.status!=="pending",o=b=>{var R;i()||(p(new S1(b)),(R=t.abort)==null||R.call(t))},a=()=>{e=!0},l=()=>{e=!1},c=()=>dv.isFocused()&&(t.networkMode==="always"||Yh.isOnline())&&t.canRun(),h=()=>T1(t.networkMode)&&t.canRun(),f=b=>{i()||(r==null||r(),s.resolve(b))},p=b=>{i()||(r==null||r(),s.reject(b))},y=()=>new Promise(b=>{var R;r=T=>{(i()||c())&&b(T)},(R=t.onPause)==null||R.call(t)}).then(()=>{var b;r=void 0,i()||(b=t.onContinue)==null||b.call(t)}),w=()=>{if(i())return;let b;const R=n===0?t.initialPromise:void 0;try{b=R??t.fn()}catch(T){b=Promise.reject(T)}Promise.resolve(b).then(f).catch(T=>{var U;if(i())return;const v=t.retry??(Mi?0:3),x=t.retryDelay??yj,C=typeof x=="function"?x(n,T):x,M=v===!0||typeof v=="number"&&n<v||typeof v=="function"&&v(n,T);if(e||!M){p(T);return}n++,(U=t.onFail)==null||U.call(t,n,T),dj(C).then(()=>c()?void 0:y()).then(()=>{e?p(T):w()})})};return{promise:s,status:()=>s.status,cancel:o,continue:()=>(r==null||r(),s),cancelRetry:a,continueRetry:l,canStart:h,start:()=>(h()?w():y().then(w),s)}}var vj=t=>setTimeout(t,0);function _j(){let t=[],e=0,n=a=>{a()},r=a=>{a()},s=vj;const i=a=>{e?t.push(a):s(()=>{n(a)})},o=()=>{const a=t;t=[],a.length&&s(()=>{r(()=>{a.forEach(l=>{n(l)})})})};return{batch:a=>{let l;e++;try{l=a()}finally{e--,e||o()}return l},batchCalls:a=>(...l)=>{i(()=>{a(...l)})},schedule:i,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{s=a}}}var at=_j(),fi,ST,R1=(ST=class{constructor(){ee(this,fi)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),qm(this.gcTime)&&W(this,fi,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Mi?1/0:5*60*1e3))}clearGcTimeout(){P(this,fi)&&(clearTimeout(P(this,fi)),W(this,fi,void 0))}},fi=new WeakMap,ST),Lo,Do,mn,pi,ht,lu,mi,Pn,vr,xT,wj=(xT=class extends R1{constructor(e){super();ee(this,Pn);ee(this,Lo);ee(this,Do);ee(this,mn);ee(this,pi);ee(this,ht);ee(this,lu);ee(this,mi);W(this,mi,!1),W(this,lu,e.defaultOptions),this.setOptions(e.options),this.observers=[],W(this,pi,e.client),W(this,mn,P(this,pi).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,W(this,Lo,Ej(this.options)),this.state=e.state??P(this,Lo),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=P(this,ht))==null?void 0:e.promise}setOptions(e){this.options={...P(this,lu),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&P(this,mn).remove(this)}setData(e,n){const r=Wm(this.state.data,e,this.options);return de(this,Pn,vr).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(e,n){de(this,Pn,vr).call(this,{type:"setState",state:e,setStateOptions:n})}cancel(e){var r,s;const n=(r=P(this,ht))==null?void 0:r.promise;return(s=P(this,ht))==null||s.cancel(e),n?n.then(zt).catch(zt):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(P(this,Lo))}isActive(){return this.observers.some(e=>gn(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===hv||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>Us(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!v1(this.state.dataUpdatedAt,e)}onFocus(){var n;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(n=P(this,ht))==null||n.continue()}onOnline(){var n;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(n=P(this,ht))==null||n.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),P(this,mn).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(P(this,ht)&&(P(this,mi)?P(this,ht).cancel({revert:!0}):P(this,ht).cancelRetry()),this.scheduleGc()),P(this,mn).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||de(this,Pn,vr).call(this,{type:"invalidate"})}async fetch(e,n){var l,c,h,f,p,y,w,b,R,T,v,x;if(this.state.fetchStatus!=="idle"&&((l=P(this,ht))==null?void 0:l.status())!=="rejected"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(P(this,ht))return P(this,ht).continueRetry(),P(this,ht).promise}if(e&&this.setOptions(e),!this.options.queryFn){const C=this.observers.find(M=>M.options.queryFn);C&&this.setOptions(C.options)}const r=new AbortController,s=C=>{Object.defineProperty(C,"signal",{enumerable:!0,get:()=>(W(this,mi,!0),r.signal)})},i=()=>{const C=w1(this.options,n),U=(()=>{const I={client:P(this,pi),queryKey:this.queryKey,meta:this.meta};return s(I),I})();return W(this,mi,!1),this.options.persister?this.options.persister(C,U,this):C(U)},a=(()=>{const C={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:P(this,pi),state:this.state,fetchFn:i};return s(C),C})();(c=this.options.behavior)==null||c.onFetch(a,this),W(this,Do,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((h=a.fetchOptions)==null?void 0:h.meta))&&de(this,Pn,vr).call(this,{type:"fetch",meta:(f=a.fetchOptions)==null?void 0:f.meta}),W(this,ht,x1({initialPromise:n==null?void 0:n.initialPromise,fn:a.fetchFn,abort:r.abort.bind(r),onFail:(C,M)=>{de(this,Pn,vr).call(this,{type:"failed",failureCount:C,error:M})},onPause:()=>{de(this,Pn,vr).call(this,{type:"pause"})},onContinue:()=>{de(this,Pn,vr).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0}));try{const C=await P(this,ht).start();if(C===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(C),(y=(p=P(this,mn).config).onSuccess)==null||y.call(p,C,this),(b=(w=P(this,mn).config).onSettled)==null||b.call(w,C,this.state.error,this),C}catch(C){if(C instanceof S1){if(C.silent)return P(this,ht).promise;if(C.revert)return this.setState({...P(this,Do),fetchStatus:"idle"}),this.state.data}throw de(this,Pn,vr).call(this,{type:"error",error:C}),(T=(R=P(this,mn).config).onError)==null||T.call(R,C,this),(x=(v=P(this,mn).config).onSettled)==null||x.call(v,this.state.data,C,this),C}finally{this.scheduleGc()}}},Lo=new WeakMap,Do=new WeakMap,mn=new WeakMap,pi=new WeakMap,ht=new WeakMap,lu=new WeakMap,mi=new WeakMap,Pn=new WeakSet,vr=function(e){const n=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...I1(r.data,this.options),fetchMeta:e.meta??null};case"success":const s={...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return W(this,Do,e.manual?s:void 0),s;case"error":const i=e.error;return{...r,error:i,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=n(this.state),at.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),P(this,mn).notify({query:this,type:"updated",action:e})})},xT);function I1(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:T1(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function Ej(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Wn,RT,Tj=(RT=class extends wa{constructor(e={}){super();ee(this,Wn);this.config=e,W(this,Wn,new Map)}build(e,n,r){const s=n.queryKey,i=n.queryHash??cv(s,n);let o=this.get(i);return o||(o=new wj({client:e,queryKey:s,queryHash:i,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){P(this,Wn).has(e.queryHash)||(P(this,Wn).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=P(this,Wn).get(e.queryHash);n&&(e.destroy(),n===e&&P(this,Wn).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){at.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return P(this,Wn).get(e)}getAll(){return[...P(this,Wn).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>lE(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>lE(e,r)):n}notify(e){at.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){at.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){at.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Wn=new WeakMap,RT),Kn,Ft,gi,Qn,es,IT,Sj=(IT=class extends R1{constructor(e){super();ee(this,Qn);ee(this,Kn);ee(this,Ft);ee(this,gi);this.mutationId=e.mutationId,W(this,Ft,e.mutationCache),W(this,Kn,[]),this.state=e.state||b1(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){P(this,Kn).includes(e)||(P(this,Kn).push(e),this.clearGcTimeout(),P(this,Ft).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){W(this,Kn,P(this,Kn).filter(n=>n!==e)),this.scheduleGc(),P(this,Ft).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){P(this,Kn).length||(this.state.status==="pending"?this.scheduleGc():P(this,Ft).remove(this))}continue(){var e;return((e=P(this,gi))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var i,o,a,l,c,h,f,p,y,w,b,R,T,v,x,C,M,U,I,_;const n=()=>{de(this,Qn,es).call(this,{type:"continue"})};W(this,gi,x1({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(S,k)=>{de(this,Qn,es).call(this,{type:"failed",failureCount:S,error:k})},onPause:()=>{de(this,Qn,es).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>P(this,Ft).canRun(this)}));const r=this.state.status==="pending",s=!P(this,gi).canStart();try{if(r)n();else{de(this,Qn,es).call(this,{type:"pending",variables:e,isPaused:s}),await((o=(i=P(this,Ft).config).onMutate)==null?void 0:o.call(i,e,this));const k=await((l=(a=this.options).onMutate)==null?void 0:l.call(a,e));k!==this.state.context&&de(this,Qn,es).call(this,{type:"pending",context:k,variables:e,isPaused:s})}const S=await P(this,gi).start();return await((h=(c=P(this,Ft).config).onSuccess)==null?void 0:h.call(c,S,e,this.state.context,this)),await((p=(f=this.options).onSuccess)==null?void 0:p.call(f,S,e,this.state.context)),await((w=(y=P(this,Ft).config).onSettled)==null?void 0:w.call(y,S,null,this.state.variables,this.state.context,this)),await((R=(b=this.options).onSettled)==null?void 0:R.call(b,S,null,e,this.state.context)),de(this,Qn,es).call(this,{type:"success",data:S}),S}catch(S){try{throw await((v=(T=P(this,Ft).config).onError)==null?void 0:v.call(T,S,e,this.state.context,this)),await((C=(x=this.options).onError)==null?void 0:C.call(x,S,e,this.state.context)),await((U=(M=P(this,Ft).config).onSettled)==null?void 0:U.call(M,void 0,S,this.state.variables,this.state.context,this)),await((_=(I=this.options).onSettled)==null?void 0:_.call(I,void 0,S,e,this.state.context)),S}finally{de(this,Qn,es).call(this,{type:"error",error:S})}}finally{P(this,Ft).runNext(this)}}},Kn=new WeakMap,Ft=new WeakMap,gi=new WeakMap,Qn=new WeakSet,es=function(e){const n=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),at.batch(()=>{P(this,Kn).forEach(r=>{r.onMutationUpdate(e)}),P(this,Ft).notify({mutation:this,type:"updated",action:e})})},IT);function b1(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Er,Nn,uu,bT,xj=(bT=class extends wa{constructor(e={}){super();ee(this,Er);ee(this,Nn);ee(this,uu);this.config=e,W(this,Er,new Set),W(this,Nn,new Map),W(this,uu,0)}build(e,n,r){const s=new Sj({mutationCache:this,mutationId:++Zu(this,uu)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){P(this,Er).add(e);const n=Sc(e);if(typeof n=="string"){const r=P(this,Nn).get(n);r?r.push(e):P(this,Nn).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(P(this,Er).delete(e)){const n=Sc(e);if(typeof n=="string"){const r=P(this,Nn).get(n);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&P(this,Nn).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=Sc(e);if(typeof n=="string"){const r=P(this,Nn).get(n),s=r==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===e}else return!0}runNext(e){var r;const n=Sc(e);if(typeof n=="string"){const s=(r=P(this,Nn).get(n))==null?void 0:r.find(i=>i!==e&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){at.batch(()=>{P(this,Er).forEach(e=>{this.notify({type:"removed",mutation:e})}),P(this,Er).clear(),P(this,Nn).clear()})}getAll(){return Array.from(P(this,Er))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>uE(n,r))}findAll(e={}){return this.getAll().filter(n=>uE(e,n))}notify(e){at.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return at.batch(()=>Promise.all(e.map(n=>n.continue().catch(zt))))}},Er=new WeakMap,Nn=new WeakMap,uu=new WeakMap,bT);function Sc(t){var e;return(e=t.options.scope)==null?void 0:e.id}function dE(t){return{onFetch:(e,n)=>{var h,f,p,y,w;const r=e.options,s=(p=(f=(h=e.fetchOptions)==null?void 0:h.meta)==null?void 0:f.fetchMore)==null?void 0:p.direction,i=((y=e.state.data)==null?void 0:y.pages)||[],o=((w=e.state.data)==null?void 0:w.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const c=async()=>{let b=!1;const R=x=>{Object.defineProperty(x,"signal",{enumerable:!0,get:()=>(e.signal.aborted?b=!0:e.signal.addEventListener("abort",()=>{b=!0}),e.signal)})},T=w1(e.options,e.fetchOptions),v=async(x,C,M)=>{if(b)return Promise.reject();if(C==null&&x.pages.length)return Promise.resolve(x);const I=(()=>{const N={client:e.client,queryKey:e.queryKey,pageParam:C,direction:M?"backward":"forward",meta:e.options.meta};return R(N),N})(),_=await T(I),{maxPages:S}=e.options,k=M?pj:fj;return{pages:k(x.pages,_,S),pageParams:k(x.pageParams,C,S)}};if(s&&i.length){const x=s==="backward",C=x?Rj:fE,M={pages:i,pageParams:o},U=C(r,M);a=await v(M,U,x)}else{const x=t??i.length;do{const C=l===0?o[0]??r.initialPageParam:fE(r,a);if(l>0&&C==null)break;a=await v(a,C),l++}while(l<x)}return a};e.options.persister?e.fetchFn=()=>{var b,R;return(R=(b=e.options).persister)==null?void 0:R.call(b,c,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=c}}}function fE(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function Rj(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var Qe,ps,ms,Mo,Vo,gs,jo,Uo,kT,Ij=(kT=class{constructor(t={}){ee(this,Qe);ee(this,ps);ee(this,ms);ee(this,Mo);ee(this,Vo);ee(this,gs);ee(this,jo);ee(this,Uo);W(this,Qe,t.queryCache||new Tj),W(this,ps,t.mutationCache||new xj),W(this,ms,t.defaultOptions||{}),W(this,Mo,new Map),W(this,Vo,new Map),W(this,gs,0)}mount(){Zu(this,gs)._++,P(this,gs)===1&&(W(this,jo,dv.subscribe(async t=>{t&&(await this.resumePausedMutations(),P(this,Qe).onFocus())})),W(this,Uo,Yh.subscribe(async t=>{t&&(await this.resumePausedMutations(),P(this,Qe).onOnline())})))}unmount(){var t,e;Zu(this,gs)._--,P(this,gs)===0&&((t=P(this,jo))==null||t.call(this),W(this,jo,void 0),(e=P(this,Uo))==null||e.call(this),W(this,Uo,void 0))}isFetching(t){return P(this,Qe).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return P(this,ps).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=P(this,Qe).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=P(this,Qe).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(Us(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return P(this,Qe).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=P(this,Qe).get(r.queryHash),i=s==null?void 0:s.state.data,o=hj(e,i);if(o!==void 0)return P(this,Qe).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return at.batch(()=>P(this,Qe).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=P(this,Qe).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=P(this,Qe);at.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=P(this,Qe);return at.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=at.batch(()=>P(this,Qe).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(zt).catch(zt)}invalidateQueries(t,e={}){return at.batch(()=>(P(this,Qe).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=at.batch(()=>P(this,Qe).findAll(t).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(zt)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(zt)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=P(this,Qe).build(this,e);return n.isStaleByTime(Us(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(zt).catch(zt)}fetchInfiniteQuery(t){return t.behavior=dE(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(zt).catch(zt)}ensureInfiniteQueryData(t){return t.behavior=dE(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Yh.isOnline()?P(this,ps).resumePausedMutations():Promise.resolve()}getQueryCache(){return P(this,Qe)}getMutationCache(){return P(this,ps)}getDefaultOptions(){return P(this,ms)}setDefaultOptions(t){W(this,ms,t)}setQueryDefaults(t,e){P(this,Mo).set(Vi(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...P(this,Mo).values()],n={};return e.forEach(r=>{nu(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){P(this,Vo).set(Vi(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...P(this,Vo).values()],n={};return e.forEach(r=>{nu(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...P(this,ms).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=cv(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===hv&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...P(this,ms).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){P(this,Qe).clear(),P(this,ps).clear()}},Qe=new WeakMap,ps=new WeakMap,ms=new WeakMap,Mo=new WeakMap,Vo=new WeakMap,gs=new WeakMap,jo=new WeakMap,Uo=new WeakMap,kT),Kt,ge,cu,Bt,yi,Fo,ys,vs,hu,Bo,$o,vi,_i,_s,zo,Ie,al,Qm,Gm,Jm,Xm,Ym,Zm,eg,k1,CT,bj=(CT=class extends wa{constructor(e,n){super();ee(this,Ie);ee(this,Kt);ee(this,ge);ee(this,cu);ee(this,Bt);ee(this,yi);ee(this,Fo);ee(this,ys);ee(this,vs);ee(this,hu);ee(this,Bo);ee(this,$o);ee(this,vi);ee(this,_i);ee(this,_s);ee(this,zo,new Set);this.options=n,W(this,Kt,e),W(this,vs,null),W(this,ys,Km()),this.options.experimental_prefetchInRender||P(this,ys).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(P(this,ge).addObserver(this),pE(P(this,ge),this.options)?de(this,Ie,al).call(this):this.updateResult(),de(this,Ie,Xm).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return tg(P(this,ge),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return tg(P(this,ge),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,de(this,Ie,Ym).call(this),de(this,Ie,Zm).call(this),P(this,ge).removeObserver(this)}setOptions(e){const n=this.options,r=P(this,ge);if(this.options=P(this,Kt).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof gn(this.options.enabled,P(this,ge))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");de(this,Ie,eg).call(this),P(this,ge).setOptions(this.options),n._defaulted&&!Xh(this.options,n)&&P(this,Kt).getQueryCache().notify({type:"observerOptionsUpdated",query:P(this,ge),observer:this});const s=this.hasListeners();s&&mE(P(this,ge),r,this.options,n)&&de(this,Ie,al).call(this),this.updateResult(),s&&(P(this,ge)!==r||gn(this.options.enabled,P(this,ge))!==gn(n.enabled,P(this,ge))||Us(this.options.staleTime,P(this,ge))!==Us(n.staleTime,P(this,ge)))&&de(this,Ie,Qm).call(this);const i=de(this,Ie,Gm).call(this);s&&(P(this,ge)!==r||gn(this.options.enabled,P(this,ge))!==gn(n.enabled,P(this,ge))||i!==P(this,_s))&&de(this,Ie,Jm).call(this,i)}getOptimisticResult(e){const n=P(this,Kt).getQueryCache().build(P(this,Kt),e),r=this.createResult(n,e);return Cj(this,r)&&(W(this,Bt,r),W(this,Fo,this.options),W(this,yi,P(this,ge).state)),r}getCurrentResult(){return P(this,Bt)}trackResult(e,n){return new Proxy(e,{get:(r,s)=>(this.trackProp(s),n==null||n(s),Reflect.get(r,s))})}trackProp(e){P(this,zo).add(e)}getCurrentQuery(){return P(this,ge)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const n=P(this,Kt).defaultQueryOptions(e),r=P(this,Kt).getQueryCache().build(P(this,Kt),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(e){return de(this,Ie,al).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),P(this,Bt)))}createResult(e,n){var S;const r=P(this,ge),s=this.options,i=P(this,Bt),o=P(this,yi),a=P(this,Fo),c=e!==r?e.state:P(this,cu),{state:h}=e;let f={...h},p=!1,y;if(n._optimisticResults){const k=this.hasListeners(),N=!k&&pE(e,n),O=k&&mE(e,r,n,s);(N||O)&&(f={...f,...I1(h.data,e.options)}),n._optimisticResults==="isRestoring"&&(f.fetchStatus="idle")}let{error:w,errorUpdatedAt:b,status:R}=f;y=f.data;let T=!1;if(n.placeholderData!==void 0&&y===void 0&&R==="pending"){let k;i!=null&&i.isPlaceholderData&&n.placeholderData===(a==null?void 0:a.placeholderData)?(k=i.data,T=!0):k=typeof n.placeholderData=="function"?n.placeholderData((S=P(this,$o))==null?void 0:S.state.data,P(this,$o)):n.placeholderData,k!==void 0&&(R="success",y=Wm(i==null?void 0:i.data,k,n),p=!0)}if(n.select&&y!==void 0&&!T)if(i&&y===(o==null?void 0:o.data)&&n.select===P(this,hu))y=P(this,Bo);else try{W(this,hu,n.select),y=n.select(y),y=Wm(i==null?void 0:i.data,y,n),W(this,Bo,y),W(this,vs,null)}catch(k){W(this,vs,k)}P(this,vs)&&(w=P(this,vs),y=P(this,Bo),b=Date.now(),R="error");const v=f.fetchStatus==="fetching",x=R==="pending",C=R==="error",M=x&&v,U=y!==void 0,_={status:R,fetchStatus:f.fetchStatus,isPending:x,isSuccess:R==="success",isError:C,isInitialLoading:M,isLoading:M,data:y,dataUpdatedAt:f.dataUpdatedAt,error:w,errorUpdatedAt:b,failureCount:f.fetchFailureCount,failureReason:f.fetchFailureReason,errorUpdateCount:f.errorUpdateCount,isFetched:f.dataUpdateCount>0||f.errorUpdateCount>0,isFetchedAfterMount:f.dataUpdateCount>c.dataUpdateCount||f.errorUpdateCount>c.errorUpdateCount,isFetching:v,isRefetching:v&&!x,isLoadingError:C&&!U,isPaused:f.fetchStatus==="paused",isPlaceholderData:p,isRefetchError:C&&U,isStale:fv(e,n),refetch:this.refetch,promise:P(this,ys),isEnabled:gn(n.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const k=A=>{_.status==="error"?A.reject(_.error):_.data!==void 0&&A.resolve(_.data)},N=()=>{const A=W(this,ys,_.promise=Km());k(A)},O=P(this,ys);switch(O.status){case"pending":e.queryHash===r.queryHash&&k(O);break;case"fulfilled":(_.status==="error"||_.data!==O.value)&&N();break;case"rejected":(_.status!=="error"||_.error!==O.reason)&&N();break}}return _}updateResult(){const e=P(this,Bt),n=this.createResult(P(this,ge),this.options);if(W(this,yi,P(this,ge).state),W(this,Fo,this.options),P(this,yi).data!==void 0&&W(this,$o,P(this,ge)),Xh(n,e))return;W(this,Bt,n);const r=()=>{if(!e)return!0;const{notifyOnChangeProps:s}=this.options,i=typeof s=="function"?s():s;if(i==="all"||!i&&!P(this,zo).size)return!0;const o=new Set(i??P(this,zo));return this.options.throwOnError&&o.add("error"),Object.keys(P(this,Bt)).some(a=>{const l=a;return P(this,Bt)[l]!==e[l]&&o.has(l)})};de(this,Ie,k1).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&de(this,Ie,Xm).call(this)}},Kt=new WeakMap,ge=new WeakMap,cu=new WeakMap,Bt=new WeakMap,yi=new WeakMap,Fo=new WeakMap,ys=new WeakMap,vs=new WeakMap,hu=new WeakMap,Bo=new WeakMap,$o=new WeakMap,vi=new WeakMap,_i=new WeakMap,_s=new WeakMap,zo=new WeakMap,Ie=new WeakSet,al=function(e){de(this,Ie,eg).call(this);let n=P(this,ge).fetch(this.options,e);return e!=null&&e.throwOnError||(n=n.catch(zt)),n},Qm=function(){de(this,Ie,Ym).call(this);const e=Us(this.options.staleTime,P(this,ge));if(Mi||P(this,Bt).isStale||!qm(e))return;const r=v1(P(this,Bt).dataUpdatedAt,e)+1;W(this,vi,setTimeout(()=>{P(this,Bt).isStale||this.updateResult()},r))},Gm=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(P(this,ge)):this.options.refetchInterval)??!1},Jm=function(e){de(this,Ie,Zm).call(this),W(this,_s,e),!(Mi||gn(this.options.enabled,P(this,ge))===!1||!qm(P(this,_s))||P(this,_s)===0)&&W(this,_i,setInterval(()=>{(this.options.refetchIntervalInBackground||dv.isFocused())&&de(this,Ie,al).call(this)},P(this,_s)))},Xm=function(){de(this,Ie,Qm).call(this),de(this,Ie,Jm).call(this,de(this,Ie,Gm).call(this))},Ym=function(){P(this,vi)&&(clearTimeout(P(this,vi)),W(this,vi,void 0))},Zm=function(){P(this,_i)&&(clearInterval(P(this,_i)),W(this,_i,void 0))},eg=function(){const e=P(this,Kt).getQueryCache().build(P(this,Kt),this.options);if(e===P(this,ge))return;const n=P(this,ge);W(this,ge,e),W(this,cu,e.state),this.hasListeners()&&(n==null||n.removeObserver(this),e.addObserver(this))},k1=function(e){at.batch(()=>{e.listeners&&this.listeners.forEach(n=>{n(P(this,Bt))}),P(this,Kt).getQueryCache().notify({query:P(this,ge),type:"observerResultsUpdated"})})},CT);function kj(t,e){return gn(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function pE(t,e){return kj(t,e)||t.state.data!==void 0&&tg(t,e,e.refetchOnMount)}function tg(t,e,n){if(gn(e.enabled,t)!==!1&&Us(e.staleTime,t)!=="static"){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&fv(t,e)}return!1}function mE(t,e,n,r){return(t!==e||gn(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&fv(t,n)}function fv(t,e){return gn(e.enabled,t)!==!1&&t.isStaleByTime(Us(e.staleTime,t))}function Cj(t,e){return!Xh(t.getCurrentResult(),e)}var ws,Es,Qt,Tr,Nr,Xc,ng,AT,Aj=(AT=class extends wa{constructor(n,r){super();ee(this,Nr);ee(this,ws);ee(this,Es);ee(this,Qt);ee(this,Tr);W(this,ws,n),this.setOptions(r),this.bindMethods(),de(this,Nr,Xc).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var s;const r=this.options;this.options=P(this,ws).defaultMutationOptions(n),Xh(this.options,r)||P(this,ws).getMutationCache().notify({type:"observerOptionsUpdated",mutation:P(this,Qt),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&Vi(r.mutationKey)!==Vi(this.options.mutationKey)?this.reset():((s=P(this,Qt))==null?void 0:s.state.status)==="pending"&&P(this,Qt).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=P(this,Qt))==null||n.removeObserver(this)}onMutationUpdate(n){de(this,Nr,Xc).call(this),de(this,Nr,ng).call(this,n)}getCurrentResult(){return P(this,Es)}reset(){var n;(n=P(this,Qt))==null||n.removeObserver(this),W(this,Qt,void 0),de(this,Nr,Xc).call(this),de(this,Nr,ng).call(this)}mutate(n,r){var s;return W(this,Tr,r),(s=P(this,Qt))==null||s.removeObserver(this),W(this,Qt,P(this,ws).getMutationCache().build(P(this,ws),this.options)),P(this,Qt).addObserver(this),P(this,Qt).execute(n)}},ws=new WeakMap,Es=new WeakMap,Qt=new WeakMap,Tr=new WeakMap,Nr=new WeakSet,Xc=function(){var r;const n=((r=P(this,Qt))==null?void 0:r.state)??b1();W(this,Es,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},ng=function(n){at.batch(()=>{var r,s,i,o,a,l,c,h;if(P(this,Tr)&&this.hasListeners()){const f=P(this,Es).variables,p=P(this,Es).context;(n==null?void 0:n.type)==="success"?((s=(r=P(this,Tr)).onSuccess)==null||s.call(r,n.data,f,p),(o=(i=P(this,Tr)).onSettled)==null||o.call(i,n.data,null,f,p)):(n==null?void 0:n.type)==="error"&&((l=(a=P(this,Tr)).onError)==null||l.call(a,n.error,f,p),(h=(c=P(this,Tr)).onSettled)==null||h.call(c,void 0,n.error,f,p))}this.listeners.forEach(f=>{f(P(this,Es))})})},AT),C1=L.createContext(void 0),pv=t=>{const e=L.useContext(C1);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},Pj=({client:t,children:e})=>(L.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),g.jsx(C1.Provider,{value:t,children:e})),A1=L.createContext(!1),Nj=()=>L.useContext(A1);A1.Provider;function Oj(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var Lj=L.createContext(Oj()),Dj=()=>L.useContext(Lj),Mj=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},Vj=t=>{L.useEffect(()=>{t.clearReset()},[t])},jj=({result:t,errorResetBoundary:e,throwOnError:n,query:r,suspense:s})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&(s&&t.data===void 0||E1(n,[t.error,r])),Uj=t=>{if(t.suspense){const e=r=>r==="static"?r:Math.max(r??1e3,1e3),n=t.staleTime;t.staleTime=typeof n=="function"?(...r)=>e(n(...r)):e(n),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},Fj=(t,e)=>t.isLoading&&t.isFetching&&!e,Bj=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,gE=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function $j(t,e,n){var f,p,y,w,b;const r=Nj(),s=Dj(),i=pv(),o=i.defaultQueryOptions(t);(p=(f=i.getDefaultOptions().queries)==null?void 0:f._experimental_beforeQuery)==null||p.call(f,o),o._optimisticResults=r?"isRestoring":"optimistic",Uj(o),Mj(o,s),Vj(s);const a=!i.getQueryCache().get(o.queryHash),[l]=L.useState(()=>new e(i,o)),c=l.getOptimisticResult(o),h=!r&&t.subscribed!==!1;if(L.useSyncExternalStore(L.useCallback(R=>{const T=h?l.subscribe(at.batchCalls(R)):zt;return l.updateResult(),T},[l,h]),()=>l.getCurrentResult(),()=>l.getCurrentResult()),L.useEffect(()=>{l.setOptions(o)},[o,l]),Bj(o,c))throw gE(o,l,s);if(jj({result:c,errorResetBoundary:s,throwOnError:o.throwOnError,query:i.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw c.error;if((w=(y=i.getDefaultOptions().queries)==null?void 0:y._experimental_afterQuery)==null||w.call(y,o,c),o.experimental_prefetchInRender&&!Mi&&Fj(c,r)){const R=a?gE(o,l,s):(b=i.getQueryCache().get(o.queryHash))==null?void 0:b.promise;R==null||R.catch(zt).finally(()=>{l.updateResult()})}return o.notifyOnChangeProps?c:l.trackResult(c)}function zj(t,e){return $j(t,bj)}function qj(t,e){const n=pv(),[r]=L.useState(()=>new Aj(n,t));L.useEffect(()=>{r.setOptions(t)},[r,t]);const s=L.useSyncExternalStore(L.useCallback(o=>r.subscribe(at.batchCalls(o)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),i=L.useCallback((o,a)=>{r.mutate(o,a).catch(zt)},[r]);if(s.error&&E1(r.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:i,mutateAsync:s.mutate}}function mv(){const{user:t}=Cu(),e=pv(),n=(t==null?void 0:t.uid)||"anonymous",r=zj({queryKey:["profile",n],enabled:!!t,queryFn:async()=>{var h;const o=(await rj(iE(aE,"profiles",n))).data()||{},a=((h=t==null?void 0:t.email)==null?void 0:h.split("@")[0])||"",l=o.username||a,c=o.displayName||(t==null?void 0:t.displayName)||l;return{username:l,displayName:c,bio:o.bio||"",interests:o.interests||[],photoURL:o.photoURL||(t==null?void 0:t.photoURL)||""}}}),s=qj({mutationFn:async i=>{if(!t)throw new Error("not signed in");return await ij(iE(aE,"profiles",n),i,{merge:!0}),i},onSuccess:i=>{e.setQueryData(["profile",n],o=>({...o||{},...i||{}}))}});return{...r,updateProfile:s.mutateAsync}}const Hj="WeGo";function yE(t){return t&&t.split("@")[0]||""}function Wj(){var o,a;const{user:t}=Cu(),{data:e}=mv(),n=({isActive:l})=>cj("px-2 py-1 rounded-md text-white/90 hover:text-white transition font-semibold","hover:underline underline-offset-8 decoration-2",l&&"underline decoration-2 text-white"),r=(((o=e==null?void 0:e.displayName)==null?void 0:o.trim())||((a=t==null?void 0:t.displayName)==null?void 0:a.trim())||yE(t==null?void 0:t.email))??"",s=(e==null?void 0:e.photoURL)||(t==null?void 0:t.photoURL)||"",i=(r||yE(t==null?void 0:t.email)||"?").charAt(0).toUpperCase();return g.jsx("header",{className:"sticky top-0 z-50 border-b border-white/10 bg-primary-900/70 backdrop-blur",children:g.jsxs("div",{className:"container-app flex items-center justify-between py-2",children:[g.jsx(Vr,{to:"/",className:"flex items-center gap-3","aria-label":Hj,children:g.jsxs("span",{className:"text-2xl md:text-3xl font-extrabold leading-none",children:[g.jsx("span",{className:"bg-gradient-to-r from-emerald-400 via-amber-300 to-pink-400 bg-clip-text text-transparent",children:"We"}),g.jsx("span",{className:"text-white",children:"Go"})]})}),g.jsxs("nav",{className:"hidden md:flex items-center gap-6 lg:gap-8",children:[g.jsx(yc,{to:"/explore",className:n,children:"Explore"}),g.jsx(yc,{to:"/create",className:n,children:"Create"}),t?g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsxs(Vr,{to:"/profile",className:"flex items-center gap-2 rounded-full bg-white/5 hover:bg-white/10 px-3 py-1.5 transition",children:[g.jsx("div",{className:"h-8 w-8 rounded-full overflow-hidden grid place-items-center bg-white/10",children:s?g.jsx("img",{src:s,alt:"avatar",className:"h-full w-full object-cover",referrerPolicy:"no-referrer"}):g.jsx("span",{className:"text-sm font-semibold",children:i})}),g.jsx("span",{className:"text-white/90 text-sm font-semibold max-w-[140px] truncate",children:r})]}),g.jsx("button",{onClick:()=>U2($r),className:"btn-primary rounded-full px-5 py-2",children:"Log out"})]}):g.jsxs(g.Fragment,{children:[g.jsx(yc,{to:"/auth/signin",className:"ml-2 btn-primary rounded-full px-5 py-2",children:"Sign in"}),g.jsx(yc,{to:"/auth/signup",className:"btn-ghost rounded-full px-4 py-2",children:"Sign up"})]})]})]})})}const Kj=["#คอนเสิร์ต","#ติวสอบ","#บอร์ดเกม","#ฟิตเนส","#วิ่ง","#ปีนเขา","#ถ่ายรูป","#กาแฟ","#เที่ยว"],Qj=[{id:"ev-concert-a",title:"Concert Night – A Artist",about:"ไปดูคอนเสิร์ตด้วยกัน สนุก ปลอดภัย มีเพื่อนคอยช่วยเหลือ",cover:"https://i.pinimg.com/736x/0b/65/4b/0b654bef1d22ab21666d278a4029b3fb.jpg",tags:["#คอนเสิร์ต","#เที่ยว"],location:"Impact Arena",date:"2025-10-01T19:00:00Z",popularity:98},{id:"ev-boardgame",title:"Boardgame Meetup – Chill & Play",about:"สายบอร์ดเกมมารวมกัน แจกไอเดียเกมใหม่ๆ เพียบ",cover:"https://images.unsplash.com/photo-1523875194681-bedd468c58bf?q=80&w=1600&auto=format&fit=crop",tags:["#บอร์ดเกม","#กาแฟ"],location:"WeGo Space",date:"2025-09-25T12:00:00Z",popularity:86},{id:"ev-toeic",title:"TOEIC Study Group – 700+",about:"ติวสอบ TOEIC กันแบบเข้มข้น แชร์เทคนิค + ข้อสอบจริง",cover:"https://i.pinimg.com/1200x/69/93/9a/69939a8692c11efb6aab841a4391d16b.jpg",tags:["#ติวสอบ"],location:"BKK Library",date:"2025-09-28T03:00:00Z",popularity:92},{id:"ev-run",title:"Sunday Run – Lumpini Park",about:"นัดวิ่งเช้า ๆ สุขภาพดี มีเพื่อนไปด้วยไม่เหงา",cover:"https://i.pinimg.com/736x/db/b7/28/dbb728791085bb195b5d0da7f56ed383.jpg",tags:["#วิ่ง","#ฟิตเนส"],location:"Lumpini Park",date:"2025-09-21T23:00:00Z",popularity:74}],Gj=[{id:"g-con-1",eventId:"ev-concert-a",name:"โซนหน้าสุดสายมันส์",members:18,max:24},{id:"g-con-2",eventId:"ev-concert-a",name:"โซนไวบ์ชิล",members:12,max:18},{id:"g-bd-1",eventId:"ev-boardgame",name:"เริ่มต้น / เกมง่าย",members:8,max:10},{id:"g-bd-2",eventId:"ev-boardgame",name:"เกมยาว / กลยุทธ์หนัก",members:7,max:8},{id:"g-toeic-1",eventId:"ev-toeic",name:"700+ intensive",members:15,max:20},{id:"g-run-1",eventId:"ev-run",name:"5K easy pace",members:9,max:12}],it=[{uid:"me",name:"Me (You)",avatar:"https://i.pravatar.cc/100?img=15"},{uid:"u1",name:"Beam",avatar:"https://i.pravatar.cc/100?img=12"},{uid:"u2",name:"Ploy",avatar:"https://i.pravatar.cc/100?img=32"},{uid:"u3",name:"Mek",avatar:"https://i.pravatar.cc/100?img=47"}],Jj={"g-con-1":[it[0],it[1],it[2]],"g-con-2":[it[0],it[3]],"g-bd-1":[it[0],it[2]],"g-bd-2":[it[0],it[1],it[3]],"g-toeic-1":[it[0],it[1]],"g-run-1":[it[0],it[2],it[3]]};function Xj({allTags:t,active:e,onToggle:n,query:r,onQuery:s}){const i=L.useMemo(()=>[...t].sort((o,a)=>Number(e.includes(a))-Number(e.includes(o))),[t,e]);return g.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 items-start sm:items-center justify-between",children:[g.jsx("input",{value:r,onChange:o=>s(o.target.value),placeholder:"Search events...",className:"input max-w-lg"}),g.jsx("div",{className:"flex flex-wrap gap-2",children:i.map(o=>{const a=e.includes(o);return g.jsx("button",{onClick:()=>n(o),className:"px-3 py-1 rounded-full text-sm transition "+(a?"bg-white/20 ring-1 ring-white/30":"bg-white/10 hover:bg-white/15"),children:o},o)})})]})}function Yj({event:t}){const e=zi(),n=L.useMemo(()=>{const s=Gj.find(i=>i.eventId===t.id);return s==null?void 0:s.id},[t.id]),r=()=>{n&&e(`/groups/${n}`)};return g.jsxs("article",{className:"card overflow-hidden group",children:[g.jsxs("div",{className:"relative h-48 sm:h-56 md:h-64",children:[g.jsx("img",{src:t.cover,alt:t.title,className:"absolute inset-0 h-full w-full object-cover transition-transform duration-500 group-hover:scale-105",loading:"lazy"}),g.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 via-black/20 to-transparent"})]}),g.jsxs("div",{className:"p-4 space-y-2",children:[g.jsx("h3",{className:"text-lg font-bold",children:t.title}),g.jsx("p",{className:"text-sm opacity-80 line-clamp-2",children:t.about}),g.jsx("div",{className:"flex flex-wrap gap-2 pt-1",children:t.tags.map(s=>g.jsx("span",{className:"tag",children:s},s))}),g.jsx("div",{className:"pt-3",children:g.jsx("button",{onClick:r,className:"btn-primary",disabled:!n,title:n?"เข้ากลุ่มและเริ่มแชทในห้องรวม":"ยังไม่มีกลุ่มสำหรับอีเวนต์นี้",children:"Join & Chat"})})]})]})}function Zj(){const[t,e]=L.useState(""),[n,r]=L.useState([]),s=o=>r(a=>a.includes(o)?a.filter(l=>l!==o):[...a,o]),i=L.useMemo(()=>{let o=[...Qj];if(t.trim()){const a=t.trim().toLowerCase();o=o.filter(l=>l.title.toLowerCase().includes(a)||l.about.toLowerCase().includes(a)||l.tags.some(c=>c.toLowerCase().includes(a)))}return n.length&&(o=o.filter(a=>n.every(l=>a.tags.includes(l)))),o.sort((a,l)=>(l.popularity??0)-(a.popularity??0))},[t,n]);return g.jsxs("section",{className:"container-app py-10 text-white space-y-6",children:[g.jsxs("header",{className:"text-center space-y-2",children:[g.jsxs("h2",{className:"text-3xl md:text-4xl font-extrabold",children:["Explore ",g.jsx("span",{className:"brand-gradient",children:"Activities"})]}),g.jsx("p",{className:"opacity-90",children:"Find buddies and groups"})]}),g.jsx(Xj,{allTags:Kj,active:n,onToggle:s,query:t,onQuery:e}),i.length?g.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 gap-6 pt-2",children:i.map(o=>g.jsx(Yj,{event:o},o.id))}):g.jsxs("div",{className:"card p-8 text-center",children:[g.jsx("div",{className:"text-lg font-semibold",children:"ไม่พบกิจกรรมที่ตรงกับการค้นหา"}),g.jsx("div",{className:"opacity-80",children:"ลองลบตัวกรองหรือพิมพ์คำค้นใหม่อีกครั้ง"})]}),g.jsx("p",{className:"text-center text-sm opacity-70",children:"* Demo dataset — เมื่อเชื่อมต่อ Backend จะใช้ข้อมูลจริง/Realtime"})]})}const ur=Object.create(null);ur.open="0";ur.close="1";ur.ping="2";ur.pong="3";ur.message="4";ur.upgrade="5";ur.noop="6";const Yc=Object.create(null);Object.keys(ur).forEach(t=>{Yc[ur[t]]=t});const rg={type:"error",data:"parser error"},P1=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",N1=typeof ArrayBuffer=="function",O1=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,gv=({type:t,data:e},n,r)=>P1&&e instanceof Blob?n?r(e):vE(e,r):N1&&(e instanceof ArrayBuffer||O1(e))?n?r(e):vE(new Blob([e]),r):r(ur[t]+(e||"")),vE=(t,e)=>{const n=new FileReader;return n.onload=function(){const r=n.result.split(",")[1];e("b"+(r||""))},n.readAsDataURL(t)};function _E(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let hp;function eU(t,e){if(P1&&t.data instanceof Blob)return t.data.arrayBuffer().then(_E).then(e);if(N1&&(t.data instanceof ArrayBuffer||O1(t.data)))return e(_E(t.data));gv(t,!1,n=>{hp||(hp=new TextEncoder),e(hp.encode(n))})}const wE="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ll=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<wE.length;t++)ll[wE.charCodeAt(t)]=t;const tU=t=>{let e=t.length*.75,n=t.length,r,s=0,i,o,a,l;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);const c=new ArrayBuffer(e),h=new Uint8Array(c);for(r=0;r<n;r+=4)i=ll[t.charCodeAt(r)],o=ll[t.charCodeAt(r+1)],a=ll[t.charCodeAt(r+2)],l=ll[t.charCodeAt(r+3)],h[s++]=i<<2|o>>4,h[s++]=(o&15)<<4|a>>2,h[s++]=(a&3)<<6|l&63;return c},nU=typeof ArrayBuffer=="function",yv=(t,e)=>{if(typeof t!="string")return{type:"message",data:L1(t,e)};const n=t.charAt(0);return n==="b"?{type:"message",data:rU(t.substring(1),e)}:Yc[n]?t.length>1?{type:Yc[n],data:t.substring(1)}:{type:Yc[n]}:rg},rU=(t,e)=>{if(nU){const n=tU(t);return L1(n,e)}else return{base64:!0,data:t}},L1=(t,e)=>{switch(e){case"blob":return t instanceof Blob?t:new Blob([t]);case"arraybuffer":default:return t instanceof ArrayBuffer?t:t.buffer}},D1="",sU=(t,e)=>{const n=t.length,r=new Array(n);let s=0;t.forEach((i,o)=>{gv(i,!1,a=>{r[o]=a,++s===n&&e(r.join(D1))})})},iU=(t,e)=>{const n=t.split(D1),r=[];for(let s=0;s<n.length;s++){const i=yv(n[s],e);if(r.push(i),i.type==="error")break}return r};function oU(){return new TransformStream({transform(t,e){eU(t,n=>{const r=n.length;let s;if(r<126)s=new Uint8Array(1),new DataView(s.buffer).setUint8(0,r);else if(r<65536){s=new Uint8Array(3);const i=new DataView(s.buffer);i.setUint8(0,126),i.setUint16(1,r)}else{s=new Uint8Array(9);const i=new DataView(s.buffer);i.setUint8(0,127),i.setBigUint64(1,BigInt(r))}t.data&&typeof t.data!="string"&&(s[0]|=128),e.enqueue(s),e.enqueue(n)})}})}let dp;function xc(t){return t.reduce((e,n)=>e+n.length,0)}function Rc(t,e){if(t[0].length===e)return t.shift();const n=new Uint8Array(e);let r=0;for(let s=0;s<e;s++)n[s]=t[0][r++],r===t[0].length&&(t.shift(),r=0);return t.length&&r<t[0].length&&(t[0]=t[0].slice(r)),n}function aU(t,e){dp||(dp=new TextDecoder);const n=[];let r=0,s=-1,i=!1;return new TransformStream({transform(o,a){for(n.push(o);;){if(r===0){if(xc(n)<1)break;const l=Rc(n,1);i=(l[0]&128)===128,s=l[0]&127,s<126?r=3:s===126?r=1:r=2}else if(r===1){if(xc(n)<2)break;const l=Rc(n,2);s=new DataView(l.buffer,l.byteOffset,l.length).getUint16(0),r=3}else if(r===2){if(xc(n)<8)break;const l=Rc(n,8),c=new DataView(l.buffer,l.byteOffset,l.length),h=c.getUint32(0);if(h>Math.pow(2,21)-1){a.enqueue(rg);break}s=h*Math.pow(2,32)+c.getUint32(4),r=3}else{if(xc(n)<s)break;const l=Rc(n,s);a.enqueue(yv(i?l:dp.decode(l),e)),r=0}if(s===0||s>t){a.enqueue(rg);break}}}})}const M1=4;function st(t){if(t)return lU(t)}function lU(t){for(var e in st.prototype)t[e]=st.prototype[e];return t}st.prototype.on=st.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this};st.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this};st.prototype.off=st.prototype.removeListener=st.prototype.removeAllListeners=st.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+t];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var r,s=0;s<n.length;s++)if(r=n[s],r===e||r.fn===e){n.splice(s,1);break}return n.length===0&&delete this._callbacks["$"+t],this};st.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),n=this._callbacks["$"+t],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(n){n=n.slice(0);for(var r=0,s=n.length;r<s;++r)n[r].apply(this,e)}return this};st.prototype.emitReserved=st.prototype.emit;st.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};st.prototype.hasListeners=function(t){return!!this.listeners(t).length};const Hd=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,n)=>n(e,0),_n=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),uU="arraybuffer";function V1(t,...e){return e.reduce((n,r)=>(t.hasOwnProperty(r)&&(n[r]=t[r]),n),{})}const cU=_n.setTimeout,hU=_n.clearTimeout;function Wd(t,e){e.useNativeTimers?(t.setTimeoutFn=cU.bind(_n),t.clearTimeoutFn=hU.bind(_n)):(t.setTimeoutFn=_n.setTimeout.bind(_n),t.clearTimeoutFn=_n.clearTimeout.bind(_n))}const dU=1.33;function fU(t){return typeof t=="string"?pU(t):Math.ceil((t.byteLength||t.size)*dU)}function pU(t){let e=0,n=0;for(let r=0,s=t.length;r<s;r++)e=t.charCodeAt(r),e<128?n+=1:e<2048?n+=2:e<55296||e>=57344?n+=3:(r++,n+=4);return n}function j1(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function mU(t){let e="";for(let n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e}function gU(t){let e={},n=t.split("&");for(let r=0,s=n.length;r<s;r++){let i=n[r].split("=");e[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return e}class yU extends Error{constructor(e,n,r){super(e),this.description=n,this.context=r,this.type="TransportError"}}class vv extends st{constructor(e){super(),this.writable=!1,Wd(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,n,r){return super.emitReserved("error",new yU(e,n,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const n=yv(e,this.socket.binaryType);this.onPacket(n)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,n={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const n=mU(e);return n.length?"?"+n:""}}class vU extends vv{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const n=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let r=0;this._polling&&(r++,this.once("pollComplete",function(){--r||n()})),this.writable||(r++,this.once("drain",function(){--r||n()}))}else n()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const n=r=>{if(this.readyState==="opening"&&r.type==="open"&&this.onOpen(),r.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)};iU(e,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,sU(e,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=j1()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(e,n)}}let U1=!1;try{U1=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const _U=U1;function wU(){}class EU extends vU{constructor(e){if(super(e),typeof location<"u"){const n=location.protocol==="https:";let r=location.port;r||(r=n?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||r!==e.port}}doWrite(e,n){const r=this.request({method:"POST",data:e});r.on("success",n),r.on("error",(s,i)=>{this.onError("xhr post error",s,i)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(n,r)=>{this.onError("xhr poll error",n,r)}),this.pollXhr=e}}let Ao=class Zc extends st{constructor(e,n,r){super(),this.createRequest=e,Wd(this,r),this._opts=r,this._method=r.method||"GET",this._uri=n,this._data=r.data!==void 0?r.data:null,this._create()}_create(){var e;const n=V1(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this._opts.xd;const r=this._xhr=this.createRequest(n);try{r.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let s in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(s)&&r.setRequestHeader(s,this._opts.extraHeaders[s])}}catch{}if(this._method==="POST")try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{r.setRequestHeader("Accept","*/*")}catch{}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(r),"withCredentials"in r&&(r.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(r.timeout=this._opts.requestTimeout),r.onreadystatechange=()=>{var s;r.readyState===3&&((s=this._opts.cookieJar)===null||s===void 0||s.parseCookies(r.getResponseHeader("set-cookie"))),r.readyState===4&&(r.status===200||r.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof r.status=="number"?r.status:0)},0))},r.send(this._data)}catch(s){this.setTimeoutFn(()=>{this._onError(s)},0);return}typeof document<"u"&&(this._index=Zc.requestsCount++,Zc.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=wU,e)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Zc.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}};Ao.requestsCount=0;Ao.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",EE);else if(typeof addEventListener=="function"){const t="onpagehide"in _n?"pagehide":"unload";addEventListener(t,EE,!1)}}function EE(){for(let t in Ao.requests)Ao.requests.hasOwnProperty(t)&&Ao.requests[t].abort()}const TU=function(){const t=F1({xdomain:!1});return t&&t.responseType!==null}();class SU extends EU{constructor(e){super(e);const n=e&&e.forceBase64;this.supportsBinary=TU&&!n}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new Ao(F1,this.uri(),e)}}function F1(t){const e=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||_U))return new XMLHttpRequest}catch{}if(!e)try{return new _n[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const B1=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class xU extends vv{get name(){return"websocket"}doOpen(){const e=this.uri(),n=this.opts.protocols,r=B1?{}:V1(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,n,r)}catch(s){return this.emitReserved("error",s)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const r=e[n],s=n===e.length-1;gv(r,this.supportsBinary,i=>{try{this.doWrite(r,i)}catch{}s&&Hd(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=j1()),this.supportsBinary||(n.b64=1),this.createUri(e,n)}}const fp=_n.WebSocket||_n.MozWebSocket;class RU extends xU{createSocket(e,n,r){return B1?new fp(e,n,r):n?new fp(e,n):new fp(e)}doWrite(e,n){this.ws.send(n)}}class IU extends vv{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const n=aU(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=e.readable.pipeThrough(n).getReader(),s=oU();s.readable.pipeTo(e.writable),this._writer=s.writable.getWriter();const i=()=>{r.read().then(({done:a,value:l})=>{a||(this.onPacket(l),i())}).catch(a=>{})};i();const o={type:"open"};this.query.sid&&(o.data=`{"sid":"${this.query.sid}"}`),this._writer.write(o).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const r=e[n],s=n===e.length-1;this._writer.write(r).then(()=>{s&&Hd(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this._transport)===null||e===void 0||e.close()}}const bU={websocket:RU,webtransport:IU,polling:SU},kU=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,CU=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function sg(t){if(t.length>8e3)throw"URI too long";const e=t,n=t.indexOf("["),r=t.indexOf("]");n!=-1&&r!=-1&&(t=t.substring(0,n)+t.substring(n,r).replace(/:/g,";")+t.substring(r,t.length));let s=kU.exec(t||""),i={},o=14;for(;o--;)i[CU[o]]=s[o]||"";return n!=-1&&r!=-1&&(i.source=e,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i.pathNames=AU(i,i.path),i.queryKey=PU(i,i.query),i}function AU(t,e){const n=/\/{2,9}/g,r=e.replace(n,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&r.splice(0,1),e.slice(-1)=="/"&&r.splice(r.length-1,1),r}function PU(t,e){const n={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,s,i){s&&(n[s]=i)}),n}const ig=typeof addEventListener=="function"&&typeof removeEventListener=="function",eh=[];ig&&addEventListener("offline",()=>{eh.forEach(t=>t())},!1);class Fs extends st{constructor(e,n){if(super(),this.binaryType=uU,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(n=e,e=null),e){const r=sg(e);n.hostname=r.host,n.secure=r.protocol==="https"||r.protocol==="wss",n.port=r.port,r.query&&(n.query=r.query)}else n.host&&(n.hostname=sg(n.host).host);Wd(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},n.transports.forEach(r=>{const s=r.prototype.name;this.transports.push(s),this._transportsByName[s]=r}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=gU(this.opts.query)),ig&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},eh.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const n=Object.assign({},this.opts.query);n.EIO=M1,n.transport=e,this.id&&(n.sid=this.id);const r=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](r)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const e=this.opts.rememberUpgrade&&Fs.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const n=this.createTransport(e);n.open(),this.setTransport(n)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",n=>this._onClose("transport close",n))}onOpen(){this.readyState="open",Fs.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const n=new Error("server error");n.code=e.data,this._onError(n);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let r=0;r<this.writeBuffer.length;r++){const s=this.writeBuffer[r].data;if(s&&(n+=fU(s)),r>0&&n>this._maxPayload)return this.writeBuffer.slice(0,r);n+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,Hd(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,n,r){return this._sendPacket("message",e,n,r),this}send(e,n,r){return this._sendPacket("message",e,n,r),this}_sendPacket(e,n,r,s){if(typeof n=="function"&&(s=n,n=void 0),typeof r=="function"&&(s=r,r=null),this.readyState==="closing"||this.readyState==="closed")return;r=r||{},r.compress=r.compress!==!1;const i={type:e,data:n,options:r};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),s&&this.once("flush",s),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),e()},r=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():e()}):this.upgrading?r():e()),this}_onError(e){if(Fs.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),ig&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const r=eh.indexOf(this._offlineEventListener);r!==-1&&eh.splice(r,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,n),this.writeBuffer=[],this._prevBufferLen=0}}}Fs.protocol=M1;class NU extends Fs{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let n=this.createTransport(e),r=!1;Fs.priorWebsocketSuccess=!1;const s=()=>{r||(n.send([{type:"ping",data:"probe"}]),n.once("packet",f=>{if(!r)if(f.type==="pong"&&f.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;Fs.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{r||this.readyState!=="closed"&&(h(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const p=new Error("probe error");p.transport=n.name,this.emitReserved("upgradeError",p)}}))};function i(){r||(r=!0,h(),n.close(),n=null)}const o=f=>{const p=new Error("probe error: "+f);p.transport=n.name,i(),this.emitReserved("upgradeError",p)};function a(){o("transport closed")}function l(){o("socket closed")}function c(f){n&&f.name!==n.name&&i()}const h=()=>{n.removeListener("open",s),n.removeListener("error",o),n.removeListener("close",a),this.off("close",l),this.off("upgrading",c)};n.once("open",s),n.once("error",o),n.once("close",a),this.once("close",l),this.once("upgrading",c),this._upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{r||n.open()},200):n.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const n=[];for(let r=0;r<e.length;r++)~this.transports.indexOf(e[r])&&n.push(e[r]);return n}}let OU=class extends NU{constructor(e,n={}){const r=typeof e=="object"?e:n;(!r.transports||r.transports&&typeof r.transports[0]=="string")&&(r.transports=(r.transports||["polling","websocket","webtransport"]).map(s=>bU[s]).filter(s=>!!s)),super(e,r)}};function LU(t,e="",n){let r=t;n=n||typeof location<"u"&&location,t==null&&(t=n.protocol+"//"+n.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=n.protocol+t:t=n.host+t),/^(https?|wss?):\/\//.test(t)||(typeof n<"u"?t=n.protocol+"//"+t:t="https://"+t),r=sg(t)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const i=r.host.indexOf(":")!==-1?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+i+":"+r.port+e,r.href=r.protocol+"://"+i+(n&&n.port===r.port?"":":"+r.port),r}const DU=typeof ArrayBuffer=="function",MU=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,$1=Object.prototype.toString,VU=typeof Blob=="function"||typeof Blob<"u"&&$1.call(Blob)==="[object BlobConstructor]",jU=typeof File=="function"||typeof File<"u"&&$1.call(File)==="[object FileConstructor]";function _v(t){return DU&&(t instanceof ArrayBuffer||MU(t))||VU&&t instanceof Blob||jU&&t instanceof File}function th(t,e){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let n=0,r=t.length;n<r;n++)if(th(t[n]))return!0;return!1}if(_v(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return th(t.toJSON(),!0);for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&th(t[n]))return!0;return!1}function UU(t){const e=[],n=t.data,r=t;return r.data=og(n,e),r.attachments=e.length,{packet:r,buffers:e}}function og(t,e){if(!t)return t;if(_v(t)){const n={_placeholder:!0,num:e.length};return e.push(t),n}else if(Array.isArray(t)){const n=new Array(t.length);for(let r=0;r<t.length;r++)n[r]=og(t[r],e);return n}else if(typeof t=="object"&&!(t instanceof Date)){const n={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=og(t[r],e));return n}return t}function FU(t,e){return t.data=ag(t.data,e),delete t.attachments,t}function ag(t,e){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<e.length)return e[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let n=0;n<t.length;n++)t[n]=ag(t[n],e);else if(typeof t=="object")for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(t[n]=ag(t[n],e));return t}const BU=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],$U=5;var ye;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(ye||(ye={}));class zU{constructor(e){this.replacer=e}encode(e){return(e.type===ye.EVENT||e.type===ye.ACK)&&th(e)?this.encodeAsBinary({type:e.type===ye.EVENT?ye.BINARY_EVENT:ye.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let n=""+e.type;return(e.type===ye.BINARY_EVENT||e.type===ye.BINARY_ACK)&&(n+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(n+=e.nsp+","),e.id!=null&&(n+=e.id),e.data!=null&&(n+=JSON.stringify(e.data,this.replacer)),n}encodeAsBinary(e){const n=UU(e),r=this.encodeAsString(n.packet),s=n.buffers;return s.unshift(r),s}}function TE(t){return Object.prototype.toString.call(t)==="[object Object]"}class wv extends st{constructor(e){super(),this.reviver=e}add(e){let n;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(e);const r=n.type===ye.BINARY_EVENT;r||n.type===ye.BINARY_ACK?(n.type=r?ye.EVENT:ye.ACK,this.reconstructor=new qU(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(_v(e)||e.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(e),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let n=0;const r={type:Number(e.charAt(0))};if(ye[r.type]===void 0)throw new Error("unknown packet type "+r.type);if(r.type===ye.BINARY_EVENT||r.type===ye.BINARY_ACK){const i=n+1;for(;e.charAt(++n)!=="-"&&n!=e.length;);const o=e.substring(i,n);if(o!=Number(o)||e.charAt(n)!=="-")throw new Error("Illegal attachments");r.attachments=Number(o)}if(e.charAt(n+1)==="/"){const i=n+1;for(;++n&&!(e.charAt(n)===","||n===e.length););r.nsp=e.substring(i,n)}else r.nsp="/";const s=e.charAt(n+1);if(s!==""&&Number(s)==s){const i=n+1;for(;++n;){const o=e.charAt(n);if(o==null||Number(o)!=o){--n;break}if(n===e.length)break}r.id=Number(e.substring(i,n+1))}if(e.charAt(++n)){const i=this.tryParse(e.substr(n));if(wv.isPayloadValid(r.type,i))r.data=i;else throw new Error("invalid payload")}return r}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,n){switch(e){case ye.CONNECT:return TE(n);case ye.DISCONNECT:return n===void 0;case ye.CONNECT_ERROR:return typeof n=="string"||TE(n);case ye.EVENT:case ye.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&BU.indexOf(n[0])===-1);case ye.ACK:case ye.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class qU{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const n=FU(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const HU=Object.freeze(Object.defineProperty({__proto__:null,Decoder:wv,Encoder:zU,get PacketType(){return ye},protocol:$U},Symbol.toStringTag,{value:"Module"}));function Ln(t,e,n){return t.on(e,n),function(){t.off(e,n)}}const WU=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class z1 extends st{constructor(e,n,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=n,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[Ln(e,"open",this.onopen.bind(this)),Ln(e,"packet",this.onpacket.bind(this)),Ln(e,"error",this.onerror.bind(this)),Ln(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...n){var r,s,i;if(WU.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(n.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const o={type:ye.EVENT,data:n};if(o.options={},o.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const h=this.ids++,f=n.pop();this._registerAckCallback(h,f),o.id=h}const a=(s=(r=this.io.engine)===null||r===void 0?void 0:r.transport)===null||s===void 0?void 0:s.writable,l=this.connected&&!(!((i=this.io.engine)===null||i===void 0)&&i._hasPingExpired());return this.flags.volatile&&!a||(l?(this.notifyOutgoingListeners(o),this.packet(o)):this.sendBuffer.push(o)),this.flags={},this}_registerAckCallback(e,n){var r;const s=(r=this.flags.timeout)!==null&&r!==void 0?r:this._opts.ackTimeout;if(s===void 0){this.acks[e]=n;return}const i=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let a=0;a<this.sendBuffer.length;a++)this.sendBuffer[a].id===e&&this.sendBuffer.splice(a,1);n.call(this,new Error("operation has timed out"))},s),o=(...a)=>{this.io.clearTimeoutFn(i),n.apply(this,a)};o.withError=!0,this.acks[e]=o}emitWithAck(e,...n){return new Promise((r,s)=>{const i=(o,a)=>o?s(o):r(a);i.withError=!0,n.push(i),this.emit(e,...n)})}_addToQueue(e){let n;typeof e[e.length-1]=="function"&&(n=e.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((s,...i)=>r!==this._queue[0]?void 0:(s!==null?r.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(s)):(this._queue.shift(),n&&n(null,...i)),r.pending=!1,this._drainQueue())),this._queue.push(r),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!e||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:ye.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,n),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(r=>String(r.id)===e)){const r=this.acks[e];delete this.acks[e],r.withError&&r.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case ye.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case ye.EVENT:case ye.BINARY_EVENT:this.onevent(e);break;case ye.ACK:case ye.BINARY_ACK:this.onack(e);break;case ye.DISCONNECT:this.ondisconnect();break;case ye.CONNECT_ERROR:this.destroy();const r=new Error(e.data.message);r.data=e.data.data,this.emitReserved("connect_error",r);break}}onevent(e){const n=e.data||[];e.id!=null&&n.push(this.ack(e.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const r of n)r.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const n=this;let r=!1;return function(...s){r||(r=!0,n.packet({type:ye.ACK,id:e,data:s}))}}onack(e){const n=this.acks[e.id];typeof n=="function"&&(delete this.acks[e.id],n.withError&&e.data.unshift(null),n.apply(this,e.data))}onconnect(e,n){this.id=e,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:ye.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const n=this._anyListeners;for(let r=0;r<n.length;r++)if(e===n[r])return n.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const n=this._anyOutgoingListeners;for(let r=0;r<n.length;r++)if(e===n[r])return n.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const r of n)r.apply(this,e.data)}}}function Ea(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}Ea.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=Math.floor(e*10)&1?t+n:t-n}return Math.min(t,this.max)|0};Ea.prototype.reset=function(){this.attempts=0};Ea.prototype.setMin=function(t){this.ms=t};Ea.prototype.setMax=function(t){this.max=t};Ea.prototype.setJitter=function(t){this.jitter=t};class lg extends st{constructor(e,n){var r;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(n=e,e=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,Wd(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((r=n.randomizationFactor)!==null&&r!==void 0?r:.5),this.backoff=new Ea({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=e;const s=n.parser||HU;this.encoder=new s.Encoder,this.decoder=new s.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var n;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(n=this.backoff)===null||n===void 0||n.setMin(e),this)}randomizationFactor(e){var n;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(n=this.backoff)===null||n===void 0||n.setJitter(e),this)}reconnectionDelayMax(e){var n;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(n=this.backoff)===null||n===void 0||n.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new OU(this.uri,this.opts);const n=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const s=Ln(n,"open",function(){r.onopen(),e&&e()}),i=a=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",a),e?e(a):this.maybeReconnectOnOpen()},o=Ln(n,"error",i);if(this._timeout!==!1){const a=this._timeout,l=this.setTimeoutFn(()=>{s(),i(new Error("timeout")),n.close()},a);this.opts.autoUnref&&l.unref(),this.subs.push(()=>{this.clearTimeoutFn(l)})}return this.subs.push(s),this.subs.push(o),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(Ln(e,"ping",this.onping.bind(this)),Ln(e,"data",this.ondata.bind(this)),Ln(e,"error",this.onerror.bind(this)),Ln(e,"close",this.onclose.bind(this)),Ln(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(n){this.onclose("parse error",n)}}ondecoded(e){Hd(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,n){let r=this.nsps[e];return r?this._autoConnect&&!r.active&&r.connect():(r=new z1(this,e,n),this.nsps[e]=r),r}_destroy(e){const n=Object.keys(this.nsps);for(const r of n)if(this.nsps[r].active)return;this._close()}_packet(e){const n=this.encoder.encode(e);for(let r=0;r<n.length;r++)this.engine.write(n[r],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,n){var r;this.cleanup(),(r=this.engine)===null||r===void 0||r.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(s=>{s?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",s)):e.onreconnect()}))},n);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const Ka={};function nh(t,e){typeof t=="object"&&(e=t,t=void 0),e=e||{};const n=LU(t,e.path||"/socket.io"),r=n.source,s=n.id,i=n.path,o=Ka[s]&&i in Ka[s].nsps,a=e.forceNew||e["force new connection"]||e.multiplex===!1||o;let l;return a?l=new lg(r,e):(Ka[s]||(Ka[s]=new lg(r,e)),l=Ka[s]),n.query&&!e.query&&(e.query=n.queryKey),l.socket(n.path,e)}Object.assign(nh,{Manager:lg,Socket:z1,io:nh,connect:nh});const pn=nh("http://localhost:4000",{autoConnect:!1,transports:["websocket"]});let xl=null;function we(t){xl==null||xl(t)}function KU(){const[t,e]=L.useState([]);return L.useEffect(()=>(xl=n=>{e(r=>[...r,n]),setTimeout(()=>e(r=>r.slice(1)),2500)},()=>{xl=null}),[]),g.jsx("div",{className:"fixed bottom-4 left-1/2 -translate-x-1/2 z-[60] space-y-2",children:t.map((n,r)=>g.jsx("div",{className:"px-4 py-2 rounded-xl bg-black/70 ring-1 ring-white/10 text-white shadow-card",children:n},r))})}function QU({groupId:t}){const[e,n]=L.useState([]),[r,s]=L.useState(""),[i,o]=L.useState(null),a=L.useRef(null);L.useEffect(()=>(pn.connected||pn.connect(),pn.emit("joinGroup",t),pn.on("chatMessage",c=>n(h=>[...h,c])),pn.on("typing",c=>{o(c),setTimeout(()=>o(null),1200)}),pn.on("messageRead",c=>{n(h=>h.map(f=>f.id===c.messageId&&!f.readBy.includes(c.userId)?{...f,readBy:[...f.readBy,c.userId]}:f))}),()=>{pn.off("chatMessage"),pn.off("typing"),pn.off("messageRead"),pn.emit("leaveGroup",t)}),[t]),L.useEffect(()=>{var c;return(c=a.current)==null?void 0:c.scrollIntoView({behavior:"smooth"})},[e.length]);const l=()=>{const c=r.trim();if(!c)return;const h={id:crypto.randomUUID(),text:c,user:"me",at:Date.now(),readBy:["me"]};pn.emit("chatMessage",{groupId:t,message:h}),n(f=>[...f,h]),s(""),we("Message sent")};return g.jsxs("div",{className:"card p-3 h-[480px] flex flex-col",children:[g.jsx("div",{className:"font-semibold mb-2",children:"Group Chat"}),g.jsxs("div",{className:"flex-1 overflow-y-auto space-y-2",children:[e.map(c=>g.jsx("div",{className:`max-w-[80%] ${c.user==="me"?"ml-auto text-right":""}`,children:g.jsxs("div",{className:"bg-white/10 rounded-lg px-3 py-2",children:[g.jsx("div",{children:c.text}),g.jsxs("div",{className:"text-[10px] opacity-60 mt-1",children:[new Date(c.at).toLocaleTimeString()," • Read: ",c.readBy.length]})]})},c.id)),g.jsx("div",{ref:a})]}),i&&g.jsxs("div",{className:"text-xs opacity-70 mt-1",children:[i," is typing…"]}),g.jsxs("div",{className:"mt-2 flex gap-2",children:[g.jsx("input",{className:"input flex-1",value:r,onChange:c=>{s(c.target.value),pn.emit("typing",t)},placeholder:"Type a message…"}),g.jsx("button",{onClick:l,className:"btn-primary",children:"Send"})]})]})}const SE=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],GU=Array.from({length:12},(t,e)=>e*2);function JU(){const[t,e]=L.useState({});L.useEffect(()=>{const i=localStorage.getItem("wego_availability");i&&e(JSON.parse(i))},[]);const n=(i,o)=>{e(a=>{const l=new Set(a[i]||[]);return l.has(o)?l.delete(o):l.add(o),{...a,[i]:Array.from(l).sort((c,h)=>c-h)}})},r=L.useMemo(()=>Object.values(t).reduce((i,o)=>i+((o==null?void 0:o.length)||0),0),[t]),s=()=>{localStorage.setItem("wego_availability",JSON.stringify(t)),we("Availability saved")};return g.jsxs("div",{className:"card p-4",children:[g.jsxs("div",{className:"flex items-center justify-between mb-3",children:[g.jsx("h3",{className:"text-lg font-semibold",children:"Your Availability"}),g.jsx("button",{className:"btn-primary",onClick:s,children:"Save"})]}),g.jsxs("div",{className:"grid grid-cols-[80px_repeat(7,minmax(0,1fr))] gap-2",children:[g.jsx("div",{className:"opacity-70 text-sm",children:"Hour"}),SE.map(i=>g.jsx("div",{className:"text-center text-sm font-semibold",children:i},i)),GU.map(i=>g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"text-sm opacity-70",children:[String(i).padStart(2,"0"),":00"]},`label-${i}`),SE.map(o=>{var l;const a=(l=t[o])==null?void 0:l.includes(i);return g.jsx("button",{className:`h-8 rounded-lg ring-1 ring-white/10 ${a?"bg-emerald-500/70":"bg-white/5 hover:bg-white/10"}`,onClick:()=>n(o,i),title:`${o} ${i}:00`},`${o}-${i}`)})]}))]}),g.jsxs("div",{className:"mt-3 text-sm opacity-80",children:["Selected blocks: ",r]})]})}function XU(){const[t,e]=L.useState(!1),[n,r]=L.useState(0),[s,i]=L.useState(""),o=()=>{e(!1),we(`Thanks! You rated ${n}★`),r(0),i("")};return g.jsxs("div",{className:"card p-4",children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsx("div",{className:"font-semibold",children:"Rate recent activity"}),g.jsx("button",{className:"btn-primary",onClick:()=>e(!0),children:"Open"})]}),t&&g.jsxs("div",{className:"mt-3 space-y-3",children:[g.jsx("div",{className:"flex gap-2",children:[1,2,3,4,5].map(a=>g.jsx("button",{className:`h-10 w-10 rounded-full grid place-items-center ${a<=n?"bg-amber-400 text-black":"bg-white/10"}`,onClick:()=>r(a),"aria-label":`${a} stars`,children:"★"},a))}),g.jsx("textarea",{className:"input h-24",placeholder:"Leave a note (optional)",value:s,onChange:a=>i(a.target.value)}),g.jsxs("div",{className:"flex gap-2",children:[g.jsx("button",{className:"px-3 py-2 rounded-lg ring-1 ring-white/10",onClick:()=>e(!1),children:"Cancel"}),g.jsx("button",{className:"btn-primary",onClick:o,children:"Submit"})]})]})]})}const q1=L.createContext(null),xE=(t,e)=>t<e?`${t}|${e}`:`${e}|${t}`,YU=({children:t})=>{const e="me",n=L.useRef(new Map),[r,s]=L.useState(null),i=L.useMemo(()=>r&&it.find(f=>f.uid===r)||null,[r]),h={meUid:e,isOpen:!!r,openPeer:i,openDM:f=>s(f),closeDM:()=>s(null),getMsgs:f=>{const p=f??r;if(!p)return[];const y=xE(e,p);return n.current.get(y)??[]},sendTo:(f,p)=>{const y=p.trim();if(!y)return;const w=xE(e,f),b=n.current.get(w)??[];b.push({from:e,to:f,text:y,at:Date.now()}),n.current.set(w,b),s(R=>R&&`${R}`)}};return g.jsx(q1.Provider,{value:h,children:t})},Ev=()=>{const t=L.useContext(q1);if(!t)throw new Error("useDM must be used within DMProvider");return t};function ZU({groupId:t}){const{openDM:e}=Ev(),n=it.find(s=>s.uid==="me"),r=(Jj[t]??[]).filter(s=>s.uid!==n.uid);return g.jsxs("aside",{className:"card p-4 space-y-3",children:[g.jsx("div",{className:"font-semibold",children:"Members"}),g.jsxs("div",{className:"space-y-2",children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("div",{className:"flex items-center gap-2 opacity-90",children:[g.jsx("img",{src:n.avatar,className:"h-7 w-7 rounded-full object-cover"}),g.jsx("div",{children:"Me (You)"})]}),g.jsx("button",{className:"btn-ghost cursor-default opacity-40",children:"แชทส่วนตัว"})]}),r.map(s=>g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("img",{src:s.avatar,className:"h-7 w-7 rounded-full object-cover"}),g.jsx("div",{children:s.name})]}),g.jsx("button",{className:"btn-ghost",onClick:()=>e(s.uid),children:"แชทส่วนตัว"})]},s.uid))]})]})}function eF(){const{id:t}=Xx(),e=t||"";return g.jsxs("section",{className:"container-app py-8 grid grid-cols-1 lg:grid-cols-3 gap-6",children:[g.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[g.jsx(QU,{groupId:e}),g.jsx(XU,{})]}),g.jsxs("div",{className:"space-y-6",children:[g.jsx(ZU,{groupId:e}),g.jsx(JU,{})]})]})}var Re;(function(t){t.assertEqual=s=>{};function e(s){}t.assertIs=e;function n(s){throw new Error}t.assertNever=n,t.arrayToEnum=s=>{const i={};for(const o of s)i[o]=o;return i},t.getValidEnumValues=s=>{const i=t.objectKeys(s).filter(a=>typeof s[s[a]]!="number"),o={};for(const a of i)o[a]=s[a];return t.objectValues(o)},t.objectValues=s=>t.objectKeys(s).map(function(i){return s[i]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const i=[];for(const o in s)Object.prototype.hasOwnProperty.call(s,o)&&i.push(o);return i},t.find=(s,i)=>{for(const o of s)if(i(o))return o},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&Number.isFinite(s)&&Math.floor(s)===s;function r(s,i=" | "){return s.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}t.joinValues=r,t.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(Re||(Re={}));var RE;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(RE||(RE={}));const J=Re.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),rs=t=>{switch(typeof t){case"undefined":return J.undefined;case"string":return J.string;case"number":return Number.isNaN(t)?J.nan:J.number;case"boolean":return J.boolean;case"function":return J.function;case"bigint":return J.bigint;case"symbol":return J.symbol;case"object":return Array.isArray(t)?J.array:t===null?J.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?J.promise:typeof Map<"u"&&t instanceof Map?J.map:typeof Set<"u"&&t instanceof Set?J.set:typeof Date<"u"&&t instanceof Date?J.date:J.object;default:return J.unknown}},z=Re.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class zr extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){const n=e||function(i){return i.message},r={_errors:[]},s=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(s);else if(o.code==="invalid_return_type")s(o.returnTypeError);else if(o.code==="invalid_arguments")s(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let a=r,l=0;for(;l<o.path.length;){const c=o.path[l];l===o.path.length-1?(a[c]=a[c]||{_errors:[]},a[c]._errors.push(n(o))):a[c]=a[c]||{_errors:[]},a=a[c],l++}}};return s(this),r}static assert(e){if(!(e instanceof zr))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Re.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const s of this.issues)if(s.path.length>0){const i=s.path[0];n[i]=n[i]||[],n[i].push(e(s))}else r.push(e(s));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}zr.create=t=>new zr(t);const ug=(t,e)=>{let n;switch(t.code){case z.invalid_type:t.received===J.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case z.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,Re.jsonStringifyReplacer)}`;break;case z.unrecognized_keys:n=`Unrecognized key(s) in object: ${Re.joinValues(t.keys,", ")}`;break;case z.invalid_union:n="Invalid input";break;case z.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${Re.joinValues(t.options)}`;break;case z.invalid_enum_value:n=`Invalid enum value. Expected ${Re.joinValues(t.options)}, received '${t.received}'`;break;case z.invalid_arguments:n="Invalid function arguments";break;case z.invalid_return_type:n="Invalid function return type";break;case z.invalid_date:n="Invalid date";break;case z.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:Re.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case z.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="bigint"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case z.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case z.custom:n="Invalid input";break;case z.invalid_intersection_types:n="Intersection results could not be merged";break;case z.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case z.not_finite:n="Number must be finite";break;default:n=e.defaultError,Re.assertNever(t)}return{message:n}};let tF=ug;function nF(){return tF}const rF=t=>{const{data:e,path:n,errorMaps:r,issueData:s}=t,i=[...n,...s.path||[]],o={...s,path:i};if(s.message!==void 0)return{...s,path:i,message:s.message};let a="";const l=r.filter(c=>!!c).slice().reverse();for(const c of l)a=c(o,{data:e,defaultError:a}).message;return{...s,path:i,message:a}};function K(t,e){const n=nF(),r=rF({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===ug?void 0:ug].filter(s=>!!s)});t.common.issues.push(r)}class hn{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const s of n){if(s.status==="aborted")return le;s.status==="dirty"&&e.dirty(),r.push(s.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const s of n){const i=await s.key,o=await s.value;r.push({key:i,value:o})}return hn.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const s of n){const{key:i,value:o}=s;if(i.status==="aborted"||o.status==="aborted")return le;i.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||s.alwaysSet)&&(r[i.value]=o.value)}return{status:e.value,value:r}}}const le=Object.freeze({status:"aborted"}),ul=t=>({status:"dirty",value:t}),bn=t=>({status:"valid",value:t}),IE=t=>t.status==="aborted",bE=t=>t.status==="dirty",oa=t=>t.status==="valid",Zh=t=>typeof Promise<"u"&&t instanceof Promise;var X;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(X||(X={}));class Qs{constructor(e,n,r,s){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=s}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const kE=(t,e)=>{if(oa(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new zr(t.common.issues);return this._error=n,this._error}}};function fe(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:s}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(o,a)=>{const{message:l}=t;return o.code==="invalid_enum_value"?{message:l??a.defaultError}:typeof a.data>"u"?{message:l??r??a.defaultError}:o.code!=="invalid_type"?{message:a.defaultError}:{message:l??n??a.defaultError}},description:s}}class Te{get description(){return this._def.description}_getType(e){return rs(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:rs(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new hn,ctx:{common:e.parent.common,data:e.data,parsedType:rs(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(Zh(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){const r={common:{issues:[],async:(n==null?void 0:n.async)??!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:rs(e)},s=this._parseSync({data:e,path:r.path,parent:r});return kE(r,s)}"~validate"(e){var r,s;const n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:rs(e)};if(!this["~standard"].async)try{const i=this._parseSync({data:e,path:[],parent:n});return oa(i)?{value:i.value}:{issues:n.common.issues}}catch(i){(s=(r=i==null?void 0:i.message)==null?void 0:r.toLowerCase())!=null&&s.includes("encountered")&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:n}).then(i=>oa(i)?{value:i.value}:{issues:n.common.issues})}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:rs(e)},s=this._parse({data:e,path:r.path,parent:r}),i=await(Zh(s)?s:Promise.resolve(s));return kE(r,i)}refine(e,n){const r=s=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(s):n;return this._refinement((s,i)=>{const o=e(s),a=()=>i.addIssue({code:z.custom,...r(s)});return typeof Promise<"u"&&o instanceof Promise?o.then(l=>l?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,n){return this._refinement((r,s)=>e(r)?!0:(s.addIssue(typeof n=="function"?n(r,s):n),!1))}_refinement(e){return new la({schema:this,typeName:ue.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return Bs.create(this,this._def)}nullable(){return ua.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return or.create(this)}promise(){return rd.create(this,this._def)}or(e){return td.create([this,e],this._def)}and(e){return nd.create(this,e,this._def)}transform(e){return new la({...fe(this._def),schema:this,typeName:ue.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new hg({...fe(this._def),innerType:this,defaultValue:n,typeName:ue.ZodDefault})}brand(){return new IF({typeName:ue.ZodBranded,type:this,...fe(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new dg({...fe(this._def),innerType:this,catchValue:n,typeName:ue.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return Tv.create(this,e)}readonly(){return fg.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const sF=/^c[^\s-]{8,}$/i,iF=/^[0-9a-z]+$/,oF=/^[0-9A-HJKMNP-TV-Z]{26}$/i,aF=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,lF=/^[a-z0-9_-]{21}$/i,uF=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,cF=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,hF=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,dF="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let pp;const fF=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,pF=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,mF=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,gF=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,yF=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,vF=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,H1="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",_F=new RegExp(`^${H1}$`);function W1(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);const n=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${n}`}function wF(t){return new RegExp(`^${W1(t)}$`)}function EF(t){let e=`${H1}T${W1(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function TF(t,e){return!!((e==="v4"||!e)&&fF.test(t)||(e==="v6"||!e)&&mF.test(t))}function SF(t,e){if(!uF.test(t))return!1;try{const[n]=t.split(".");if(!n)return!1;const r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),s=JSON.parse(atob(r));return!(typeof s!="object"||s===null||"typ"in s&&(s==null?void 0:s.typ)!=="JWT"||!s.alg||e&&s.alg!==e)}catch{return!1}}function xF(t,e){return!!((e==="v4"||!e)&&pF.test(t)||(e==="v6"||!e)&&gF.test(t))}class Is extends Te{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==J.string){const i=this._getOrReturnCtx(e);return K(i,{code:z.invalid_type,expected:J.string,received:i.parsedType}),le}const r=new hn;let s;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),K(s,{code:z.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),K(s,{code:z.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const o=e.data.length>i.value,a=e.data.length<i.value;(o||a)&&(s=this._getOrReturnCtx(e,s),o?K(s,{code:z.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):a&&K(s,{code:z.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")hF.test(e.data)||(s=this._getOrReturnCtx(e,s),K(s,{validation:"email",code:z.invalid_string,message:i.message}),r.dirty());else if(i.kind==="emoji")pp||(pp=new RegExp(dF,"u")),pp.test(e.data)||(s=this._getOrReturnCtx(e,s),K(s,{validation:"emoji",code:z.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")aF.test(e.data)||(s=this._getOrReturnCtx(e,s),K(s,{validation:"uuid",code:z.invalid_string,message:i.message}),r.dirty());else if(i.kind==="nanoid")lF.test(e.data)||(s=this._getOrReturnCtx(e,s),K(s,{validation:"nanoid",code:z.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")sF.test(e.data)||(s=this._getOrReturnCtx(e,s),K(s,{validation:"cuid",code:z.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid2")iF.test(e.data)||(s=this._getOrReturnCtx(e,s),K(s,{validation:"cuid2",code:z.invalid_string,message:i.message}),r.dirty());else if(i.kind==="ulid")oF.test(e.data)||(s=this._getOrReturnCtx(e,s),K(s,{validation:"ulid",code:z.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),K(s,{validation:"url",code:z.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),K(s,{validation:"regex",code:z.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(e,s),K(s,{code:z.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),K(s,{code:z.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),K(s,{code:z.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?EF(i).test(e.data)||(s=this._getOrReturnCtx(e,s),K(s,{code:z.invalid_string,validation:"datetime",message:i.message}),r.dirty()):i.kind==="date"?_F.test(e.data)||(s=this._getOrReturnCtx(e,s),K(s,{code:z.invalid_string,validation:"date",message:i.message}),r.dirty()):i.kind==="time"?wF(i).test(e.data)||(s=this._getOrReturnCtx(e,s),K(s,{code:z.invalid_string,validation:"time",message:i.message}),r.dirty()):i.kind==="duration"?cF.test(e.data)||(s=this._getOrReturnCtx(e,s),K(s,{validation:"duration",code:z.invalid_string,message:i.message}),r.dirty()):i.kind==="ip"?TF(e.data,i.version)||(s=this._getOrReturnCtx(e,s),K(s,{validation:"ip",code:z.invalid_string,message:i.message}),r.dirty()):i.kind==="jwt"?SF(e.data,i.alg)||(s=this._getOrReturnCtx(e,s),K(s,{validation:"jwt",code:z.invalid_string,message:i.message}),r.dirty()):i.kind==="cidr"?xF(e.data,i.version)||(s=this._getOrReturnCtx(e,s),K(s,{validation:"cidr",code:z.invalid_string,message:i.message}),r.dirty()):i.kind==="base64"?yF.test(e.data)||(s=this._getOrReturnCtx(e,s),K(s,{validation:"base64",code:z.invalid_string,message:i.message}),r.dirty()):i.kind==="base64url"?vF.test(e.data)||(s=this._getOrReturnCtx(e,s),K(s,{validation:"base64url",code:z.invalid_string,message:i.message}),r.dirty()):Re.assertNever(i);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(s=>e.test(s),{validation:n,code:z.invalid_string,...X.errToObj(r)})}_addCheck(e){return new Is({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...X.errToObj(e)})}url(e){return this._addCheck({kind:"url",...X.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...X.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...X.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...X.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...X.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...X.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...X.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...X.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...X.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...X.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...X.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...X.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...X.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...X.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...X.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...X.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...X.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...X.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...X.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...X.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...X.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...X.errToObj(n)})}nonempty(e){return this.min(1,X.errToObj(e))}trim(){return new Is({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Is({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Is({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Is.create=t=>new Is({checks:[],typeName:ue.ZodString,coerce:(t==null?void 0:t.coerce)??!1,...fe(t)});function RF(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,s=n>r?n:r,i=Number.parseInt(t.toFixed(s).replace(".","")),o=Number.parseInt(e.toFixed(s).replace(".",""));return i%o/10**s}class ru extends Te{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==J.number){const i=this._getOrReturnCtx(e);return K(i,{code:z.invalid_type,expected:J.number,received:i.parsedType}),le}let r;const s=new hn;for(const i of this._def.checks)i.kind==="int"?Re.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),K(r,{code:z.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),K(r,{code:z.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),K(r,{code:z.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?RF(e.data,i.value)!==0&&(r=this._getOrReturnCtx(e,r),K(r,{code:z.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),K(r,{code:z.not_finite,message:i.message}),s.dirty()):Re.assertNever(i);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,X.toString(n))}gt(e,n){return this.setLimit("min",e,!1,X.toString(n))}lte(e,n){return this.setLimit("max",e,!0,X.toString(n))}lt(e,n){return this.setLimit("max",e,!1,X.toString(n))}setLimit(e,n,r,s){return new ru({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:X.toString(s)}]})}_addCheck(e){return new ru({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:X.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:X.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:X.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:X.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:X.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:X.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:X.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:X.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:X.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Re.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}ru.create=t=>new ru({checks:[],typeName:ue.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...fe(t)});class su extends Te{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==J.bigint)return this._getInvalidInput(e);let r;const s=new hn;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),K(r,{code:z.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),K(r,{code:z.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),K(r,{code:z.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):Re.assertNever(i);return{status:s.value,value:e.data}}_getInvalidInput(e){const n=this._getOrReturnCtx(e);return K(n,{code:z.invalid_type,expected:J.bigint,received:n.parsedType}),le}gte(e,n){return this.setLimit("min",e,!0,X.toString(n))}gt(e,n){return this.setLimit("min",e,!1,X.toString(n))}lte(e,n){return this.setLimit("max",e,!0,X.toString(n))}lt(e,n){return this.setLimit("max",e,!1,X.toString(n))}setLimit(e,n,r,s){return new su({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:X.toString(s)}]})}_addCheck(e){return new su({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:X.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:X.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:X.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:X.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:X.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}su.create=t=>new su({checks:[],typeName:ue.ZodBigInt,coerce:(t==null?void 0:t.coerce)??!1,...fe(t)});class CE extends Te{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==J.boolean){const r=this._getOrReturnCtx(e);return K(r,{code:z.invalid_type,expected:J.boolean,received:r.parsedType}),le}return bn(e.data)}}CE.create=t=>new CE({typeName:ue.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...fe(t)});class ed extends Te{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==J.date){const i=this._getOrReturnCtx(e);return K(i,{code:z.invalid_type,expected:J.date,received:i.parsedType}),le}if(Number.isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return K(i,{code:z.invalid_date}),le}const r=new hn;let s;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),K(s,{code:z.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),K(s,{code:z.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):Re.assertNever(i);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new ed({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:X.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:X.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}ed.create=t=>new ed({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:ue.ZodDate,...fe(t)});class AE extends Te{_parse(e){if(this._getType(e)!==J.symbol){const r=this._getOrReturnCtx(e);return K(r,{code:z.invalid_type,expected:J.symbol,received:r.parsedType}),le}return bn(e.data)}}AE.create=t=>new AE({typeName:ue.ZodSymbol,...fe(t)});class PE extends Te{_parse(e){if(this._getType(e)!==J.undefined){const r=this._getOrReturnCtx(e);return K(r,{code:z.invalid_type,expected:J.undefined,received:r.parsedType}),le}return bn(e.data)}}PE.create=t=>new PE({typeName:ue.ZodUndefined,...fe(t)});class NE extends Te{_parse(e){if(this._getType(e)!==J.null){const r=this._getOrReturnCtx(e);return K(r,{code:z.invalid_type,expected:J.null,received:r.parsedType}),le}return bn(e.data)}}NE.create=t=>new NE({typeName:ue.ZodNull,...fe(t)});class OE extends Te{constructor(){super(...arguments),this._any=!0}_parse(e){return bn(e.data)}}OE.create=t=>new OE({typeName:ue.ZodAny,...fe(t)});class LE extends Te{constructor(){super(...arguments),this._unknown=!0}_parse(e){return bn(e.data)}}LE.create=t=>new LE({typeName:ue.ZodUnknown,...fe(t)});class Gs extends Te{_parse(e){const n=this._getOrReturnCtx(e);return K(n,{code:z.invalid_type,expected:J.never,received:n.parsedType}),le}}Gs.create=t=>new Gs({typeName:ue.ZodNever,...fe(t)});class DE extends Te{_parse(e){if(this._getType(e)!==J.undefined){const r=this._getOrReturnCtx(e);return K(r,{code:z.invalid_type,expected:J.void,received:r.parsedType}),le}return bn(e.data)}}DE.create=t=>new DE({typeName:ue.ZodVoid,...fe(t)});class or extends Te{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),s=this._def;if(n.parsedType!==J.array)return K(n,{code:z.invalid_type,expected:J.array,received:n.parsedType}),le;if(s.exactLength!==null){const o=n.data.length>s.exactLength.value,a=n.data.length<s.exactLength.value;(o||a)&&(K(n,{code:o?z.too_big:z.too_small,minimum:a?s.exactLength.value:void 0,maximum:o?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(s.minLength!==null&&n.data.length<s.minLength.value&&(K(n,{code:z.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),s.maxLength!==null&&n.data.length>s.maxLength.value&&(K(n,{code:z.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,a)=>s.type._parseAsync(new Qs(n,o,n.path,a)))).then(o=>hn.mergeArray(r,o));const i=[...n.data].map((o,a)=>s.type._parseSync(new Qs(n,o,n.path,a)));return hn.mergeArray(r,i)}get element(){return this._def.type}min(e,n){return new or({...this._def,minLength:{value:e,message:X.toString(n)}})}max(e,n){return new or({...this._def,maxLength:{value:e,message:X.toString(n)}})}length(e,n){return new or({...this._def,exactLength:{value:e,message:X.toString(n)}})}nonempty(e){return this.min(1,e)}}or.create=(t,e)=>new or({type:t,minLength:null,maxLength:null,exactLength:null,typeName:ue.ZodArray,...fe(e)});function io(t){if(t instanceof nt){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=Bs.create(io(r))}return new nt({...t._def,shape:()=>e})}else return t instanceof or?new or({...t._def,type:io(t.element)}):t instanceof Bs?Bs.create(io(t.unwrap())):t instanceof ua?ua.create(io(t.unwrap())):t instanceof ji?ji.create(t.items.map(e=>io(e))):t}class nt extends Te{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=Re.objectKeys(e);return this._cached={shape:e,keys:n},this._cached}_parse(e){if(this._getType(e)!==J.object){const c=this._getOrReturnCtx(e);return K(c,{code:z.invalid_type,expected:J.object,received:c.parsedType}),le}const{status:r,ctx:s}=this._processInputParams(e),{shape:i,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof Gs&&this._def.unknownKeys==="strip"))for(const c in s.data)o.includes(c)||a.push(c);const l=[];for(const c of o){const h=i[c],f=s.data[c];l.push({key:{status:"valid",value:c},value:h._parse(new Qs(s,f,s.path,c)),alwaysSet:c in s.data})}if(this._def.catchall instanceof Gs){const c=this._def.unknownKeys;if(c==="passthrough")for(const h of a)l.push({key:{status:"valid",value:h},value:{status:"valid",value:s.data[h]}});else if(c==="strict")a.length>0&&(K(s,{code:z.unrecognized_keys,keys:a}),r.dirty());else if(c!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const c=this._def.catchall;for(const h of a){const f=s.data[h];l.push({key:{status:"valid",value:h},value:c._parse(new Qs(s,f,s.path,h)),alwaysSet:h in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const c=[];for(const h of l){const f=await h.key,p=await h.value;c.push({key:f,value:p,alwaysSet:h.alwaysSet})}return c}).then(c=>hn.mergeObjectSync(r,c)):hn.mergeObjectSync(r,l)}get shape(){return this._def.shape()}strict(e){return X.errToObj,new nt({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var i,o;const s=((o=(i=this._def).errorMap)==null?void 0:o.call(i,n,r).message)??r.defaultError;return n.code==="unrecognized_keys"?{message:X.errToObj(e).message??s}:{message:s}}}:{}})}strip(){return new nt({...this._def,unknownKeys:"strip"})}passthrough(){return new nt({...this._def,unknownKeys:"passthrough"})}extend(e){return new nt({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new nt({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:ue.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new nt({...this._def,catchall:e})}pick(e){const n={};for(const r of Re.objectKeys(e))e[r]&&this.shape[r]&&(n[r]=this.shape[r]);return new nt({...this._def,shape:()=>n})}omit(e){const n={};for(const r of Re.objectKeys(this.shape))e[r]||(n[r]=this.shape[r]);return new nt({...this._def,shape:()=>n})}deepPartial(){return io(this)}partial(e){const n={};for(const r of Re.objectKeys(this.shape)){const s=this.shape[r];e&&!e[r]?n[r]=s:n[r]=s.optional()}return new nt({...this._def,shape:()=>n})}required(e){const n={};for(const r of Re.objectKeys(this.shape))if(e&&!e[r])n[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof Bs;)i=i._def.innerType;n[r]=i}return new nt({...this._def,shape:()=>n})}keyof(){return K1(Re.objectKeys(this.shape))}}nt.create=(t,e)=>new nt({shape:()=>t,unknownKeys:"strip",catchall:Gs.create(),typeName:ue.ZodObject,...fe(e)});nt.strictCreate=(t,e)=>new nt({shape:()=>t,unknownKeys:"strict",catchall:Gs.create(),typeName:ue.ZodObject,...fe(e)});nt.lazycreate=(t,e)=>new nt({shape:t,unknownKeys:"strip",catchall:Gs.create(),typeName:ue.ZodObject,...fe(e)});class td extends Te{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function s(i){for(const a of i)if(a.result.status==="valid")return a.result;for(const a of i)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const o=i.map(a=>new zr(a.ctx.common.issues));return K(n,{code:z.invalid_union,unionErrors:o}),le}if(n.common.async)return Promise.all(r.map(async i=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await i._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(s);{let i;const o=[];for(const l of r){const c={...n,common:{...n.common,issues:[]},parent:null},h=l._parseSync({data:n.data,path:n.path,parent:c});if(h.status==="valid")return h;h.status==="dirty"&&!i&&(i={result:h,ctx:c}),c.common.issues.length&&o.push(c.common.issues)}if(i)return n.common.issues.push(...i.ctx.common.issues),i.result;const a=o.map(l=>new zr(l));return K(n,{code:z.invalid_union,unionErrors:a}),le}}get options(){return this._def.options}}td.create=(t,e)=>new td({options:t,typeName:ue.ZodUnion,...fe(e)});function cg(t,e){const n=rs(t),r=rs(e);if(t===e)return{valid:!0,data:t};if(n===J.object&&r===J.object){const s=Re.objectKeys(e),i=Re.objectKeys(t).filter(a=>s.indexOf(a)!==-1),o={...t,...e};for(const a of i){const l=cg(t[a],e[a]);if(!l.valid)return{valid:!1};o[a]=l.data}return{valid:!0,data:o}}else if(n===J.array&&r===J.array){if(t.length!==e.length)return{valid:!1};const s=[];for(let i=0;i<t.length;i++){const o=t[i],a=e[i],l=cg(o,a);if(!l.valid)return{valid:!1};s.push(l.data)}return{valid:!0,data:s}}else return n===J.date&&r===J.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class nd extends Te{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=(i,o)=>{if(IE(i)||IE(o))return le;const a=cg(i.value,o.value);return a.valid?((bE(i)||bE(o))&&n.dirty(),{status:n.value,value:a.data}):(K(r,{code:z.invalid_intersection_types}),le)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,o])=>s(i,o)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}nd.create=(t,e,n)=>new nd({left:t,right:e,typeName:ue.ZodIntersection,...fe(n)});class ji extends Te{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==J.array)return K(r,{code:z.invalid_type,expected:J.array,received:r.parsedType}),le;if(r.data.length<this._def.items.length)return K(r,{code:z.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),le;!this._def.rest&&r.data.length>this._def.items.length&&(K(r,{code:z.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const i=[...r.data].map((o,a)=>{const l=this._def.items[a]||this._def.rest;return l?l._parse(new Qs(r,o,r.path,a)):null}).filter(o=>!!o);return r.common.async?Promise.all(i).then(o=>hn.mergeArray(n,o)):hn.mergeArray(n,i)}get items(){return this._def.items}rest(e){return new ji({...this._def,rest:e})}}ji.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ji({items:t,typeName:ue.ZodTuple,rest:null,...fe(e)})};class ME extends Te{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==J.map)return K(r,{code:z.invalid_type,expected:J.map,received:r.parsedType}),le;const s=this._def.keyType,i=this._def.valueType,o=[...r.data.entries()].map(([a,l],c)=>({key:s._parse(new Qs(r,a,r.path,[c,"key"])),value:i._parse(new Qs(r,l,r.path,[c,"value"]))}));if(r.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const l of o){const c=await l.key,h=await l.value;if(c.status==="aborted"||h.status==="aborted")return le;(c.status==="dirty"||h.status==="dirty")&&n.dirty(),a.set(c.value,h.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const l of o){const c=l.key,h=l.value;if(c.status==="aborted"||h.status==="aborted")return le;(c.status==="dirty"||h.status==="dirty")&&n.dirty(),a.set(c.value,h.value)}return{status:n.value,value:a}}}}ME.create=(t,e,n)=>new ME({valueType:e,keyType:t,typeName:ue.ZodMap,...fe(n)});class iu extends Te{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==J.set)return K(r,{code:z.invalid_type,expected:J.set,received:r.parsedType}),le;const s=this._def;s.minSize!==null&&r.data.size<s.minSize.value&&(K(r,{code:z.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),n.dirty()),s.maxSize!==null&&r.data.size>s.maxSize.value&&(K(r,{code:z.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),n.dirty());const i=this._def.valueType;function o(l){const c=new Set;for(const h of l){if(h.status==="aborted")return le;h.status==="dirty"&&n.dirty(),c.add(h.value)}return{status:n.value,value:c}}const a=[...r.data.values()].map((l,c)=>i._parse(new Qs(r,l,r.path,c)));return r.common.async?Promise.all(a).then(l=>o(l)):o(a)}min(e,n){return new iu({...this._def,minSize:{value:e,message:X.toString(n)}})}max(e,n){return new iu({...this._def,maxSize:{value:e,message:X.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}iu.create=(t,e)=>new iu({valueType:t,minSize:null,maxSize:null,typeName:ue.ZodSet,...fe(e)});class VE extends Te{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}VE.create=(t,e)=>new VE({getter:t,typeName:ue.ZodLazy,...fe(e)});class jE extends Te{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return K(n,{received:n.data,code:z.invalid_literal,expected:this._def.value}),le}return{status:"valid",value:e.data}}get value(){return this._def.value}}jE.create=(t,e)=>new jE({value:t,typeName:ue.ZodLiteral,...fe(e)});function K1(t,e){return new aa({values:t,typeName:ue.ZodEnum,...fe(e)})}class aa extends Te{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return K(n,{expected:Re.joinValues(r),received:n.parsedType,code:z.invalid_type}),le}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const n=this._getOrReturnCtx(e),r=this._def.values;return K(n,{received:n.data,code:z.invalid_enum_value,options:r}),le}return bn(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return aa.create(e,{...this._def,...n})}exclude(e,n=this._def){return aa.create(this.options.filter(r=>!e.includes(r)),{...this._def,...n})}}aa.create=K1;class UE extends Te{_parse(e){const n=Re.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==J.string&&r.parsedType!==J.number){const s=Re.objectValues(n);return K(r,{expected:Re.joinValues(s),received:r.parsedType,code:z.invalid_type}),le}if(this._cache||(this._cache=new Set(Re.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const s=Re.objectValues(n);return K(r,{received:r.data,code:z.invalid_enum_value,options:s}),le}return bn(e.data)}get enum(){return this._def.values}}UE.create=(t,e)=>new UE({values:t,typeName:ue.ZodNativeEnum,...fe(e)});class rd extends Te{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==J.promise&&n.common.async===!1)return K(n,{code:z.invalid_type,expected:J.promise,received:n.parsedType}),le;const r=n.parsedType===J.promise?n.data:Promise.resolve(n.data);return bn(r.then(s=>this._def.type.parseAsync(s,{path:n.path,errorMap:n.common.contextualErrorMap})))}}rd.create=(t,e)=>new rd({type:t,typeName:ue.ZodPromise,...fe(e)});class la extends Te{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===ue.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=this._def.effect||null,i={addIssue:o=>{K(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="preprocess"){const o=s.transform(r.data,i);if(r.common.async)return Promise.resolve(o).then(async a=>{if(n.value==="aborted")return le;const l=await this._def.schema._parseAsync({data:a,path:r.path,parent:r});return l.status==="aborted"?le:l.status==="dirty"||n.value==="dirty"?ul(l.value):l});{if(n.value==="aborted")return le;const a=this._def.schema._parseSync({data:o,path:r.path,parent:r});return a.status==="aborted"?le:a.status==="dirty"||n.value==="dirty"?ul(a.value):a}}if(s.type==="refinement"){const o=a=>{const l=s.refinement(a,i);if(r.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?le:(a.status==="dirty"&&n.dirty(),o(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>a.status==="aborted"?le:(a.status==="dirty"&&n.dirty(),o(a.value).then(()=>({status:n.value,value:a.value}))))}if(s.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!oa(o))return le;const a=s.transform(o.value,i);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>oa(o)?Promise.resolve(s.transform(o.value,i)).then(a=>({status:n.value,value:a})):le);Re.assertNever(s)}}la.create=(t,e,n)=>new la({schema:t,typeName:ue.ZodEffects,effect:e,...fe(n)});la.createWithPreprocess=(t,e,n)=>new la({schema:e,effect:{type:"preprocess",transform:t},typeName:ue.ZodEffects,...fe(n)});class Bs extends Te{_parse(e){return this._getType(e)===J.undefined?bn(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Bs.create=(t,e)=>new Bs({innerType:t,typeName:ue.ZodOptional,...fe(e)});class ua extends Te{_parse(e){return this._getType(e)===J.null?bn(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ua.create=(t,e)=>new ua({innerType:t,typeName:ue.ZodNullable,...fe(e)});class hg extends Te{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===J.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}hg.create=(t,e)=>new hg({innerType:t,typeName:ue.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...fe(e)});class dg extends Te{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},s=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return Zh(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new zr(r.common.issues)},input:r.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new zr(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}dg.create=(t,e)=>new dg({innerType:t,typeName:ue.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...fe(e)});class FE extends Te{_parse(e){if(this._getType(e)!==J.nan){const r=this._getOrReturnCtx(e);return K(r,{code:z.invalid_type,expected:J.nan,received:r.parsedType}),le}return{status:"valid",value:e.data}}}FE.create=t=>new FE({typeName:ue.ZodNaN,...fe(t)});class IF extends Te{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class Tv extends Te{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?le:i.status==="dirty"?(n.dirty(),ul(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const s=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?le:s.status==="dirty"?(n.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:r.path,parent:r})}}static create(e,n){return new Tv({in:e,out:n,typeName:ue.ZodPipeline})}}class fg extends Te{_parse(e){const n=this._def.innerType._parse(e),r=s=>(oa(s)&&(s.value=Object.freeze(s.value)),s);return Zh(n)?n.then(s=>r(s)):r(n)}unwrap(){return this._def.innerType}}fg.create=(t,e)=>new fg({innerType:t,typeName:ue.ZodReadonly,...fe(e)});var ue;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(ue||(ue={}));const Un=Is.create;Gs.create;const Q1=or.create,Kd=nt.create;td.create;nd.create;ji.create;aa.create;rd.create;Bs.create;ua.create;const bF=Kd({name:Un().min(3,"Please enter a name (min 3 chars)."),description:Un().min(10,"Description too short."),tags:Q1(Un().min(1)).min(1,"Please add at least one tag.")});Kd({email:Un().email(),password:Un().min(6,"Min 6 chars"),displayName:Un().min(2,"Min 2 chars")});const kF=Kd({email:Un().email(),password:Un().min(6)});Kd({displayName:Un().min(2).optional(),bio:Un().max(300).optional(),interests:Q1(Un()).optional()});function G1({value:t,onChange:e,suggestions:n=["running","coffee","boardgames","hiking","music","yoga"]}){const[r,s]=L.useState(""),i=a=>{const l=a.trim().toLowerCase();l&&(t.includes(l)||(e([...t,l]),s("")))},o=a=>e(t.filter(l=>l!==a));return g.jsxs("div",{children:[g.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:t.map(a=>g.jsxs("span",{className:"tag inline-flex items-center gap-2",children:[a,g.jsx("button",{type:"button",className:"opacity-70 hover:opacity-100",onClick:()=>o(a),children:"✕"})]},a))}),g.jsxs("div",{className:"flex gap-2",children:[g.jsx("input",{className:"input flex-1",placeholder:"Add a tag and press Enter",value:r,onChange:a=>s(a.target.value),onKeyDown:a=>{a.key==="Enter"&&(a.preventDefault(),i(r))}}),g.jsx("button",{type:"button",className:"btn-primary",onClick:()=>i(r),children:"Add"})]}),!!n.length&&g.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:n.map(a=>g.jsxs("button",{type:"button",className:"px-2 py-1 rounded-lg ring-1 ring-white/10 hover:bg-white/10 transition text-sm",onClick:()=>i(a),children:["+ ",a]},a))})]})}function J1(t,e){return function(){return t.apply(e,arguments)}}const{toString:CF}=Object.prototype,{getPrototypeOf:Sv}=Object,{iterator:Qd,toStringTag:X1}=Symbol,Gd=(t=>e=>{const n=CF.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),$n=t=>(t=t.toLowerCase(),e=>Gd(e)===t),Jd=t=>e=>typeof e===t,{isArray:Ta}=Array,ou=Jd("undefined");function Au(t){return t!==null&&!ou(t)&&t.constructor!==null&&!ou(t.constructor)&&tn(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const Y1=$n("ArrayBuffer");function AF(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&Y1(t.buffer),e}const PF=Jd("string"),tn=Jd("function"),Z1=Jd("number"),Pu=t=>t!==null&&typeof t=="object",NF=t=>t===!0||t===!1,rh=t=>{if(Gd(t)!=="object")return!1;const e=Sv(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(X1 in t)&&!(Qd in t)},OF=t=>{if(!Pu(t)||Au(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},LF=$n("Date"),DF=$n("File"),MF=$n("Blob"),VF=$n("FileList"),jF=t=>Pu(t)&&tn(t.pipe),UF=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||tn(t.append)&&((e=Gd(t))==="formdata"||e==="object"&&tn(t.toString)&&t.toString()==="[object FormData]"))},FF=$n("URLSearchParams"),[BF,$F,zF,qF]=["ReadableStream","Request","Response","Headers"].map($n),HF=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Nu(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,s;if(typeof t!="object"&&(t=[t]),Ta(t))for(r=0,s=t.length;r<s;r++)e.call(null,t[r],r,t);else{if(Au(t))return;const i=n?Object.getOwnPropertyNames(t):Object.keys(t),o=i.length;let a;for(r=0;r<o;r++)a=i[r],e.call(null,t[a],a,t)}}function eb(t,e){if(Au(t))return null;e=e.toLowerCase();const n=Object.keys(t);let r=n.length,s;for(;r-- >0;)if(s=n[r],e===s.toLowerCase())return s;return null}const hi=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,tb=t=>!ou(t)&&t!==hi;function pg(){const{caseless:t}=tb(this)&&this||{},e={},n=(r,s)=>{const i=t&&eb(e,s)||s;rh(e[i])&&rh(r)?e[i]=pg(e[i],r):rh(r)?e[i]=pg({},r):Ta(r)?e[i]=r.slice():e[i]=r};for(let r=0,s=arguments.length;r<s;r++)arguments[r]&&Nu(arguments[r],n);return e}const WF=(t,e,n,{allOwnKeys:r}={})=>(Nu(e,(s,i)=>{n&&tn(s)?t[i]=J1(s,n):t[i]=s},{allOwnKeys:r}),t),KF=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),QF=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},GF=(t,e,n,r)=>{let s,i,o;const a={};if(e=e||{},t==null)return e;do{for(s=Object.getOwnPropertyNames(t),i=s.length;i-- >0;)o=s[i],(!r||r(o,t,e))&&!a[o]&&(e[o]=t[o],a[o]=!0);t=n!==!1&&Sv(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},JF=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},XF=t=>{if(!t)return null;if(Ta(t))return t;let e=t.length;if(!Z1(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},YF=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&Sv(Uint8Array)),ZF=(t,e)=>{const r=(t&&t[Qd]).call(t);let s;for(;(s=r.next())&&!s.done;){const i=s.value;e.call(t,i[0],i[1])}},e4=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},t4=$n("HTMLFormElement"),n4=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,s){return r.toUpperCase()+s}),BE=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),r4=$n("RegExp"),nb=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};Nu(n,(s,i)=>{let o;(o=e(s,i,t))!==!1&&(r[i]=o||s)}),Object.defineProperties(t,r)},s4=t=>{nb(t,(e,n)=>{if(tn(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(tn(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},i4=(t,e)=>{const n={},r=s=>{s.forEach(i=>{n[i]=!0})};return Ta(t)?r(t):r(String(t).split(e)),n},o4=()=>{},a4=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function l4(t){return!!(t&&tn(t.append)&&t[X1]==="FormData"&&t[Qd])}const u4=t=>{const e=new Array(10),n=(r,s)=>{if(Pu(r)){if(e.indexOf(r)>=0)return;if(Au(r))return r;if(!("toJSON"in r)){e[s]=r;const i=Ta(r)?[]:{};return Nu(r,(o,a)=>{const l=n(o,s+1);!ou(l)&&(i[a]=l)}),e[s]=void 0,i}}return r};return n(t,0)},c4=$n("AsyncFunction"),h4=t=>t&&(Pu(t)||tn(t))&&tn(t.then)&&tn(t.catch),rb=((t,e)=>t?setImmediate:e?((n,r)=>(hi.addEventListener("message",({source:s,data:i})=>{s===hi&&i===n&&r.length&&r.shift()()},!1),s=>{r.push(s),hi.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",tn(hi.postMessage)),d4=typeof queueMicrotask<"u"?queueMicrotask.bind(hi):typeof process<"u"&&process.nextTick||rb,f4=t=>t!=null&&tn(t[Qd]),V={isArray:Ta,isArrayBuffer:Y1,isBuffer:Au,isFormData:UF,isArrayBufferView:AF,isString:PF,isNumber:Z1,isBoolean:NF,isObject:Pu,isPlainObject:rh,isEmptyObject:OF,isReadableStream:BF,isRequest:$F,isResponse:zF,isHeaders:qF,isUndefined:ou,isDate:LF,isFile:DF,isBlob:MF,isRegExp:r4,isFunction:tn,isStream:jF,isURLSearchParams:FF,isTypedArray:YF,isFileList:VF,forEach:Nu,merge:pg,extend:WF,trim:HF,stripBOM:KF,inherits:QF,toFlatObject:GF,kindOf:Gd,kindOfTest:$n,endsWith:JF,toArray:XF,forEachEntry:ZF,matchAll:e4,isHTMLForm:t4,hasOwnProperty:BE,hasOwnProp:BE,reduceDescriptors:nb,freezeMethods:s4,toObjectSet:i4,toCamelCase:n4,noop:o4,toFiniteNumber:a4,findKey:eb,global:hi,isContextDefined:tb,isSpecCompliantForm:l4,toJSONObject:u4,isAsyncFn:c4,isThenable:h4,setImmediate:rb,asap:d4,isIterable:f4};function he(t,e,n,r,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),s&&(this.response=s,this.status=s.status?s.status:null)}V.inherits(he,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:V.toJSONObject(this.config),code:this.code,status:this.status}}});const sb=he.prototype,ib={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{ib[t]={value:t}});Object.defineProperties(he,ib);Object.defineProperty(sb,"isAxiosError",{value:!0});he.from=(t,e,n,r,s,i)=>{const o=Object.create(sb);return V.toFlatObject(t,o,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),he.call(o,t.message,e,n,r,s),o.cause=t,o.name=t.name,i&&Object.assign(o,i),o};const p4=null;function mg(t){return V.isPlainObject(t)||V.isArray(t)}function ob(t){return V.endsWith(t,"[]")?t.slice(0,-2):t}function $E(t,e,n){return t?t.concat(e).map(function(s,i){return s=ob(s),!n&&i?"["+s+"]":s}).join(n?".":""):e}function m4(t){return V.isArray(t)&&!t.some(mg)}const g4=V.toFlatObject(V,{},null,function(e){return/^is[A-Z]/.test(e)});function Xd(t,e,n){if(!V.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=V.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(b,R){return!V.isUndefined(R[b])});const r=n.metaTokens,s=n.visitor||h,i=n.dots,o=n.indexes,l=(n.Blob||typeof Blob<"u"&&Blob)&&V.isSpecCompliantForm(e);if(!V.isFunction(s))throw new TypeError("visitor must be a function");function c(w){if(w===null)return"";if(V.isDate(w))return w.toISOString();if(V.isBoolean(w))return w.toString();if(!l&&V.isBlob(w))throw new he("Blob is not supported. Use a Buffer instead.");return V.isArrayBuffer(w)||V.isTypedArray(w)?l&&typeof Blob=="function"?new Blob([w]):Buffer.from(w):w}function h(w,b,R){let T=w;if(w&&!R&&typeof w=="object"){if(V.endsWith(b,"{}"))b=r?b:b.slice(0,-2),w=JSON.stringify(w);else if(V.isArray(w)&&m4(w)||(V.isFileList(w)||V.endsWith(b,"[]"))&&(T=V.toArray(w)))return b=ob(b),T.forEach(function(x,C){!(V.isUndefined(x)||x===null)&&e.append(o===!0?$E([b],C,i):o===null?b:b+"[]",c(x))}),!1}return mg(w)?!0:(e.append($E(R,b,i),c(w)),!1)}const f=[],p=Object.assign(g4,{defaultVisitor:h,convertValue:c,isVisitable:mg});function y(w,b){if(!V.isUndefined(w)){if(f.indexOf(w)!==-1)throw Error("Circular reference detected in "+b.join("."));f.push(w),V.forEach(w,function(T,v){(!(V.isUndefined(T)||T===null)&&s.call(e,T,V.isString(v)?v.trim():v,b,p))===!0&&y(T,b?b.concat(v):[v])}),f.pop()}}if(!V.isObject(t))throw new TypeError("data must be an object");return y(t),e}function zE(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function xv(t,e){this._pairs=[],t&&Xd(t,this,e)}const ab=xv.prototype;ab.append=function(e,n){this._pairs.push([e,n])};ab.toString=function(e){const n=e?function(r){return e.call(this,r,zE)}:zE;return this._pairs.map(function(s){return n(s[0])+"="+n(s[1])},"").join("&")};function y4(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function lb(t,e,n){if(!e)return t;const r=n&&n.encode||y4;V.isFunction(n)&&(n={serialize:n});const s=n&&n.serialize;let i;if(s?i=s(e,n):i=V.isURLSearchParams(e)?e.toString():new xv(e,n).toString(r),i){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t}class qE{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){V.forEach(this.handlers,function(r){r!==null&&e(r)})}}const ub={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},v4=typeof URLSearchParams<"u"?URLSearchParams:xv,_4=typeof FormData<"u"?FormData:null,w4=typeof Blob<"u"?Blob:null,E4={isBrowser:!0,classes:{URLSearchParams:v4,FormData:_4,Blob:w4},protocols:["http","https","file","blob","url","data"]},Rv=typeof window<"u"&&typeof document<"u",gg=typeof navigator=="object"&&navigator||void 0,T4=Rv&&(!gg||["ReactNative","NativeScript","NS"].indexOf(gg.product)<0),S4=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",x4=Rv&&window.location.href||"http://localhost",R4=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Rv,hasStandardBrowserEnv:T4,hasStandardBrowserWebWorkerEnv:S4,navigator:gg,origin:x4},Symbol.toStringTag,{value:"Module"})),Nt={...R4,...E4};function I4(t,e){return Xd(t,new Nt.classes.URLSearchParams,{visitor:function(n,r,s,i){return Nt.isNode&&V.isBuffer(n)?(this.append(r,n.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...e})}function b4(t){return V.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function k4(t){const e={},n=Object.keys(t);let r;const s=n.length;let i;for(r=0;r<s;r++)i=n[r],e[i]=t[i];return e}function cb(t){function e(n,r,s,i){let o=n[i++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),l=i>=n.length;return o=!o&&V.isArray(s)?s.length:o,l?(V.hasOwnProp(s,o)?s[o]=[s[o],r]:s[o]=r,!a):((!s[o]||!V.isObject(s[o]))&&(s[o]=[]),e(n,r,s[o],i)&&V.isArray(s[o])&&(s[o]=k4(s[o])),!a)}if(V.isFormData(t)&&V.isFunction(t.entries)){const n={};return V.forEachEntry(t,(r,s)=>{e(b4(r),s,n,0)}),n}return null}function C4(t,e,n){if(V.isString(t))try{return(e||JSON.parse)(t),V.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const Ou={transitional:ub,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const r=n.getContentType()||"",s=r.indexOf("application/json")>-1,i=V.isObject(e);if(i&&V.isHTMLForm(e)&&(e=new FormData(e)),V.isFormData(e))return s?JSON.stringify(cb(e)):e;if(V.isArrayBuffer(e)||V.isBuffer(e)||V.isStream(e)||V.isFile(e)||V.isBlob(e)||V.isReadableStream(e))return e;if(V.isArrayBufferView(e))return e.buffer;if(V.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(i){if(r.indexOf("application/x-www-form-urlencoded")>-1)return I4(e,this.formSerializer).toString();if((a=V.isFileList(e))||r.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return Xd(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return i||s?(n.setContentType("application/json",!1),C4(e)):e}],transformResponse:[function(e){const n=this.transitional||Ou.transitional,r=n&&n.forcedJSONParsing,s=this.responseType==="json";if(V.isResponse(e)||V.isReadableStream(e))return e;if(e&&V.isString(e)&&(r&&!this.responseType||s)){const o=!(n&&n.silentJSONParsing)&&s;try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?he.from(a,he.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Nt.classes.FormData,Blob:Nt.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};V.forEach(["delete","get","head","post","put","patch"],t=>{Ou.headers[t]={}});const A4=V.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),P4=t=>{const e={};let n,r,s;return t&&t.split(`
`).forEach(function(o){s=o.indexOf(":"),n=o.substring(0,s).trim().toLowerCase(),r=o.substring(s+1).trim(),!(!n||e[n]&&A4[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},HE=Symbol("internals");function Qa(t){return t&&String(t).trim().toLowerCase()}function sh(t){return t===!1||t==null?t:V.isArray(t)?t.map(sh):String(t)}function N4(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const O4=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function mp(t,e,n,r,s){if(V.isFunction(r))return r.call(this,e,n);if(s&&(e=n),!!V.isString(e)){if(V.isString(r))return e.indexOf(r)!==-1;if(V.isRegExp(r))return r.test(e)}}function L4(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function D4(t,e){const n=V.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(s,i,o){return this[r].call(this,e,s,i,o)},configurable:!0})})}let nn=class{constructor(e){e&&this.set(e)}set(e,n,r){const s=this;function i(a,l,c){const h=Qa(l);if(!h)throw new Error("header name must be a non-empty string");const f=V.findKey(s,h);(!f||s[f]===void 0||c===!0||c===void 0&&s[f]!==!1)&&(s[f||l]=sh(a))}const o=(a,l)=>V.forEach(a,(c,h)=>i(c,h,l));if(V.isPlainObject(e)||e instanceof this.constructor)o(e,n);else if(V.isString(e)&&(e=e.trim())&&!O4(e))o(P4(e),n);else if(V.isObject(e)&&V.isIterable(e)){let a={},l,c;for(const h of e){if(!V.isArray(h))throw TypeError("Object iterator must return a key-value pair");a[c=h[0]]=(l=a[c])?V.isArray(l)?[...l,h[1]]:[l,h[1]]:h[1]}o(a,n)}else e!=null&&i(n,e,r);return this}get(e,n){if(e=Qa(e),e){const r=V.findKey(this,e);if(r){const s=this[r];if(!n)return s;if(n===!0)return N4(s);if(V.isFunction(n))return n.call(this,s,r);if(V.isRegExp(n))return n.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=Qa(e),e){const r=V.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||mp(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let s=!1;function i(o){if(o=Qa(o),o){const a=V.findKey(r,o);a&&(!n||mp(r,r[a],a,n))&&(delete r[a],s=!0)}}return V.isArray(e)?e.forEach(i):i(e),s}clear(e){const n=Object.keys(this);let r=n.length,s=!1;for(;r--;){const i=n[r];(!e||mp(this,this[i],i,e,!0))&&(delete this[i],s=!0)}return s}normalize(e){const n=this,r={};return V.forEach(this,(s,i)=>{const o=V.findKey(r,i);if(o){n[o]=sh(s),delete n[i];return}const a=e?L4(i):String(i).trim();a!==i&&delete n[i],n[a]=sh(s),r[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return V.forEach(this,(r,s)=>{r!=null&&r!==!1&&(n[s]=e&&V.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(s=>r.set(s)),r}static accessor(e){const r=(this[HE]=this[HE]={accessors:{}}).accessors,s=this.prototype;function i(o){const a=Qa(o);r[a]||(D4(s,o),r[a]=!0)}return V.isArray(e)?e.forEach(i):i(e),this}};nn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);V.reduceDescriptors(nn.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});V.freezeMethods(nn);function gp(t,e){const n=this||Ou,r=e||n,s=nn.from(r.headers);let i=r.data;return V.forEach(t,function(a){i=a.call(n,i,s.normalize(),e?e.status:void 0)}),s.normalize(),i}function hb(t){return!!(t&&t.__CANCEL__)}function Sa(t,e,n){he.call(this,t??"canceled",he.ERR_CANCELED,e,n),this.name="CanceledError"}V.inherits(Sa,he,{__CANCEL__:!0});function db(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new he("Request failed with status code "+n.status,[he.ERR_BAD_REQUEST,he.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function M4(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function V4(t,e){t=t||10;const n=new Array(t),r=new Array(t);let s=0,i=0,o;return e=e!==void 0?e:1e3,function(l){const c=Date.now(),h=r[i];o||(o=c),n[s]=l,r[s]=c;let f=i,p=0;for(;f!==s;)p+=n[f++],f=f%t;if(s=(s+1)%t,s===i&&(i=(i+1)%t),c-o<e)return;const y=h&&c-h;return y?Math.round(p*1e3/y):void 0}}function j4(t,e){let n=0,r=1e3/e,s,i;const o=(c,h=Date.now())=>{n=h,s=null,i&&(clearTimeout(i),i=null),t(...c)};return[(...c)=>{const h=Date.now(),f=h-n;f>=r?o(c,h):(s=c,i||(i=setTimeout(()=>{i=null,o(s)},r-f)))},()=>s&&o(s)]}const sd=(t,e,n=3)=>{let r=0;const s=V4(50,250);return j4(i=>{const o=i.loaded,a=i.lengthComputable?i.total:void 0,l=o-r,c=s(l),h=o<=a;r=o;const f={loaded:o,total:a,progress:a?o/a:void 0,bytes:l,rate:c||void 0,estimated:c&&a&&h?(a-o)/c:void 0,event:i,lengthComputable:a!=null,[e?"download":"upload"]:!0};t(f)},n)},WE=(t,e)=>{const n=t!=null;return[r=>e[0]({lengthComputable:n,total:t,loaded:r}),e[1]]},KE=t=>(...e)=>V.asap(()=>t(...e)),U4=Nt.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,Nt.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(Nt.origin),Nt.navigator&&/(msie|trident)/i.test(Nt.navigator.userAgent)):()=>!0,F4=Nt.hasStandardBrowserEnv?{write(t,e,n,r,s,i){const o=[t+"="+encodeURIComponent(e)];V.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),V.isString(r)&&o.push("path="+r),V.isString(s)&&o.push("domain="+s),i===!0&&o.push("secure"),document.cookie=o.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function B4(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function $4(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function fb(t,e,n){let r=!B4(e);return t&&(r||n==!1)?$4(t,e):e}const QE=t=>t instanceof nn?{...t}:t;function Ui(t,e){e=e||{};const n={};function r(c,h,f,p){return V.isPlainObject(c)&&V.isPlainObject(h)?V.merge.call({caseless:p},c,h):V.isPlainObject(h)?V.merge({},h):V.isArray(h)?h.slice():h}function s(c,h,f,p){if(V.isUndefined(h)){if(!V.isUndefined(c))return r(void 0,c,f,p)}else return r(c,h,f,p)}function i(c,h){if(!V.isUndefined(h))return r(void 0,h)}function o(c,h){if(V.isUndefined(h)){if(!V.isUndefined(c))return r(void 0,c)}else return r(void 0,h)}function a(c,h,f){if(f in e)return r(c,h);if(f in t)return r(void 0,c)}const l={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(c,h,f)=>s(QE(c),QE(h),f,!0)};return V.forEach(Object.keys({...t,...e}),function(h){const f=l[h]||s,p=f(t[h],e[h],h);V.isUndefined(p)&&f!==a||(n[h]=p)}),n}const pb=t=>{const e=Ui({},t);let{data:n,withXSRFToken:r,xsrfHeaderName:s,xsrfCookieName:i,headers:o,auth:a}=e;e.headers=o=nn.from(o),e.url=lb(fb(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let l;if(V.isFormData(n)){if(Nt.hasStandardBrowserEnv||Nt.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((l=o.getContentType())!==!1){const[c,...h]=l?l.split(";").map(f=>f.trim()).filter(Boolean):[];o.setContentType([c||"multipart/form-data",...h].join("; "))}}if(Nt.hasStandardBrowserEnv&&(r&&V.isFunction(r)&&(r=r(e)),r||r!==!1&&U4(e.url))){const c=s&&i&&F4.read(i);c&&o.set(s,c)}return e},z4=typeof XMLHttpRequest<"u",q4=z4&&function(t){return new Promise(function(n,r){const s=pb(t);let i=s.data;const o=nn.from(s.headers).normalize();let{responseType:a,onUploadProgress:l,onDownloadProgress:c}=s,h,f,p,y,w;function b(){y&&y(),w&&w(),s.cancelToken&&s.cancelToken.unsubscribe(h),s.signal&&s.signal.removeEventListener("abort",h)}let R=new XMLHttpRequest;R.open(s.method.toUpperCase(),s.url,!0),R.timeout=s.timeout;function T(){if(!R)return;const x=nn.from("getAllResponseHeaders"in R&&R.getAllResponseHeaders()),M={data:!a||a==="text"||a==="json"?R.responseText:R.response,status:R.status,statusText:R.statusText,headers:x,config:t,request:R};db(function(I){n(I),b()},function(I){r(I),b()},M),R=null}"onloadend"in R?R.onloadend=T:R.onreadystatechange=function(){!R||R.readyState!==4||R.status===0&&!(R.responseURL&&R.responseURL.indexOf("file:")===0)||setTimeout(T)},R.onabort=function(){R&&(r(new he("Request aborted",he.ECONNABORTED,t,R)),R=null)},R.onerror=function(){r(new he("Network Error",he.ERR_NETWORK,t,R)),R=null},R.ontimeout=function(){let C=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const M=s.transitional||ub;s.timeoutErrorMessage&&(C=s.timeoutErrorMessage),r(new he(C,M.clarifyTimeoutError?he.ETIMEDOUT:he.ECONNABORTED,t,R)),R=null},i===void 0&&o.setContentType(null),"setRequestHeader"in R&&V.forEach(o.toJSON(),function(C,M){R.setRequestHeader(M,C)}),V.isUndefined(s.withCredentials)||(R.withCredentials=!!s.withCredentials),a&&a!=="json"&&(R.responseType=s.responseType),c&&([p,w]=sd(c,!0),R.addEventListener("progress",p)),l&&R.upload&&([f,y]=sd(l),R.upload.addEventListener("progress",f),R.upload.addEventListener("loadend",y)),(s.cancelToken||s.signal)&&(h=x=>{R&&(r(!x||x.type?new Sa(null,t,R):x),R.abort(),R=null)},s.cancelToken&&s.cancelToken.subscribe(h),s.signal&&(s.signal.aborted?h():s.signal.addEventListener("abort",h)));const v=M4(s.url);if(v&&Nt.protocols.indexOf(v)===-1){r(new he("Unsupported protocol "+v+":",he.ERR_BAD_REQUEST,t));return}R.send(i||null)})},H4=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let r=new AbortController,s;const i=function(c){if(!s){s=!0,a();const h=c instanceof Error?c:this.reason;r.abort(h instanceof he?h:new Sa(h instanceof Error?h.message:h))}};let o=e&&setTimeout(()=>{o=null,i(new he(`timeout ${e} of ms exceeded`,he.ETIMEDOUT))},e);const a=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(c=>{c.unsubscribe?c.unsubscribe(i):c.removeEventListener("abort",i)}),t=null)};t.forEach(c=>c.addEventListener("abort",i));const{signal:l}=r;return l.unsubscribe=()=>V.asap(a),l}},W4=function*(t,e){let n=t.byteLength;if(n<e){yield t;return}let r=0,s;for(;r<n;)s=r+e,yield t.slice(r,s),r=s},K4=async function*(t,e){for await(const n of Q4(t))yield*W4(n,e)},Q4=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:r}=await e.read();if(n)break;yield r}}finally{await e.cancel()}},GE=(t,e,n,r)=>{const s=K4(t,e);let i=0,o,a=l=>{o||(o=!0,r&&r(l))};return new ReadableStream({async pull(l){try{const{done:c,value:h}=await s.next();if(c){a(),l.close();return}let f=h.byteLength;if(n){let p=i+=f;n(p)}l.enqueue(new Uint8Array(h))}catch(c){throw a(c),c}},cancel(l){return a(l),s.return()}},{highWaterMark:2})},Yd=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",mb=Yd&&typeof ReadableStream=="function",G4=Yd&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),gb=(t,...e)=>{try{return!!t(...e)}catch{return!1}},J4=mb&&gb(()=>{let t=!1;const e=new Request(Nt.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),JE=64*1024,yg=mb&&gb(()=>V.isReadableStream(new Response("").body)),id={stream:yg&&(t=>t.body)};Yd&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!id[e]&&(id[e]=V.isFunction(t[e])?n=>n[e]():(n,r)=>{throw new he(`Response type '${e}' is not supported`,he.ERR_NOT_SUPPORT,r)})})})(new Response);const X4=async t=>{if(t==null)return 0;if(V.isBlob(t))return t.size;if(V.isSpecCompliantForm(t))return(await new Request(Nt.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(V.isArrayBufferView(t)||V.isArrayBuffer(t))return t.byteLength;if(V.isURLSearchParams(t)&&(t=t+""),V.isString(t))return(await G4(t)).byteLength},Y4=async(t,e)=>{const n=V.toFiniteNumber(t.getContentLength());return n??X4(e)},Z4=Yd&&(async t=>{let{url:e,method:n,data:r,signal:s,cancelToken:i,timeout:o,onDownloadProgress:a,onUploadProgress:l,responseType:c,headers:h,withCredentials:f="same-origin",fetchOptions:p}=pb(t);c=c?(c+"").toLowerCase():"text";let y=H4([s,i&&i.toAbortSignal()],o),w;const b=y&&y.unsubscribe&&(()=>{y.unsubscribe()});let R;try{if(l&&J4&&n!=="get"&&n!=="head"&&(R=await Y4(h,r))!==0){let M=new Request(e,{method:"POST",body:r,duplex:"half"}),U;if(V.isFormData(r)&&(U=M.headers.get("content-type"))&&h.setContentType(U),M.body){const[I,_]=WE(R,sd(KE(l)));r=GE(M.body,JE,I,_)}}V.isString(f)||(f=f?"include":"omit");const T="credentials"in Request.prototype;w=new Request(e,{...p,signal:y,method:n.toUpperCase(),headers:h.normalize().toJSON(),body:r,duplex:"half",credentials:T?f:void 0});let v=await fetch(w,p);const x=yg&&(c==="stream"||c==="response");if(yg&&(a||x&&b)){const M={};["status","statusText","headers"].forEach(S=>{M[S]=v[S]});const U=V.toFiniteNumber(v.headers.get("content-length")),[I,_]=a&&WE(U,sd(KE(a),!0))||[];v=new Response(GE(v.body,JE,I,()=>{_&&_(),b&&b()}),M)}c=c||"text";let C=await id[V.findKey(id,c)||"text"](v,t);return!x&&b&&b(),await new Promise((M,U)=>{db(M,U,{data:C,headers:nn.from(v.headers),status:v.status,statusText:v.statusText,config:t,request:w})})}catch(T){throw b&&b(),T&&T.name==="TypeError"&&/Load failed|fetch/i.test(T.message)?Object.assign(new he("Network Error",he.ERR_NETWORK,t,w),{cause:T.cause||T}):he.from(T,T&&T.code,t,w)}}),vg={http:p4,xhr:q4,fetch:Z4};V.forEach(vg,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const XE=t=>`- ${t}`,eB=t=>V.isFunction(t)||t===null||t===!1,yb={getAdapter:t=>{t=V.isArray(t)?t:[t];const{length:e}=t;let n,r;const s={};for(let i=0;i<e;i++){n=t[i];let o;if(r=n,!eB(n)&&(r=vg[(o=String(n)).toLowerCase()],r===void 0))throw new he(`Unknown adapter '${o}'`);if(r)break;s[o||"#"+i]=r}if(!r){const i=Object.entries(s).map(([a,l])=>`adapter ${a} `+(l===!1?"is not supported by the environment":"is not available in the build"));let o=e?i.length>1?`since :
`+i.map(XE).join(`
`):" "+XE(i[0]):"as no adapter specified";throw new he("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r},adapters:vg};function yp(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Sa(null,t)}function YE(t){return yp(t),t.headers=nn.from(t.headers),t.data=gp.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),yb.getAdapter(t.adapter||Ou.adapter)(t).then(function(r){return yp(t),r.data=gp.call(t,t.transformResponse,r),r.headers=nn.from(r.headers),r},function(r){return hb(r)||(yp(t),r&&r.response&&(r.response.data=gp.call(t,t.transformResponse,r.response),r.response.headers=nn.from(r.response.headers))),Promise.reject(r)})}const vb="1.11.0",Zd={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{Zd[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const ZE={};Zd.transitional=function(e,n,r){function s(i,o){return"[Axios v"+vb+"] Transitional option '"+i+"'"+o+(r?". "+r:"")}return(i,o,a)=>{if(e===!1)throw new he(s(o," has been removed"+(n?" in "+n:"")),he.ERR_DEPRECATED);return n&&!ZE[o]&&(ZE[o]=!0,console.warn(s(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(i,o,a):!0}};Zd.spelling=function(e){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function tB(t,e,n){if(typeof t!="object")throw new he("options must be an object",he.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let s=r.length;for(;s-- >0;){const i=r[s],o=e[i];if(o){const a=t[i],l=a===void 0||o(a,i,t);if(l!==!0)throw new he("option "+i+" must be "+l,he.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new he("Unknown option "+i,he.ERR_BAD_OPTION)}}const ih={assertOptions:tB,validators:Zd},qn=ih.validators;let Si=class{constructor(e){this.defaults=e||{},this.interceptors={request:new qE,response:new qE}}async request(e,n){try{return await this._request(e,n)}catch(r){if(r instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const i=s.stack?s.stack.replace(/^.+\n/,""):"";try{r.stack?i&&!String(r.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+i):r.stack=i}catch{}}throw r}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=Ui(this.defaults,n);const{transitional:r,paramsSerializer:s,headers:i}=n;r!==void 0&&ih.assertOptions(r,{silentJSONParsing:qn.transitional(qn.boolean),forcedJSONParsing:qn.transitional(qn.boolean),clarifyTimeoutError:qn.transitional(qn.boolean)},!1),s!=null&&(V.isFunction(s)?n.paramsSerializer={serialize:s}:ih.assertOptions(s,{encode:qn.function,serialize:qn.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),ih.assertOptions(n,{baseUrl:qn.spelling("baseURL"),withXsrfToken:qn.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=i&&V.merge(i.common,i[n.method]);i&&V.forEach(["delete","get","head","post","put","patch","common"],w=>{delete i[w]}),n.headers=nn.concat(o,i);const a=[];let l=!0;this.interceptors.request.forEach(function(b){typeof b.runWhen=="function"&&b.runWhen(n)===!1||(l=l&&b.synchronous,a.unshift(b.fulfilled,b.rejected))});const c=[];this.interceptors.response.forEach(function(b){c.push(b.fulfilled,b.rejected)});let h,f=0,p;if(!l){const w=[YE.bind(this),void 0];for(w.unshift(...a),w.push(...c),p=w.length,h=Promise.resolve(n);f<p;)h=h.then(w[f++],w[f++]);return h}p=a.length;let y=n;for(f=0;f<p;){const w=a[f++],b=a[f++];try{y=w(y)}catch(R){b.call(this,R);break}}try{h=YE.call(this,y)}catch(w){return Promise.reject(w)}for(f=0,p=c.length;f<p;)h=h.then(c[f++],c[f++]);return h}getUri(e){e=Ui(this.defaults,e);const n=fb(e.baseURL,e.url,e.allowAbsoluteUrls);return lb(n,e.params,e.paramsSerializer)}};V.forEach(["delete","get","head","options"],function(e){Si.prototype[e]=function(n,r){return this.request(Ui(r||{},{method:e,url:n,data:(r||{}).data}))}});V.forEach(["post","put","patch"],function(e){function n(r){return function(i,o,a){return this.request(Ui(a||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}Si.prototype[e]=n(),Si.prototype[e+"Form"]=n(!0)});let nB=class _b{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(i){n=i});const r=this;this.promise.then(s=>{if(!r._listeners)return;let i=r._listeners.length;for(;i-- >0;)r._listeners[i](s);r._listeners=null}),this.promise.then=s=>{let i;const o=new Promise(a=>{r.subscribe(a),i=a}).then(s);return o.cancel=function(){r.unsubscribe(i)},o},e(function(i,o,a){r.reason||(r.reason=new Sa(i,o,a),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=r=>{e.abort(r)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new _b(function(s){e=s}),cancel:e}}};function rB(t){return function(n){return t.apply(null,n)}}function sB(t){return V.isObject(t)&&t.isAxiosError===!0}const _g={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(_g).forEach(([t,e])=>{_g[e]=t});function wb(t){const e=new Si(t),n=J1(Si.prototype.request,e);return V.extend(n,Si.prototype,e,{allOwnKeys:!0}),V.extend(n,e,null,{allOwnKeys:!0}),n.create=function(s){return wb(Ui(t,s))},n}const et=wb(Ou);et.Axios=Si;et.CanceledError=Sa;et.CancelToken=nB;et.isCancel=hb;et.VERSION=vb;et.toFormData=Xd;et.AxiosError=he;et.Cancel=et.CanceledError;et.all=function(e){return Promise.all(e)};et.spread=rB;et.isAxiosError=sB;et.mergeConfig=Ui;et.AxiosHeaders=nn;et.formToJSON=t=>cb(V.isHTMLForm(t)?new FormData(t):t);et.getAdapter=yb.getAdapter;et.HttpStatusCode=_g;et.default=et;const{Axios:E9,AxiosError:T9,CanceledError:S9,isCancel:x9,CancelToken:R9,VERSION:I9,all:b9,Cancel:k9,isAxiosError:C9,spread:A9,toFormData:P9,AxiosHeaders:eT,HttpStatusCode:N9,formToJSON:O9,getAdapter:L9,mergeConfig:D9}=et,Iv=et.create({baseURL:"http://localhost:4000",timeout:1e4});Iv.interceptors.request.use(async t=>{const e=$r.currentUser;if(e){const n=await e.getIdToken();t.headers||(t.headers=new eT),t.headers instanceof eT?(t.headers.set("Authorization",`Bearer ${n}`),t.headers.has("Content-Type")||t.headers.set("Content-Type","application/json")):(t.headers.Authorization=`Bearer ${n}`,t.headers["Content-Type"]||(t.headers["Content-Type"]="application/json"))}return t},t=>Promise.reject(t));Iv.interceptors.response.use(t=>t,t=>Promise.reject(t));function iB(){const{user:t}=Cu(),{data:e}=mv(),[n,r]=L.useState(""),[s,i]=L.useState(""),[o,a]=L.useState([]),l=L.useMemo(()=>{var h,f,p;return((h=e==null?void 0:e.displayName)==null?void 0:h.trim())||((f=t==null?void 0:t.displayName)==null?void 0:f.trim())||((p=t==null?void 0:t.email)==null?void 0:p.split("@")[0])||""},[e==null?void 0:e.displayName,t==null?void 0:t.displayName,t==null?void 0:t.email]),c=async h=>{h.preventDefault();const f=bF.safeParse({name:n,description:s,tags:o});if(!f.success){we(f.error.errors[0].message);return}try{await Iv.post("/activities",f.data).catch(()=>{}),we("Activity created"),r(""),i(""),a([])}catch{we("Failed to create (demo only)")}};return g.jsxs("section",{className:"container-app grid md:grid-cols-2 gap-6 py-8",children:[g.jsxs("form",{onSubmit:c,className:"card p-5 space-y-4",children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsx("h3",{className:"text-xl font-semibold",children:"Create Activity"}),g.jsxs("span",{className:"text-sm opacity-80",children:["User: ",g.jsx("span",{className:"font-medium",children:l})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"label",htmlFor:"name",children:"Name"}),g.jsx("input",{id:"name",className:"input",placeholder:"e.g. Saturday Hike",value:n,onChange:h=>r(h.target.value)})]}),g.jsxs("div",{children:[g.jsx("label",{className:"label",htmlFor:"desc",children:"Description"}),g.jsx("textarea",{id:"desc",className:"input h-28",placeholder:"Short description",value:s,onChange:h=>i(h.target.value)})]}),g.jsxs("div",{children:[g.jsx("div",{className:"label",children:"Tags"}),g.jsx(G1,{value:o,onChange:a})]}),g.jsx("button",{className:"btn-primary w-full",type:"submit",children:"Create"})]}),g.jsxs("aside",{className:"card p-5",children:[g.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Tips"}),g.jsxs("ul",{className:"list-disc ml-5 space-y-1 opacity-90",children:[g.jsx("li",{children:"Use clear, friendly titles"}),g.jsx("li",{children:"Add 1–3 descriptive tags"}),g.jsx("li",{children:"Keep description short and helpful"})]})]})]})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eb="firebasestorage.googleapis.com",Tb="storageBucket",oB=2*60*1e3,aB=10*60*1e3,lB=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class We extends cr{constructor(e,n,r=0){super(vp(e),`Firebase Storage: ${n} (${vp(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,We.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return vp(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Me;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Me||(Me={}));function vp(t){return"storage/"+t}function bv(){const t="An unknown error occurred, please check the error payload for server response.";return new We(Me.UNKNOWN,t)}function uB(t){return new We(Me.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function cB(t){return new We(Me.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function hB(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new We(Me.UNAUTHENTICATED,t)}function dB(){return new We(Me.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function fB(t){return new We(Me.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function Sb(){return new We(Me.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function xb(){return new We(Me.CANCELED,"User canceled the upload/download.")}function pB(t){return new We(Me.INVALID_URL,"Invalid URL '"+t+"'.")}function mB(t){return new We(Me.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function gB(){return new We(Me.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Tb+"' property when initializing the app?")}function Rb(){return new We(Me.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function yB(){return new We(Me.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function vB(){return new We(Me.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function _B(t){return new We(Me.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function wg(t){return new We(Me.INVALID_ARGUMENT,t)}function Ib(){return new We(Me.APP_DELETED,"The Firebase app was deleted.")}function wB(t){return new We(Me.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Rl(t,e){return new We(Me.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Ga(t){throw new We(Me.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=ln.makeFromUrl(e,n)}catch{return new ln(e,"")}if(r.path==="")return r;throw mB(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(C){C.path.charAt(C.path.length-1)==="/"&&(C.path_=C.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+s+o,"i"),l={bucket:1,path:3};function c(C){C.path_=decodeURIComponent(C.path)}const h="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",y=new RegExp(`^https?://${f}/${h}/b/${s}/o${p}`,"i"),w={bucket:1,path:3},b=n===Eb?"(?:storage.googleapis.com|storage.cloud.google.com)":n,R="([^?#]*)",T=new RegExp(`^https?://${b}/${s}/${R}`,"i"),x=[{regex:a,indices:l,postModify:i},{regex:y,indices:w,postModify:c},{regex:T,indices:{bucket:1,path:2},postModify:c}];for(let C=0;C<x.length;C++){const M=x[C],U=M.regex.exec(e);if(U){const I=U[M.indices.bucket];let _=U[M.indices.path];_||(_=""),r=new ln(I,_),M.postModify(r);break}}if(r==null)throw pB(e);return r}}class EB{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TB(t,e,n){let r=1,s=null,i=null,o=!1,a=0;function l(){return a===2}let c=!1;function h(...R){c||(c=!0,e.apply(null,R))}function f(R){s=setTimeout(()=>{s=null,t(y,l())},R)}function p(){i&&clearTimeout(i)}function y(R,...T){if(c){p();return}if(R){p(),h.call(null,R,...T);return}if(l()||o){p(),h.call(null,R,...T);return}r<64&&(r*=2);let x;a===1?(a=2,x=0):x=(r+Math.random())*1e3,f(x)}let w=!1;function b(R){w||(w=!0,p(),!c&&(s!==null?(R||(a=2),clearTimeout(s),f(0)):R||(a=1)))}return f(0),i=setTimeout(()=>{o=!0,b(!0)},n),b}function SB(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xB(t){return t!==void 0}function RB(t){return typeof t=="function"}function IB(t){return typeof t=="object"&&!Array.isArray(t)}function ef(t){return typeof t=="string"||t instanceof String}function tT(t){return kv()&&t instanceof Blob}function kv(){return typeof Blob<"u"}function nT(t,e,n,r){if(r<e)throw wg(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw wg(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xa(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function bb(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var xi;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(xi||(xi={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kb(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bB{constructor(e,n,r,s,i,o,a,l,c,h,f,p=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=h,this.connectionFactory_=f,this.retry=p,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((y,w)=>{this.resolve_=y,this.reject_=w,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new Ic(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const a=i.getErrorCode()===xi.NO_ERROR,l=i.getStatus();if(!a||kb(l,this.additionalRetryCodes_)&&this.retry){const h=i.getErrorCode()===xi.ABORT;r(!1,new Ic(!1,null,h));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new Ic(c,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,a=s.connection;if(s.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());xB(l)?i(l):i()}catch(l){o(l)}else if(a!==null){const l=bv();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(s.canceled){const l=this.appDelete_?Ib():xb();o(l)}else{const l=Sb();o(l)}};this.canceled_?n(!1,new Ic(!1,null,!0)):this.backoffId_=TB(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&SB(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Ic{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function kB(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function CB(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function AB(t,e){e&&(t["X-Firebase-GMPID"]=e)}function PB(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function NB(t,e,n,r,s,i,o=!0){const a=bb(t.urlParams),l=t.url+a,c=Object.assign({},t.headers);return AB(c,e),kB(c,n),CB(c,i),PB(c,r),new bB(l,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OB(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function LB(...t){const e=OB();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(kv())return new Blob(t);throw new We(Me.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function DB(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MB(t){if(typeof atob>"u")throw _B("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class _p{constructor(e,n){this.data=e,this.contentType=n||null}}function VB(t,e){switch(t){case Xn.RAW:return new _p(Cb(e));case Xn.BASE64:case Xn.BASE64URL:return new _p(Ab(t,e));case Xn.DATA_URL:return new _p(UB(e),FB(e))}throw bv()}function Cb(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=r,o=t.charCodeAt(++n);r=65536|(i&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function jB(t){let e;try{e=decodeURIComponent(t)}catch{throw Rl(Xn.DATA_URL,"Malformed data URL.")}return Cb(e)}function Ab(t,e){switch(t){case Xn.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw Rl(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case Xn.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw Rl(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=MB(e)}catch(s){throw s.message.includes("polyfill")?s:Rl(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class Pb{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Rl(Xn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=BB(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function UB(t){const e=new Pb(t);return e.base64?Ab(Xn.BASE64,e.rest):jB(e.rest)}function FB(t){return new Pb(t).contentType}function BB(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs{constructor(e,n){let r=0,s="";tT(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(tT(this.data_)){const r=this.data_,s=DB(r,e,n);return s===null?null:new hs(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new hs(r,!0)}}static getBlob(...e){if(kv()){const n=e.map(r=>r instanceof hs?r.data_:r);return new hs(LB.apply(null,n))}else{const n=e.map(o=>ef(o)?VB(Xn.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)s[i++]=o[a]}),new hs(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nb(t){let e;try{e=JSON.parse(t)}catch{return null}return IB(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $B(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function zB(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function Ob(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qB(t,e){return e}class Ut{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||qB}}let bc=null;function HB(t){return!ef(t)||t.length<2?t:Ob(t)}function Lb(){if(bc)return bc;const t=[];t.push(new Ut("bucket")),t.push(new Ut("generation")),t.push(new Ut("metageneration")),t.push(new Ut("name","fullPath",!0));function e(i,o){return HB(o)}const n=new Ut("name");n.xform=e,t.push(n);function r(i,o){return o!==void 0?Number(o):o}const s=new Ut("size");return s.xform=r,t.push(s),t.push(new Ut("timeCreated")),t.push(new Ut("updated")),t.push(new Ut("md5Hash",null,!0)),t.push(new Ut("cacheControl",null,!0)),t.push(new Ut("contentDisposition",null,!0)),t.push(new Ut("contentEncoding",null,!0)),t.push(new Ut("contentLanguage",null,!0)),t.push(new Ut("contentType",null,!0)),t.push(new Ut("metadata","customMetadata",!0)),bc=t,bc}function WB(t,e){function n(){const r=t.bucket,s=t.fullPath,i=new ln(r,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function KB(t,e,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const o=n[i];r[o.local]=o.xform(r,e[o.server])}return WB(r,t),r}function Db(t,e,n){const r=Nb(e);return r===null?null:KB(t,r,n)}function QB(t,e,n,r){const s=Nb(e);if(s===null||!ef(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(c=>{const h=t.bucket,f=t.fullPath,p="/b/"+o(h)+"/o/"+o(f),y=xa(p,n,r),w=bb({alt:"media",token:c});return y+w})[0]}function Mb(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class Ki{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pr(t){if(!t)throw bv()}function Cv(t,e){function n(r,s){const i=Db(t,s,e);return Pr(i!==null),i}return n}function GB(t,e){function n(r,s){const i=Db(t,s,e);return Pr(i!==null),QB(i,s,t.host,t._protocol)}return n}function Lu(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=dB():s=hB():n.getStatus()===402?s=cB(t.bucket):n.getStatus()===403?s=fB(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function Av(t){const e=Lu(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=uB(t.path)),i.serverResponse=s.serverResponse,i}return n}function JB(t,e,n){const r=e.fullServerUrl(),s=xa(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,a=new Ki(s,i,Cv(t,n),o);return a.errorHandler=Av(e),a}function XB(t,e,n){const r=e.fullServerUrl(),s=xa(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,a=new Ki(s,i,GB(t,n),o);return a.errorHandler=Av(e),a}function YB(t,e){const n=e.fullServerUrl(),r=xa(n,t.host,t._protocol),s="DELETE",i=t.maxOperationRetryTime;function o(l,c){}const a=new Ki(r,s,o,i);return a.successCodes=[200,204],a.errorHandler=Av(e),a}function ZB(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function Vb(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=ZB(null,e)),r}function e3(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let x="";for(let C=0;C<2;C++)x=x+Math.random().toString().slice(2);return x}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const c=Vb(e,r,s),h=Mb(c,n),f="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,p=`\r
--`+l+"--",y=hs.getBlob(f,r,p);if(y===null)throw Rb();const w={name:c.fullPath},b=xa(i,t.host,t._protocol),R="POST",T=t.maxUploadRetryTime,v=new Ki(b,R,Cv(t,n),T);return v.urlParams=w,v.headers=o,v.body=y.uploadData(),v.errorHandler=Lu(e),v}class od{constructor(e,n,r,s){this.current=e,this.total=n,this.finalized=!!r,this.metadata=s||null}}function Pv(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{Pr(!1)}return Pr(!!n&&(e||["active"]).indexOf(n)!==-1),n}function t3(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o=Vb(e,r,s),a={name:o.fullPath},l=xa(i,t.host,t._protocol),c="POST",h={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},f=Mb(o,n),p=t.maxUploadRetryTime;function y(b){Pv(b);let R;try{R=b.getResponseHeader("X-Goog-Upload-URL")}catch{Pr(!1)}return Pr(ef(R)),R}const w=new Ki(l,c,y,p);return w.urlParams=a,w.headers=h,w.body=f,w.errorHandler=Lu(e),w}function n3(t,e,n,r){const s={"X-Goog-Upload-Command":"query"};function i(c){const h=Pv(c,["active","final"]);let f=null;try{f=c.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Pr(!1)}f||Pr(!1);const p=Number(f);return Pr(!isNaN(p)),new od(p,r.size(),h==="final")}const o="POST",a=t.maxUploadRetryTime,l=new Ki(n,o,i,a);return l.headers=s,l.errorHandler=Lu(e),l}const rT=256*1024;function r3(t,e,n,r,s,i,o,a){const l=new od(0,0);if(o?(l.current=o.current,l.total=o.total):(l.current=0,l.total=r.size()),r.size()!==l.total)throw yB();const c=l.total-l.current;let h=c;s>0&&(h=Math.min(h,s));const f=l.current,p=f+h;let y="";h===0?y="finalize":c===h?y="upload, finalize":y="upload";const w={"X-Goog-Upload-Command":y,"X-Goog-Upload-Offset":`${l.current}`},b=r.slice(f,p);if(b===null)throw Rb();function R(C,M){const U=Pv(C,["active","final"]),I=l.current+h,_=r.size();let S;return U==="final"?S=Cv(e,i)(C,M):S=null,new od(I,_,U==="final",S)}const T="POST",v=e.maxUploadRetryTime,x=new Ki(n,T,R,v);return x.headers=w,x.body=b.uploadData(),x.progressCallback=a||null,x.errorHandler=Lu(t),x}const Gt={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function wp(t){switch(t){case"running":case"pausing":case"canceling":return Gt.RUNNING;case"paused":return Gt.PAUSED;case"success":return Gt.SUCCESS;case"canceled":return Gt.CANCELED;case"error":return Gt.ERROR;default:return Gt.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s3{constructor(e,n,r){if(RB(e)||n!=null||r!=null)this.next=e,this.error=n??void 0,this.complete=r??void 0;else{const i=e;this.next=i.next,this.error=i.error,this.complete=i.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zi(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class i3{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=xi.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=xi.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=xi.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s){if(this.sent_)throw Ga("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),s!==void 0)for(const i in s)s.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,s[i].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Ga("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Ga("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Ga("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Ga("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class o3 extends i3{initXhr(){this.xhr_.responseType="text"}}function oi(){return new o3}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a3{constructor(e,n,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=r,this._mappings=Lb(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=s=>{if(this._request=void 0,this._chunkMultiplier=1,s._codeEquals(Me.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const i=this.isExponentialBackoffExpired();if(kb(s.status,[]))if(i)s=Sb();else{this.sleepTime=Math.max(this.sleepTime*2,lB),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=s,this._transition("error")}},this._metadataErrorHandler=s=>{this._request=void 0,s._codeEquals(Me.CANCELED)?this.completeTransitions_():(this._error=s,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((s,i)=>{this._resolve=s,this._reject=i,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,r])=>{switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const r=t3(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,oi,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._uploadUrl=i,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,r)=>{const s=n3(this._ref.storage,this._ref._location,e,this._blob),i=this._ref.storage._makeRequest(s,oi,n,r);this._request=i,i.getPromise().then(o=>{o=o,this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=rT*this._chunkMultiplier,n=new od(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((s,i)=>{let o;try{o=r3(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(l){this._error=l,this._transition("error");return}const a=this._ref.storage._makeRequest(o,oi,s,i,!1);this._request=a,a.getPromise().then(l=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(l.current),l.finalized?(this._metadata=l.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){rT*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const r=JB(this._ref.storage,this._ref._location,this._mappings),s=this._ref.storage._makeRequest(r,oi,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._metadata=i,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const r=e3(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,oi,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._metadata=i,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=xb(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=wp(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,r,s){const i=new s3(n||void 0,r||void 0,s||void 0);return this._addObserver(i),()=>{this._removeObserver(i)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(wp(this._state)){case Gt.SUCCESS:Zi(this._resolve.bind(null,this.snapshot))();break;case Gt.CANCELED:case Gt.ERROR:const n=this._reject;Zi(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(wp(this._state)){case Gt.RUNNING:case Gt.PAUSED:e.next&&Zi(e.next.bind(e,this.snapshot))();break;case Gt.SUCCESS:e.complete&&Zi(e.complete.bind(e))();break;case Gt.CANCELED:case Gt.ERROR:e.error&&Zi(e.error.bind(e,this._error))();break;default:e.error&&Zi(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi{constructor(e,n){this._service=e,n instanceof ln?this._location=n:this._location=ln.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Fi(e,n)}get root(){const e=new ln(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Ob(this._location.path)}get storage(){return this._service}get parent(){const e=$B(this._location.path);if(e===null)return null;const n=new ln(this._location.bucket,e);return new Fi(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw wB(e)}}function l3(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new a3(t,new hs(e),n)}function u3(t){t._throwIfRoot("getDownloadURL");const e=XB(t.storage,t._location,Lb());return t.storage.makeRequestWithTokens(e,oi).then(n=>{if(n===null)throw vB();return n})}function c3(t){t._throwIfRoot("deleteObject");const e=YB(t.storage,t._location);return t.storage.makeRequestWithTokens(e,oi)}function h3(t,e){const n=zB(t._location.path,e),r=new ln(t._location.bucket,n);return new Fi(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d3(t){return/^[A-Za-z]+:\/\//.test(t)}function f3(t,e){return new Fi(t,e)}function jb(t,e){if(t instanceof Nv){const n=t;if(n._bucket==null)throw gB();const r=new Fi(n,n._bucket);return e!=null?jb(r,e):r}else return e!==void 0?h3(t,e):t}function p3(t,e){if(e&&d3(e)){if(t instanceof Nv)return f3(t,e);throw wg("To use ref(service, url), the first argument must be a Storage instance.")}else return jb(t,e)}function sT(t,e){const n=e==null?void 0:e[Tb];return n==null?null:ln.makeFromBucketSpec(n,t)}function m3(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:cR(s,t.app.options.projectId))}class Nv{constructor(e,n,r,s,i){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._bucket=null,this._host=Eb,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=oB,this._maxUploadRetryTime=aB,this._requests=new Set,s!=null?this._bucket=ln.makeFromBucketSpec(s,this._host):this._bucket=sT(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=ln.makeFromBucketSpec(this._url,e):this._bucket=sT(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){nT("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){nT("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Fi(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new EB(Ib());{const o=NB(e,this._appId,r,s,n,this._firebaseVersion,i);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const iT="@firebase/storage",oT="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ub="storage";function g3(t,e,n){return t=qe(t),l3(t,e,n)}function y3(t){return t=qe(t),u3(t)}function v3(t){return t=qe(t),c3(t)}function aT(t,e){return t=qe(t),p3(t,e)}function _3(t=wy(),e){t=qe(t);const r=Pd(t,Ub).getImmediate({identifier:e}),s=aR("storage");return s&&w3(r,...s),r}function w3(t,e,n,r={}){m3(t,e,n,r)}function E3(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new Nv(n,r,s,e,qi)}function T3(){Ai(new qs(Ub,E3,"PUBLIC").setMultipleInstances(!0)),tr(iT,oT,""),tr(iT,oT,"esm2017")}T3();const kc=240,Ep=5;function S3(){const{user:t}=Cu(),{data:e,isLoading:n,updateProfile:r}=mv(),[s,i]=L.useState(""),[o,a]=L.useState(""),[l,c]=L.useState(""),[h,f]=L.useState([]),[p,y]=L.useState(""),[w,b]=L.useState(!1),[R,T]=L.useState(0),v=L.useRef(null),x=_3();L.useEffect(()=>{var S;if(e||t){const k=((S=t==null?void 0:t.email)==null?void 0:S.split("@")[0])||"";i((e==null?void 0:e.username)||k),a((e==null?void 0:e.displayName)||(t==null?void 0:t.displayName)||(e==null?void 0:e.username)||k),c((e==null?void 0:e.bio)||""),f((e==null?void 0:e.interests)||[]),y((e==null?void 0:e.photoURL)||(t==null?void 0:t.photoURL)||"")}},[e,t]);const C=()=>{var S;return(S=v.current)==null?void 0:S.click()},M=S=>{if(!S)return;if(!S.type.startsWith("image/")){we("กรุณาเลือกไฟล์รูปภาพ");return}if(S.size/(1024*1024)>Ep){we(`ไฟล์ใหญ่เกินไป (จำกัด ${Ep} MB)`);return}const N=URL.createObjectURL(S);if(y(N),!(t!=null&&t.uid))return;const O=`avatars/${t.uid}.jpg`,A=aT(x,O);b(!0),T(0);const Ue=g3(A,S,{contentType:S.type});Ue.on("state_changed",se=>{const Ve=Math.round(se.bytesTransferred/se.totalBytes*100);T(Ve)},se=>{console.error(se),b(!1),we("อัปโหลดรูปไม่สำเร็จ")},async()=>{const se=await y3(Ue.snapshot.ref);y(se),b(!1),T(100),we("อัปโหลดรูปเรียบร้อย")})},U=async()=>{try{if(!(t!=null&&t.uid))return;const S=`avatars/${t.uid}.jpg`;await v3(aT(x,S)).catch(()=>{}),y(""),we("ลบรูปโปรไฟล์แล้ว")}catch{we("ลบรูปไม่สำเร็จ")}},I=async()=>{try{if(l.length>kc){we(`Bio ยาวเกิน ${kc} ตัวอักษร`);return}await r({username:s,displayName:(o==null?void 0:o.trim())||s,bio:l,interests:h,photoURL:p}),we("Profile updated")}catch{we("Failed to update profile")}};if(!t)return g.jsx("section",{className:"container-app py-8",children:g.jsx("div",{className:"card p-4",children:"Please sign in to view profile."})});if(n)return g.jsx("section",{className:"container-app py-8",children:g.jsx("div",{className:"card p-4",children:"Loading…"})});const _=(o||s||t.email||"?").charAt(0).toUpperCase();return g.jsxs("section",{className:"container-app py-8",children:[g.jsxs("div",{className:"mb-6",children:[g.jsx("h2",{className:"text-2xl font-semibold",children:"Profile"}),g.jsx("p",{className:"opacity-80 text-sm",children:"Update your public profile and preferences"})]}),g.jsxs("div",{className:"grid gap-6 md:grid-cols-[420px,1fr]",children:[g.jsxs("aside",{className:"card p-5 space-y-5",children:[g.jsx("h3",{className:"text-lg font-semibold",children:"Profile Picture"}),g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsxs("div",{className:"relative h-24 w-24 shrink-0",children:[p?g.jsx("img",{src:p,alt:"Avatar",className:"h-24 w-24 rounded-full object-cover ring-2 ring-white/20"}):g.jsx("div",{className:"grid h-24 w-24 place-items-center rounded-full bg-white/10 text-2xl font-semibold ring-2 ring-white/20",children:_}),w&&g.jsx("div",{className:"absolute -bottom-2 left-1/2 w-28 -translate-x-1/2 rounded-full bg-white/10",children:g.jsx("div",{className:"h-1 rounded-full bg-gradient-to-r from-amber-400 to-pink-500",style:{width:`${R}%`}})})]}),g.jsxs("div",{className:"flex flex-col gap-2",children:[g.jsx("button",{onClick:C,className:`rounded-full px-4 py-2 font-semibold text-white shadow-lg shadow-amber-500/10\r
                           bg-gradient-to-r from-amber-500 to-pink-500 hover:from-amber-400 hover:to-pink-400\r
                           focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-300 transition disabled:opacity-60`,disabled:w,children:w?"Uploading…":"Upload new"}),p&&g.jsx("button",{onClick:U,className:"rounded-full px-4 py-2 font-semibold border border-white/15 bg-white/5 hover:bg-white/10",children:"Remove"}),g.jsx("input",{ref:v,type:"file",accept:"image/*",hidden:!0,onChange:S=>{var k;return M(((k=S.target.files)==null?void 0:k[0])||null)}}),g.jsxs("p",{className:"text-xs text-white/60",children:["แนะนำ 512×512px • ไม่เกิน ",Ep,"MB"]})]})]}),g.jsxs("div",{className:"border-t border-white/10 pt-4 space-y-2",children:[g.jsx("div",{className:"text-sm opacity-80",children:"Account"}),g.jsx("div",{className:"text-base font-medium",children:s}),g.jsx("div",{className:"text-sm opacity-80",children:t.email})]})]}),g.jsxs("main",{className:"card p-5 space-y-5",children:[g.jsx("h3",{className:"text-lg font-semibold",children:"Your Details"}),g.jsxs("div",{children:[g.jsx("label",{className:"label",htmlFor:"display",children:"Username"}),g.jsx("input",{id:"display",className:"input",value:o,onChange:S=>a(S.target.value),placeholder:"username"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"label",htmlFor:"email",children:"Email"}),g.jsx("input",{id:"email",className:"input",value:(t==null?void 0:t.email)||"",readOnly:!0})]}),g.jsxs("div",{children:[g.jsx("label",{className:"label",htmlFor:"bio",children:"Bio"}),g.jsx("textarea",{id:"bio",className:"input h-32 resize-y",value:l,onChange:S=>c(S.target.value.slice(0,kc)),placeholder:"Tell others about you in a few lines"}),g.jsxs("div",{className:"text-right text-xs opacity-70",children:[l.length,"/",kc]})]}),g.jsxs("div",{children:[g.jsx("div",{className:"label",children:"Interests"}),g.jsx(G1,{value:h,onChange:f})]}),g.jsx("div",{className:"pt-2",children:g.jsx("button",{className:"btn-primary w-full md:w-auto",onClick:I,disabled:w,children:"Save changes"})})]})]})]})}function x3(){var p,y;const[t,e]=L.useState(""),[n,r]=L.useState(""),[s,i]=L.useState(!1),[o,a]=L.useState(!1),l=zi(),h=((y=(p=Kr().state)==null?void 0:p.from)==null?void 0:y.pathname)||"/",f=async w=>{if(w.preventDefault(),o)return;const b=kF.safeParse({email:t,password:n});if(!b.success)return we(b.error.errors[0].message);try{a(!0),await N2($r,t.trim(),n),we("Signed in"),l(h,{replace:!0})}catch(R){we((R==null?void 0:R.message)||"Failed to sign in")}finally{a(!1)}};return g.jsx("section",{className:"container-app py-10",children:g.jsxs("div",{className:"card p-6 max-w-md mx-auto",children:[g.jsx("h3",{className:"text-2xl font-semibold mb-4",children:"Sign in"}),g.jsxs("form",{onSubmit:f,className:"space-y-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"label",htmlFor:"email",children:"Email"}),g.jsx("input",{id:"email",className:"input",placeholder:"Email",type:"email",value:t,onChange:w=>e(w.target.value),autoComplete:"username",disabled:o})]}),g.jsxs("div",{children:[g.jsx("label",{className:"label",htmlFor:"password",children:"Password"}),g.jsxs("div",{className:"relative",children:[g.jsx("input",{id:"password",className:"input pr-10",placeholder:"Password",type:s?"text":"password",value:n,onChange:w=>r(w.target.value),autoComplete:"current-password",disabled:o}),g.jsx("button",{type:"button",onClick:()=>i(!s),className:"absolute inset-y-0 right-0 px-3 flex items-center text-white/70 hover:text-white","aria-label":s?"Hide password":"Show password",title:s?"Hide password":"Show password",disabled:o,children:s?g.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:[g.jsx("path",{d:"M17.94 17.94A10.94 10.94 0 0 1 12 20C5.477 20 1 12 1 12a20.76 20.76 0 0 1 5.06-5.94"}),g.jsx("path",{d:"M10.73 5.08A11 11 0 0 1 12 4c6.523 0 11 8 11 8a20.76 20.76 0 0 1-4.17 4.92"}),g.jsx("path",{d:"M14.12 14.12A3 3 0 1 1 9.88 9.88"}),g.jsx("line",{x1:"1",y1:"1",x2:"23",y2:"23"})]}):g.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:[g.jsx("path",{d:"M1 12s4.5-8 11-8 11 8 11 8-4.5 8-11 8-11-8-11-8Z"}),g.jsx("circle",{cx:"12",cy:"12",r:"3"})]})})]})]}),g.jsx("button",{className:"btn-primary w-full",type:"submit",disabled:o,children:o?"Signing in…":"Sign in"}),g.jsxs("div",{className:"text-sm opacity-80 text-center",children:["Create account ? ",g.jsx(Vr,{to:"/auth/signup",className:"underline",children:"Sign up"})," ·"," ",g.jsx(Vr,{to:"/auth/reset-password",className:"underline",children:"Reset password"})]})]})]})})}function R3(){const t=zi(),[e,n]=L.useState(""),[r,s]=L.useState(""),[i,o]=L.useState(""),[a,l]=L.useState(!1),[c,h]=L.useState(!1),f=async p=>{if(p.preventDefault(),!e.trim())return we("โปรดกรอกชื่อ");if(!r.trim())return we("โปรดกรอกอีเมล");if(i.length<6)return we("รหัสผ่านอย่างน้อย 6 ตัวอักษร");try{h(!0);const{user:y}=await P2($r,r,i);await L2(y,{displayName:e.trim()}),we("สมัครสำเร็จ! 🎉"),t("/profile")}catch(y){const w=String((y==null?void 0:y.code)||"");w.includes("auth/email-already-in-use")?we('อีเมลนี้มีบัญชีอยู่แล้ว • กด "Sign in" หรือ "Reset password"'):w.includes("auth/invalid-email")?we("อีเมลไม่ถูกต้อง"):w.includes("auth/weak-password")?we("รหัสผ่านน้อยเกินไป (อย่างน้อย 6 ตัวอักษร)"):we(`สมัครไม่สำเร็จ: ${(y==null?void 0:y.message)||"Unknown error"}`)}finally{h(!1)}};return g.jsx("section",{className:"container-app py-10",children:g.jsxs("div",{className:"card p-6 max-w-md mx-auto",children:[g.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Create account"}),g.jsxs("form",{onSubmit:f,className:"space-y-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"label",htmlFor:"username",children:"Username"}),g.jsx("input",{id:"username",className:"input",placeholder:"Username",value:e,onChange:p=>n(p.target.value),autoComplete:"name"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"label",htmlFor:"email",children:"Email"}),g.jsx("input",{id:"email",className:"input",placeholder:"Email",type:"email",value:r,onChange:p=>s(p.target.value),autoComplete:"email"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"label",htmlFor:"password",children:"Password"}),g.jsxs("div",{className:"relative",children:[g.jsx("input",{id:"password",className:"input pr-10",placeholder:"Password",type:a?"text":"password",value:i,onChange:p=>o(p.target.value),autoComplete:"new-password"}),g.jsx("button",{type:"button",onClick:()=>l(!a),className:"absolute inset-y-0 right-0 px-3 flex items-center text-white/70 hover:text-white","aria-label":a?"Hide password":"Show password",title:a?"Hide password":"Show password",children:a?g.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:[g.jsx("path",{d:"M17.94 17.94A10.94 10.94 0 0 1 12 20C5.477 20 1 12 1 12a20.76 20.76 0 0 1 5.06-5.94"}),g.jsx("path",{d:"M10.73 5.08A11 11 0 0 1 12 4c6.523 0 11 8 11 8a20.76 20.76 0 0 1-4.17 4.92"}),g.jsx("path",{d:"M14.12 14.12A3 3 0 1 1 9.88 9.88"}),g.jsx("line",{x1:"1",y1:"1",x2:"23",y2:"23"})]}):g.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:[g.jsx("path",{d:"M1 12s4.5-8 11-8 11 8 11 8-4.5 8-11 8-11-8-11-8Z"}),g.jsx("circle",{cx:"12",cy:"12",r:"3"})]})})]})]}),g.jsx("button",{type:"submit",className:"btn-primary w-full",disabled:c,children:c?"Creating…":"Sign up"}),g.jsxs("p",{className:"text-sm opacity-80 text-center",children:["Already have an account? ",g.jsx(Vr,{className:"underline",to:"/auth/signin",children:"Sign in"})]})]})]})})}const lT="http://localhost:5173",oh="".toLowerCase()==="true",I3=oh?{url:`${lT}/auth/signin`,handleCodeInApp:!1}:{url:`${lT}/auth/reset`,handleCodeInApp:!0};function b3(){const[t,e]=L.useState(""),[n,r]=L.useState(!1),s=zi(),i=async a=>{a.preventDefault();const l=t.trim();if(!l)return we("กรุณากรอกอีเมล");try{if(r(!0),await b2($r,l,I3),we(oh?"ส่งลิงก์รีเซ็ตแล้ว (ใช้หน้ารีเซ็ตของ Firebase)":"ส่งลิงก์รีเซ็ตรหัสผ่านแล้ว กรุณาเช็คอีเมลของคุณ"),!oh){const c=new URLSearchParams({hint:"check-email",email:l});s(`/auth/reset?${c.toString()}`,{replace:!0})}}catch(c){console.error("[reset password]",c==null?void 0:c.code,c==null?void 0:c.message);const h=c==null?void 0:c.code;we(h==="auth/invalid-email"?"อีเมลไม่ถูกต้อง":h==="auth/user-not-found"?"ไม่มีผู้ใช้ด้วยอีเมลนี้":h==="auth/operation-not-allowed"?"ยังไม่ได้เปิด Email/Password ใน Firebase":h==="auth/network-request-failed"?"เครือข่ายขัดข้อง ลองใหม่":h==="auth/too-many-requests"?"ส่งคำขอมากเกินไป โปรดลองใหม่ภายหลัง":"ส่งอีเมลไม่สำเร็จ")}finally{r(!1)}},o=/\S+@\S+\.\S+/.test(t.trim());return g.jsx("section",{className:"container-app py-10",children:g.jsxs("div",{className:"card p-6 max-w-md mx-auto",children:[g.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Reset Password"}),g.jsxs("form",{onSubmit:i,className:"space-y-3",children:[g.jsx("label",{className:"label",htmlFor:"email",children:"Email"}),g.jsx("input",{id:"email",className:"input",placeholder:"Enter Email",value:t,onChange:a=>e(a.target.value),type:"email",autoComplete:"email"}),g.jsx("button",{className:"btn-primary w-full",type:"submit",disabled:n||!o,children:n?"Sending…":"Send"}),g.jsx("p",{className:"text-xs text-white/70",children:"เราจะส่งลิงก์รีเซ็ตรหัสผ่านไปที่อีเมลของคุณ"}),oh&&g.jsx("p",{className:"text-xs text-white/50",children:"* โหมดทดสอบ: ใช้หน้ารีเซ็ตของ Firebase (handleCodeInApp: false)"})]})]})})}function ss(t,e){return new URLSearchParams(t).get(e)||""}function Tp(t,e){return ss(t.search,e)||(t.hash?ss(t.hash.startsWith("#")?t.hash.slice(1):t.hash,e):"")}function k3(){const t=zi(),e=Kr(),n=L.useMemo(()=>Tp(window.location,"mode"),[e.search,e.hash]),r=L.useMemo(()=>Tp(window.location,"oobCode"),[e.search,e.hash]),s=L.useMemo(()=>Tp(window.location,"apiKey"),[e.search,e.hash]),i="AIzaSyAM8X0Zr8mHo6BLsnF6bEWZV5wtRx2A5bg",[o,a]=L.useState(""),[l,c]=L.useState("checking"),[h,f]=L.useState(""),[p,y]=L.useState(""),[w,b]=L.useState(""),[R,T]=L.useState(!1),[v,x]=L.useState(!1),[C,M]=L.useState(!1),[U,I]=L.useState(""),_=p.length>0&&p.length<6,S=w.length>0&&p!==w,k=R&&_,N=v&&S,O=p.length>=6&&w.length>=6&&p===w&&!!r&&!C;L.useEffect(()=>{(async()=>{try{if(!r){c("need-link"),f("ลิงก์นี้ไม่มีโค้ดรีเซ็ต (oobCode)");return}if(n&&n!=="resetPassword")throw new Error("invalid-mode");if(s&&i&&s!==i)throw new Error("project-mismatch");const se=await A2($r,r);a(se),c("ready")}catch(se){console.error("[verifyPasswordResetCode]",se,{search:e.search,hash:e.hash,apiKeyFromLink:s,apiKeyFromApp:i}),c("error");const Ve=(se==null?void 0:se.message)==="invalid-mode"?"โหมดของลิงก์ไม่ถูกต้อง":(se==null?void 0:se.message)==="project-mismatch"?"ลิงก์มาจากโปรเจกต์ Firebase คนละตัวกับที่แอปนี้ใช้อยู่":"ลิงก์ไม่ถูกต้องหรือหมดอายุ";f(Ve)}})()},[r,n,e.search,e.hash,s,i]);const A=()=>{try{const se=new URL(U),Ve=ss(se.search,"mode")||ss(se.hash.replace(/^#/,""),"mode"),Mt=ss(se.search,"oobCode")||ss(se.hash.replace(/^#/,""),"oobCode"),q=ss(se.search,"apiKey")||ss(se.hash.replace(/^#/,""),"apiKey");if(!Mt){we("ลิงก์ที่วางไม่มี oobCode");return}const Y=new URL(window.location.href);Y.searchParams.set("oobCode",Mt),Ve&&Y.searchParams.set("mode",Ve),q&&Y.searchParams.set("apiKey",q),window.location.replace(Y.toString())}catch{we("รูปแบบลิงก์ไม่ถูกต้อง")}},Ue=async se=>{if(se.preventDefault(),!!O)try{M(!0),await k2($r,r,p),we("ตั้งรหัสผ่านใหม่เรียบร้อย"),c("done"),t("/auth/signin")}catch(Ve){console.error("[confirmPasswordReset]",Ve==null?void 0:Ve.code,Ve==null?void 0:Ve.message),we("ไม่สามารถตั้งรหัสผ่านได้")}finally{M(!1)}};return l==="checking"?g.jsx("section",{className:"container-app py-10",children:g.jsx("div",{className:"card p-6 max-w-md mx-auto",children:"กำลังตรวจสอบลิงก์…"})}):l==="need-link"?g.jsx("section",{className:"container-app py-10",children:g.jsxs("div",{className:"card p-6 max-w-md mx-auto space-y-3",children:[g.jsxs("div",{className:"text-sm",children:["กรุณา ",g.jsx("b",{children:"เปิดอีเมล"})," แล้วคลิกขวา “Copy link address” จากปุ่มรีเซ็ต จากนั้นวางลิงก์ที่นี่"]}),g.jsx("input",{className:"input",placeholder:"วางลิงก์จากอีเมล ที่นี่ , ข้อความส่งไปอาจเข้าในกล่องขยะ",value:U,onChange:se=>I(se.target.value)}),g.jsx("button",{className:"btn-primary w-full",onClick:A,children:"ใช้ลิงก์นี้"}),h&&g.jsxs("div",{className:"text-xs text-white/60",children:["สาเหตุ: ",h]})]})}):l==="error"?g.jsx("section",{className:"container-app py-10",children:g.jsxs("div",{className:"card p-6 max-w-md mx-auto space-y-2",children:[g.jsx("div",{children:"ลิงก์ไม่ถูกต้องหรือหมดอายุ กรุณาขอรีเซ็ตใหม่อีกครั้ง"}),h&&g.jsxs("div",{className:"text-xs text-white/70",children:["สาเหตุ: ",h]})]})}):g.jsx("section",{className:"container-app py-10",children:g.jsxs("div",{className:"card p-6 max-w-md mx-auto",children:[g.jsx("h3",{className:"text-xl font-semibold mb-4",children:"ตั้งรหัสผ่านใหม่"}),g.jsxs("p",{className:"text-sm text-white/80 mb-4",children:["บัญชี: ",g.jsx("span",{className:"font-semibold",children:o})]}),g.jsxs("form",{onSubmit:Ue,className:"space-y-3",children:[g.jsx("label",{className:"label",htmlFor:"pass",children:"รหัสผ่านใหม่"}),g.jsx("input",{id:"pass",className:`input ${k?"ring-2 ring-red-400/70":""}`,type:"password",value:p,onChange:se=>y(se.target.value),onBlur:()=>T(!0),placeholder:"อย่างน้อย 6 ตัวอักษร",autoComplete:"new-password"}),k&&g.jsx("div",{className:"text-xs text-red-300",children:"รหัสผ่านต้องยาวอย่างน้อย 6 ตัวอักษร"}),g.jsx("label",{className:"label",htmlFor:"pass2",children:"ยืนยันรหัสผ่าน"}),g.jsx("input",{id:"pass2",className:`input ${N?"ring-2 ring-red-400/70":""}`,type:"password",value:w,onChange:se=>b(se.target.value),onBlur:()=>x(!0),placeholder:"พิมพ์รหัสผ่านเดิมอีกครั้ง",autoComplete:"new-password"}),N&&g.jsx("div",{className:"text-xs text-red-300",children:"รหัสผ่านไม่ตรงกัน"}),g.jsx("button",{className:"btn-primary w-full",type:"submit",disabled:!O,children:C?"Saving…":"บันทึกรหัสผ่านใหม่"})]})]})})}function Ja({children:t}){const{user:e,loading:n}=Cu(),r=Kr();return n?g.jsx("section",{className:"container-app py-8",children:g.jsx("div",{className:"card p-4",children:"Loading…"})}):e?g.jsx(g.Fragment,{children:t}):g.jsx(tR,{to:"/auth/signin",replace:!0,state:{from:r}})}const ie=t=>typeof t=="string",Xa=()=>{let t,e;const n=new Promise((r,s)=>{t=r,e=s});return n.resolve=t,n.reject=e,n},uT=t=>t==null?"":""+t,C3=(t,e,n)=>{t.forEach(r=>{e[r]&&(n[r]=e[r])})},A3=/###/g,cT=t=>t&&t.indexOf("###")>-1?t.replace(A3,"."):t,hT=t=>!t||ie(t),Il=(t,e,n)=>{const r=ie(e)?e.split("."):e;let s=0;for(;s<r.length-1;){if(hT(t))return{};const i=cT(r[s]);!t[i]&&n&&(t[i]=new n),Object.prototype.hasOwnProperty.call(t,i)?t=t[i]:t={},++s}return hT(t)?{}:{obj:t,k:cT(r[s])}},dT=(t,e,n)=>{const{obj:r,k:s}=Il(t,e,Object);if(r!==void 0||e.length===1){r[s]=n;return}let i=e[e.length-1],o=e.slice(0,e.length-1),a=Il(t,o,Object);for(;a.obj===void 0&&o.length;)i=`${o[o.length-1]}.${i}`,o=o.slice(0,o.length-1),a=Il(t,o,Object),a&&a.obj&&typeof a.obj[`${a.k}.${i}`]<"u"&&(a.obj=void 0);a.obj[`${a.k}.${i}`]=n},P3=(t,e,n,r)=>{const{obj:s,k:i}=Il(t,e,Object);s[i]=s[i]||[],s[i].push(n)},ad=(t,e)=>{const{obj:n,k:r}=Il(t,e);if(n)return n[r]},N3=(t,e,n)=>{const r=ad(t,n);return r!==void 0?r:ad(e,n)},Fb=(t,e,n)=>{for(const r in e)r!=="__proto__"&&r!=="constructor"&&(r in t?ie(t[r])||t[r]instanceof String||ie(e[r])||e[r]instanceof String?n&&(t[r]=e[r]):Fb(t[r],e[r],n):t[r]=e[r]);return t},eo=t=>t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var O3={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const L3=t=>ie(t)?t.replace(/[&<>"'\/]/g,e=>O3[e]):t;class D3{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const n=this.regExpMap.get(e);if(n!==void 0)return n;const r=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,r),this.regExpQueue.push(e),r}}const M3=[" ",",","?","!",";"],V3=new D3(20),j3=(t,e,n)=>{e=e||"",n=n||"";const r=M3.filter(o=>e.indexOf(o)<0&&n.indexOf(o)<0);if(r.length===0)return!0;const s=V3.getRegExp(`(${r.map(o=>o==="?"?"\\?":o).join("|")})`);let i=!s.test(t);if(!i){const o=t.indexOf(n);o>0&&!s.test(t.substring(0,o))&&(i=!0)}return i},Eg=function(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!t)return;if(t[e])return t[e];const r=e.split(n);let s=t;for(let i=0;i<r.length;){if(!s||typeof s!="object")return;let o,a="";for(let l=i;l<r.length;++l)if(l!==i&&(a+=n),a+=r[l],o=s[a],o!==void 0){if(["string","number","boolean"].indexOf(typeof o)>-1&&l<r.length-1)continue;i+=l-i+1;break}s=o}return s},ld=t=>t&&t.replace("_","-"),U3={type:"logger",log(t){this.output("log",t)},warn(t){this.output("warn",t)},error(t){this.output("error",t)},output(t,e){console&&console[t]&&console[t].apply(console,e)}};class ud{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(e,n)}init(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=n.prefix||"i18next:",this.logger=e||U3,this.options=n,this.debug=n.debug}log(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.forward(n,"log","",!0)}warn(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.forward(n,"warn","",!0)}error(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.forward(n,"error","")}deprecate(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.forward(n,"warn","WARNING DEPRECATED: ",!0)}forward(e,n,r,s){return s&&!this.debug?null:(ie(e[0])&&(e[0]=`${r}${this.prefix} ${e[0]}`),this.logger[n](e))}create(e){return new ud(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new ud(this.logger,e)}}var Yn=new ud;class tf{constructor(){this.observers={}}on(e,n){return e.split(" ").forEach(r=>{this.observers[r]||(this.observers[r]=new Map);const s=this.observers[r].get(n)||0;this.observers[r].set(n,s+1)}),this}off(e,n){if(this.observers[e]){if(!n){delete this.observers[e];return}this.observers[e].delete(n)}}emit(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];this.observers[e]&&Array.from(this.observers[e].entries()).forEach(o=>{let[a,l]=o;for(let c=0;c<l;c++)a(...r)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(o=>{let[a,l]=o;for(let c=0;c<l;c++)a.apply(a,[e,...r])})}}class fT extends tf{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=e||{},this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const n=this.options.ns.indexOf(e);n>-1&&this.options.ns.splice(n,1)}getResource(e,n,r){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const i=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator,o=s.ignoreJSONStructure!==void 0?s.ignoreJSONStructure:this.options.ignoreJSONStructure;let a;e.indexOf(".")>-1?a=e.split("."):(a=[e,n],r&&(Array.isArray(r)?a.push(...r):ie(r)&&i?a.push(...r.split(i)):a.push(r)));const l=ad(this.data,a);return!l&&!n&&!r&&e.indexOf(".")>-1&&(e=a[0],n=a[1],r=a.slice(2).join(".")),l||!o||!ie(r)?l:Eg(this.data&&this.data[e]&&this.data[e][n],r,i)}addResource(e,n,r,s){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const o=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator;let a=[e,n];r&&(a=a.concat(o?r.split(o):r)),e.indexOf(".")>-1&&(a=e.split("."),s=n,n=a[1]),this.addNamespaces(n),dT(this.data,a,s),i.silent||this.emit("added",e,n,r,s)}addResources(e,n,r){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const i in r)(ie(r[i])||Array.isArray(r[i]))&&this.addResource(e,n,i,r[i],{silent:!0});s.silent||this.emit("added",e,n,r)}addResourceBundle(e,n,r,s,i){let o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1,skipCopy:!1},a=[e,n];e.indexOf(".")>-1&&(a=e.split("."),s=r,r=n,n=a[1]),this.addNamespaces(n);let l=ad(this.data,a)||{};o.skipCopy||(r=JSON.parse(JSON.stringify(r))),s?Fb(l,r,i):l={...l,...r},dT(this.data,a,l),o.silent||this.emit("added",e,n,r)}removeResourceBundle(e,n){this.hasResourceBundle(e,n)&&delete this.data[e][n],this.removeNamespaces(n),this.emit("removed",e,n)}hasResourceBundle(e,n){return this.getResource(e,n)!==void 0}getResourceBundle(e,n){return n||(n=this.options.defaultNS),this.options.compatibilityAPI==="v1"?{...this.getResource(e,n)}:this.getResource(e,n)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const n=this.getDataByLanguage(e);return!!(n&&Object.keys(n)||[]).find(s=>n[s]&&Object.keys(n[s]).length>0)}toJSON(){return this.data}}var Bb={processors:{},addPostProcessor(t){this.processors[t.name]=t},handle(t,e,n,r,s){return t.forEach(i=>{this.processors[i]&&(e=this.processors[i].process(e,n,r,s))}),e}};const pT={};class cd extends tf{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),C3(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=Yn.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(e==null)return!1;const r=this.resolve(e,n);return r&&r.res!==void 0}extractFromKey(e,n){let r=n.nsSeparator!==void 0?n.nsSeparator:this.options.nsSeparator;r===void 0&&(r=":");const s=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator;let i=n.ns||this.options.defaultNS||[];const o=r&&e.indexOf(r)>-1,a=!this.options.userDefinedKeySeparator&&!n.keySeparator&&!this.options.userDefinedNsSeparator&&!n.nsSeparator&&!j3(e,r,s);if(o&&!a){const l=e.match(this.interpolator.nestingRegexp);if(l&&l.length>0)return{key:e,namespaces:ie(i)?[i]:i};const c=e.split(r);(r!==s||r===s&&this.options.ns.indexOf(c[0])>-1)&&(i=c.shift()),e=c.join(s)}return{key:e,namespaces:ie(i)?[i]:i}}translate(e,n,r){if(typeof n!="object"&&this.options.overloadTranslationOptionHandler&&(n=this.options.overloadTranslationOptionHandler(arguments)),typeof n=="object"&&(n={...n}),n||(n={}),e==null)return"";Array.isArray(e)||(e=[String(e)]);const s=n.returnDetails!==void 0?n.returnDetails:this.options.returnDetails,i=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator,{key:o,namespaces:a}=this.extractFromKey(e[e.length-1],n),l=a[a.length-1],c=n.lng||this.language,h=n.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(c&&c.toLowerCase()==="cimode"){if(h){const C=n.nsSeparator||this.options.nsSeparator;return s?{res:`${l}${C}${o}`,usedKey:o,exactUsedKey:o,usedLng:c,usedNS:l,usedParams:this.getUsedParamsDetails(n)}:`${l}${C}${o}`}return s?{res:o,usedKey:o,exactUsedKey:o,usedLng:c,usedNS:l,usedParams:this.getUsedParamsDetails(n)}:o}const f=this.resolve(e,n);let p=f&&f.res;const y=f&&f.usedKey||o,w=f&&f.exactUsedKey||o,b=Object.prototype.toString.apply(p),R=["[object Number]","[object Function]","[object RegExp]"],T=n.joinArrays!==void 0?n.joinArrays:this.options.joinArrays,v=!this.i18nFormat||this.i18nFormat.handleAsObject,x=!ie(p)&&typeof p!="boolean"&&typeof p!="number";if(v&&p&&x&&R.indexOf(b)<0&&!(ie(T)&&Array.isArray(p))){if(!n.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const C=this.options.returnedObjectHandler?this.options.returnedObjectHandler(y,p,{...n,ns:a}):`key '${o} (${this.language})' returned an object instead of string.`;return s?(f.res=C,f.usedParams=this.getUsedParamsDetails(n),f):C}if(i){const C=Array.isArray(p),M=C?[]:{},U=C?w:y;for(const I in p)if(Object.prototype.hasOwnProperty.call(p,I)){const _=`${U}${i}${I}`;M[I]=this.translate(_,{...n,joinArrays:!1,ns:a}),M[I]===_&&(M[I]=p[I])}p=M}}else if(v&&ie(T)&&Array.isArray(p))p=p.join(T),p&&(p=this.extendTranslation(p,e,n,r));else{let C=!1,M=!1;const U=n.count!==void 0&&!ie(n.count),I=cd.hasDefaultValue(n),_=U?this.pluralResolver.getSuffix(c,n.count,n):"",S=n.ordinal&&U?this.pluralResolver.getSuffix(c,n.count,{ordinal:!1}):"",k=U&&!n.ordinal&&n.count===0&&this.pluralResolver.shouldUseIntlApi(),N=k&&n[`defaultValue${this.options.pluralSeparator}zero`]||n[`defaultValue${_}`]||n[`defaultValue${S}`]||n.defaultValue;!this.isValidLookup(p)&&I&&(C=!0,p=N),this.isValidLookup(p)||(M=!0,p=o);const A=(n.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&M?void 0:p,Ue=I&&N!==p&&this.options.updateMissing;if(M||C||Ue){if(this.logger.log(Ue?"updateKey":"missingKey",c,l,o,Ue?N:p),i){const q=this.resolve(o,{...n,keySeparator:!1});q&&q.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let se=[];const Ve=this.languageUtils.getFallbackCodes(this.options.fallbackLng,n.lng||this.language);if(this.options.saveMissingTo==="fallback"&&Ve&&Ve[0])for(let q=0;q<Ve.length;q++)se.push(Ve[q]);else this.options.saveMissingTo==="all"?se=this.languageUtils.toResolveHierarchy(n.lng||this.language):se.push(n.lng||this.language);const Mt=(q,Y,re)=>{const Pe=I&&re!==p?re:A;this.options.missingKeyHandler?this.options.missingKeyHandler(q,l,Y,Pe,Ue,n):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(q,l,Y,Pe,Ue,n),this.emit("missingKey",q,l,Y,p)};this.options.saveMissing&&(this.options.saveMissingPlurals&&U?se.forEach(q=>{const Y=this.pluralResolver.getSuffixes(q,n);k&&n[`defaultValue${this.options.pluralSeparator}zero`]&&Y.indexOf(`${this.options.pluralSeparator}zero`)<0&&Y.push(`${this.options.pluralSeparator}zero`),Y.forEach(re=>{Mt([q],o+re,n[`defaultValue${re}`]||N)})}):Mt(se,o,N))}p=this.extendTranslation(p,e,n,f,r),M&&p===o&&this.options.appendNamespaceToMissingKey&&(p=`${l}:${o}`),(M||C)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?p=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${l}:${o}`:o,C?p:void 0):p=this.options.parseMissingKeyHandler(p))}return s?(f.res=p,f.usedParams=this.getUsedParamsDetails(n),f):p}extendTranslation(e,n,r,s,i){var o=this;if(this.i18nFormat&&this.i18nFormat.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...r},r.lng||this.language||s.usedLng,s.usedNS,s.usedKey,{resolved:s});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});const c=ie(e)&&(r&&r.interpolation&&r.interpolation.skipOnVariables!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let h;if(c){const p=e.match(this.interpolator.nestingRegexp);h=p&&p.length}let f=r.replace&&!ie(r.replace)?r.replace:r;if(this.options.interpolation.defaultVariables&&(f={...this.options.interpolation.defaultVariables,...f}),e=this.interpolator.interpolate(e,f,r.lng||this.language||s.usedLng,r),c){const p=e.match(this.interpolator.nestingRegexp),y=p&&p.length;h<y&&(r.nest=!1)}!r.lng&&this.options.compatibilityAPI!=="v1"&&s&&s.res&&(r.lng=this.language||s.usedLng),r.nest!==!1&&(e=this.interpolator.nest(e,function(){for(var p=arguments.length,y=new Array(p),w=0;w<p;w++)y[w]=arguments[w];return i&&i[0]===y[0]&&!r.context?(o.logger.warn(`It seems you are nesting recursively key: ${y[0]} in key: ${n[0]}`),null):o.translate(...y,n)},r)),r.interpolation&&this.interpolator.reset()}const a=r.postProcess||this.options.postProcess,l=ie(a)?[a]:a;return e!=null&&l&&l.length&&r.applyPostProcessor!==!1&&(e=Bb.handle(l,e,n,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...s,usedParams:this.getUsedParamsDetails(r)},...r}:r,this)),e}resolve(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r,s,i,o,a;return ie(e)&&(e=[e]),e.forEach(l=>{if(this.isValidLookup(r))return;const c=this.extractFromKey(l,n),h=c.key;s=h;let f=c.namespaces;this.options.fallbackNS&&(f=f.concat(this.options.fallbackNS));const p=n.count!==void 0&&!ie(n.count),y=p&&!n.ordinal&&n.count===0&&this.pluralResolver.shouldUseIntlApi(),w=n.context!==void 0&&(ie(n.context)||typeof n.context=="number")&&n.context!=="",b=n.lngs?n.lngs:this.languageUtils.toResolveHierarchy(n.lng||this.language,n.fallbackLng);f.forEach(R=>{this.isValidLookup(r)||(a=R,!pT[`${b[0]}-${R}`]&&this.utils&&this.utils.hasLoadedNamespace&&!this.utils.hasLoadedNamespace(a)&&(pT[`${b[0]}-${R}`]=!0,this.logger.warn(`key "${s}" for languages "${b.join(", ")}" won't get resolved as namespace "${a}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),b.forEach(T=>{if(this.isValidLookup(r))return;o=T;const v=[h];if(this.i18nFormat&&this.i18nFormat.addLookupKeys)this.i18nFormat.addLookupKeys(v,h,T,R,n);else{let C;p&&(C=this.pluralResolver.getSuffix(T,n.count,n));const M=`${this.options.pluralSeparator}zero`,U=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(p&&(v.push(h+C),n.ordinal&&C.indexOf(U)===0&&v.push(h+C.replace(U,this.options.pluralSeparator)),y&&v.push(h+M)),w){const I=`${h}${this.options.contextSeparator}${n.context}`;v.push(I),p&&(v.push(I+C),n.ordinal&&C.indexOf(U)===0&&v.push(I+C.replace(U,this.options.pluralSeparator)),y&&v.push(I+M))}}let x;for(;x=v.pop();)this.isValidLookup(r)||(i=x,r=this.getResource(T,R,x,n))}))})}),{res:r,usedKey:s,exactUsedKey:i,usedLng:o,usedNS:a}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,n,r){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(e,n,r,s):this.resourceStore.getResource(e,n,r,s)}getUsedParamsDetails(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r=e.replace&&!ie(e.replace);let s=r?e.replace:e;if(r&&typeof e.count<"u"&&(s.count=e.count),this.options.interpolation.defaultVariables&&(s={...this.options.interpolation.defaultVariables,...s}),!r){s={...s};for(const i of n)delete s[i]}return s}static hasDefaultValue(e){const n="defaultValue";for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&n===r.substring(0,n.length)&&e[r]!==void 0)return!0;return!1}}const Sp=t=>t.charAt(0).toUpperCase()+t.slice(1);class mT{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Yn.create("languageUtils")}getScriptPartFromCode(e){if(e=ld(e),!e||e.indexOf("-")<0)return null;const n=e.split("-");return n.length===2||(n.pop(),n[n.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(n.join("-"))}getLanguagePartFromCode(e){if(e=ld(e),!e||e.indexOf("-")<0)return e;const n=e.split("-");return this.formatLanguageCode(n[0])}formatLanguageCode(e){if(ie(e)&&e.indexOf("-")>-1){if(typeof Intl<"u"&&typeof Intl.getCanonicalLocales<"u")try{let s=Intl.getCanonicalLocales(e)[0];if(s&&this.options.lowerCaseLng&&(s=s.toLowerCase()),s)return s}catch{}const n=["hans","hant","latn","cyrl","cans","mong","arab"];let r=e.split("-");return this.options.lowerCaseLng?r=r.map(s=>s.toLowerCase()):r.length===2?(r[0]=r[0].toLowerCase(),r[1]=r[1].toUpperCase(),n.indexOf(r[1].toLowerCase())>-1&&(r[1]=Sp(r[1].toLowerCase()))):r.length===3&&(r[0]=r[0].toLowerCase(),r[1].length===2&&(r[1]=r[1].toUpperCase()),r[0]!=="sgn"&&r[2].length===2&&(r[2]=r[2].toUpperCase()),n.indexOf(r[1].toLowerCase())>-1&&(r[1]=Sp(r[1].toLowerCase())),n.indexOf(r[2].toLowerCase())>-1&&(r[2]=Sp(r[2].toLowerCase()))),r.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let n;return e.forEach(r=>{if(n)return;const s=this.formatLanguageCode(r);(!this.options.supportedLngs||this.isSupportedCode(s))&&(n=s)}),!n&&this.options.supportedLngs&&e.forEach(r=>{if(n)return;const s=this.getLanguagePartFromCode(r);if(this.isSupportedCode(s))return n=s;n=this.options.supportedLngs.find(i=>{if(i===s)return i;if(!(i.indexOf("-")<0&&s.indexOf("-")<0)&&(i.indexOf("-")>0&&s.indexOf("-")<0&&i.substring(0,i.indexOf("-"))===s||i.indexOf(s)===0&&s.length>1))return i})}),n||(n=this.getFallbackCodes(this.options.fallbackLng)[0]),n}getFallbackCodes(e,n){if(!e)return[];if(typeof e=="function"&&(e=e(n)),ie(e)&&(e=[e]),Array.isArray(e))return e;if(!n)return e.default||[];let r=e[n];return r||(r=e[this.getScriptPartFromCode(n)]),r||(r=e[this.formatLanguageCode(n)]),r||(r=e[this.getLanguagePartFromCode(n)]),r||(r=e.default),r||[]}toResolveHierarchy(e,n){const r=this.getFallbackCodes(n||this.options.fallbackLng||[],e),s=[],i=o=>{o&&(this.isSupportedCode(o)?s.push(o):this.logger.warn(`rejecting language code not found in supportedLngs: ${o}`))};return ie(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&i(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&i(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&i(this.getLanguagePartFromCode(e))):ie(e)&&i(this.formatLanguageCode(e)),r.forEach(o=>{s.indexOf(o)<0&&i(this.formatLanguageCode(o))}),s}}let F3=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],B3={1:t=>+(t>1),2:t=>+(t!=1),3:t=>0,4:t=>t%10==1&&t%100!=11?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2,5:t=>t==0?0:t==1?1:t==2?2:t%100>=3&&t%100<=10?3:t%100>=11?4:5,6:t=>t==1?0:t>=2&&t<=4?1:2,7:t=>t==1?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2,8:t=>t==1?0:t==2?1:t!=8&&t!=11?2:3,9:t=>+(t>=2),10:t=>t==1?0:t==2?1:t<7?2:t<11?3:4,11:t=>t==1||t==11?0:t==2||t==12?1:t>2&&t<20?2:3,12:t=>+(t%10!=1||t%100==11),13:t=>+(t!==0),14:t=>t==1?0:t==2?1:t==3?2:3,15:t=>t%10==1&&t%100!=11?0:t%10>=2&&(t%100<10||t%100>=20)?1:2,16:t=>t%10==1&&t%100!=11?0:t!==0?1:2,17:t=>t==1||t%10==1&&t%100!=11?0:1,18:t=>t==0?0:t==1?1:2,19:t=>t==1?0:t==0||t%100>1&&t%100<11?1:t%100>10&&t%100<20?2:3,20:t=>t==1?0:t==0||t%100>0&&t%100<20?1:2,21:t=>t%100==1?1:t%100==2?2:t%100==3||t%100==4?3:0,22:t=>t==1?0:t==2?1:(t<0||t>10)&&t%10==0?2:3};const $3=["v1","v2","v3"],z3=["v4"],gT={zero:0,one:1,two:2,few:3,many:4,other:5},q3=()=>{const t={};return F3.forEach(e=>{e.lngs.forEach(n=>{t[n]={numbers:e.nr,plurals:B3[e.fc]}})}),t};class H3{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=e,this.options=n,this.logger=Yn.create("pluralResolver"),(!this.options.compatibilityJSON||z3.includes(this.options.compatibilityJSON))&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=q3(),this.pluralRulesCache={}}addRule(e,n){this.rules[e]=n}clearCache(){this.pluralRulesCache={}}getRule(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi()){const r=ld(e==="dev"?"en":e),s=n.ordinal?"ordinal":"cardinal",i=JSON.stringify({cleanedCode:r,type:s});if(i in this.pluralRulesCache)return this.pluralRulesCache[i];let o;try{o=new Intl.PluralRules(r,{type:s})}catch{if(!e.match(/-|_/))return;const l=this.languageUtils.getLanguagePartFromCode(e);o=this.getRule(l,n)}return this.pluralRulesCache[i]=o,o}return this.rules[e]||this.rules[this.languageUtils.getLanguagePartFromCode(e)]}needsPlural(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=this.getRule(e,n);return this.shouldUseIntlApi()?r&&r.resolvedOptions().pluralCategories.length>1:r&&r.numbers.length>1}getPluralFormsOfKey(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(e,r).map(s=>`${n}${s}`)}getSuffixes(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=this.getRule(e,n);return r?this.shouldUseIntlApi()?r.resolvedOptions().pluralCategories.sort((s,i)=>gT[s]-gT[i]).map(s=>`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${s}`):r.numbers.map(s=>this.getSuffix(e,s,n)):[]}getSuffix(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const s=this.getRule(e,r);return s?this.shouldUseIntlApi()?`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${s.select(n)}`:this.getSuffixRetroCompatible(s,n):(this.logger.warn(`no plural rule found for: ${e}`),"")}getSuffixRetroCompatible(e,n){const r=e.noAbs?e.plurals(n):e.plurals(Math.abs(n));let s=e.numbers[r];this.options.simplifyPluralSuffix&&e.numbers.length===2&&e.numbers[0]===1&&(s===2?s="plural":s===1&&(s=""));const i=()=>this.options.prepend&&s.toString()?this.options.prepend+s.toString():s.toString();return this.options.compatibilityJSON==="v1"?s===1?"":typeof s=="number"?`_plural_${s.toString()}`:i():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&e.numbers.length===2&&e.numbers[0]===1?i():this.options.prepend&&r.toString()?this.options.prepend+r.toString():r.toString()}shouldUseIntlApi(){return!$3.includes(this.options.compatibilityJSON)}}const yT=function(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,i=N3(t,e,n);return!i&&s&&ie(n)&&(i=Eg(t,n,r),i===void 0&&(i=Eg(e,n,r))),i},xp=t=>t.replace(/\$/g,"$$$$");class W3{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=Yn.create("interpolator"),this.options=e,this.format=e.interpolation&&e.interpolation.format||(n=>n),this.init(e)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});const{escape:n,escapeValue:r,useRawValueToEscape:s,prefix:i,prefixEscaped:o,suffix:a,suffixEscaped:l,formatSeparator:c,unescapeSuffix:h,unescapePrefix:f,nestingPrefix:p,nestingPrefixEscaped:y,nestingSuffix:w,nestingSuffixEscaped:b,nestingOptionsSeparator:R,maxReplaces:T,alwaysFormat:v}=e.interpolation;this.escape=n!==void 0?n:L3,this.escapeValue=r!==void 0?r:!0,this.useRawValueToEscape=s!==void 0?s:!1,this.prefix=i?eo(i):o||"{{",this.suffix=a?eo(a):l||"}}",this.formatSeparator=c||",",this.unescapePrefix=h?"":f||"-",this.unescapeSuffix=this.unescapePrefix?"":h||"",this.nestingPrefix=p?eo(p):y||eo("$t("),this.nestingSuffix=w?eo(w):b||eo(")"),this.nestingOptionsSeparator=R||",",this.maxReplaces=T||1e3,this.alwaysFormat=v!==void 0?v:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(n,r)=>n&&n.source===r?(n.lastIndex=0,n):new RegExp(r,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(e,n,r,s){let i,o,a;const l=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},c=y=>{if(y.indexOf(this.formatSeparator)<0){const T=yT(n,l,y,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(T,void 0,r,{...s,...n,interpolationkey:y}):T}const w=y.split(this.formatSeparator),b=w.shift().trim(),R=w.join(this.formatSeparator).trim();return this.format(yT(n,l,b,this.options.keySeparator,this.options.ignoreJSONStructure),R,r,{...s,...n,interpolationkey:b})};this.resetRegExp();const h=s&&s.missingInterpolationHandler||this.options.missingInterpolationHandler,f=s&&s.interpolation&&s.interpolation.skipOnVariables!==void 0?s.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:y=>xp(y)},{regex:this.regexp,safeValue:y=>this.escapeValue?xp(this.escape(y)):xp(y)}].forEach(y=>{for(a=0;i=y.regex.exec(e);){const w=i[1].trim();if(o=c(w),o===void 0)if(typeof h=="function"){const R=h(e,i,s);o=ie(R)?R:""}else if(s&&Object.prototype.hasOwnProperty.call(s,w))o="";else if(f){o=i[0];continue}else this.logger.warn(`missed to pass in variable ${w} for interpolating ${e}`),o="";else!ie(o)&&!this.useRawValueToEscape&&(o=uT(o));const b=y.safeValue(o);if(e=e.replace(i[0],b),f?(y.regex.lastIndex+=o.length,y.regex.lastIndex-=i[0].length):y.regex.lastIndex=0,a++,a>=this.maxReplaces)break}}),e}nest(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s,i,o;const a=(l,c)=>{const h=this.nestingOptionsSeparator;if(l.indexOf(h)<0)return l;const f=l.split(new RegExp(`${h}[ ]*{`));let p=`{${f[1]}`;l=f[0],p=this.interpolate(p,o);const y=p.match(/'/g),w=p.match(/"/g);(y&&y.length%2===0&&!w||w.length%2!==0)&&(p=p.replace(/'/g,'"'));try{o=JSON.parse(p),c&&(o={...c,...o})}catch(b){return this.logger.warn(`failed parsing options string in nesting for key ${l}`,b),`${l}${h}${p}`}return o.defaultValue&&o.defaultValue.indexOf(this.prefix)>-1&&delete o.defaultValue,l};for(;s=this.nestingRegexp.exec(e);){let l=[];o={...r},o=o.replace&&!ie(o.replace)?o.replace:o,o.applyPostProcessor=!1,delete o.defaultValue;let c=!1;if(s[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(s[1])){const h=s[1].split(this.formatSeparator).map(f=>f.trim());s[1]=h.shift(),l=h,c=!0}if(i=n(a.call(this,s[1].trim(),o),o),i&&s[0]===e&&!ie(i))return i;ie(i)||(i=uT(i)),i||(this.logger.warn(`missed to resolve ${s[1]} for nesting ${e}`),i=""),c&&(i=l.reduce((h,f)=>this.format(h,f,r.lng,{...r,interpolationkey:s[1].trim()}),i.trim())),e=e.replace(s[0],i),this.regexp.lastIndex=0}return e}}const K3=t=>{let e=t.toLowerCase().trim();const n={};if(t.indexOf("(")>-1){const r=t.split("(");e=r[0].toLowerCase().trim();const s=r[1].substring(0,r[1].length-1);e==="currency"&&s.indexOf(":")<0?n.currency||(n.currency=s.trim()):e==="relativetime"&&s.indexOf(":")<0?n.range||(n.range=s.trim()):s.split(";").forEach(o=>{if(o){const[a,...l]=o.split(":"),c=l.join(":").trim().replace(/^'+|'+$/g,""),h=a.trim();n[h]||(n[h]=c),c==="false"&&(n[h]=!1),c==="true"&&(n[h]=!0),isNaN(c)||(n[h]=parseInt(c,10))}})}return{formatName:e,formatOptions:n}},to=t=>{const e={};return(n,r,s)=>{let i=s;s&&s.interpolationkey&&s.formatParams&&s.formatParams[s.interpolationkey]&&s[s.interpolationkey]&&(i={...i,[s.interpolationkey]:void 0});const o=r+JSON.stringify(i);let a=e[o];return a||(a=t(ld(r),s),e[o]=a),a(n)}};class Q3{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=Yn.create("formatter"),this.options=e,this.formats={number:to((n,r)=>{const s=new Intl.NumberFormat(n,{...r});return i=>s.format(i)}),currency:to((n,r)=>{const s=new Intl.NumberFormat(n,{...r,style:"currency"});return i=>s.format(i)}),datetime:to((n,r)=>{const s=new Intl.DateTimeFormat(n,{...r});return i=>s.format(i)}),relativetime:to((n,r)=>{const s=new Intl.RelativeTimeFormat(n,{...r});return i=>s.format(i,r.range||"day")}),list:to((n,r)=>{const s=new Intl.ListFormat(n,{...r});return i=>s.format(i)})},this.init(e)}init(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};this.formatSeparator=n.interpolation.formatSeparator||","}add(e,n){this.formats[e.toLowerCase().trim()]=n}addCached(e,n){this.formats[e.toLowerCase().trim()]=to(n)}format(e,n,r){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const i=n.split(this.formatSeparator);if(i.length>1&&i[0].indexOf("(")>1&&i[0].indexOf(")")<0&&i.find(a=>a.indexOf(")")>-1)){const a=i.findIndex(l=>l.indexOf(")")>-1);i[0]=[i[0],...i.splice(1,a)].join(this.formatSeparator)}return i.reduce((a,l)=>{const{formatName:c,formatOptions:h}=K3(l);if(this.formats[c]){let f=a;try{const p=s&&s.formatParams&&s.formatParams[s.interpolationkey]||{},y=p.locale||p.lng||s.locale||s.lng||r;f=this.formats[c](a,y,{...h,...s,...p})}catch(p){this.logger.warn(p)}return f}else this.logger.warn(`there was no format function for ${c}`);return a},e)}}const G3=(t,e)=>{t.pending[e]!==void 0&&(delete t.pending[e],t.pendingCount--)};class J3 extends tf{constructor(e,n,r){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=e,this.store=n,this.services=r,this.languageUtils=r.languageUtils,this.options=s,this.logger=Yn.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=s.maxParallelReads||10,this.readingCalls=0,this.maxRetries=s.maxRetries>=0?s.maxRetries:5,this.retryTimeout=s.retryTimeout>=1?s.retryTimeout:350,this.state={},this.queue=[],this.backend&&this.backend.init&&this.backend.init(r,s.backend,s)}queueLoad(e,n,r,s){const i={},o={},a={},l={};return e.forEach(c=>{let h=!0;n.forEach(f=>{const p=`${c}|${f}`;!r.reload&&this.store.hasResourceBundle(c,f)?this.state[p]=2:this.state[p]<0||(this.state[p]===1?o[p]===void 0&&(o[p]=!0):(this.state[p]=1,h=!1,o[p]===void 0&&(o[p]=!0),i[p]===void 0&&(i[p]=!0),l[f]===void 0&&(l[f]=!0)))}),h||(a[c]=!0)}),(Object.keys(i).length||Object.keys(o).length)&&this.queue.push({pending:o,pendingCount:Object.keys(o).length,loaded:{},errors:[],callback:s}),{toLoad:Object.keys(i),pending:Object.keys(o),toLoadLanguages:Object.keys(a),toLoadNamespaces:Object.keys(l)}}loaded(e,n,r){const s=e.split("|"),i=s[0],o=s[1];n&&this.emit("failedLoading",i,o,n),!n&&r&&this.store.addResourceBundle(i,o,r,void 0,void 0,{skipCopy:!0}),this.state[e]=n?-1:2,n&&r&&(this.state[e]=0);const a={};this.queue.forEach(l=>{P3(l.loaded,[i],o),G3(l,e),n&&l.errors.push(n),l.pendingCount===0&&!l.done&&(Object.keys(l.loaded).forEach(c=>{a[c]||(a[c]={});const h=l.loaded[c];h.length&&h.forEach(f=>{a[c][f]===void 0&&(a[c][f]=!0)})}),l.done=!0,l.errors.length?l.callback(l.errors):l.callback())}),this.emit("loaded",a),this.queue=this.queue.filter(l=>!l.done)}read(e,n,r){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,o=arguments.length>5?arguments[5]:void 0;if(!e.length)return o(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:n,fcName:r,tried:s,wait:i,callback:o});return}this.readingCalls++;const a=(c,h)=>{if(this.readingCalls--,this.waitingReads.length>0){const f=this.waitingReads.shift();this.read(f.lng,f.ns,f.fcName,f.tried,f.wait,f.callback)}if(c&&h&&s<this.maxRetries){setTimeout(()=>{this.read.call(this,e,n,r,s+1,i*2,o)},i);return}o(c,h)},l=this.backend[r].bind(this.backend);if(l.length===2){try{const c=l(e,n);c&&typeof c.then=="function"?c.then(h=>a(null,h)).catch(a):a(null,c)}catch(c){a(c)}return}return l(e,n,a)}prepareLoading(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),s&&s();ie(e)&&(e=this.languageUtils.toResolveHierarchy(e)),ie(n)&&(n=[n]);const i=this.queueLoad(e,n,r,s);if(!i.toLoad.length)return i.pending.length||s(),null;i.toLoad.forEach(o=>{this.loadOne(o)})}load(e,n,r){this.prepareLoading(e,n,{},r)}reload(e,n,r){this.prepareLoading(e,n,{reload:!0},r)}loadOne(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const r=e.split("|"),s=r[0],i=r[1];this.read(s,i,"read",void 0,void 0,(o,a)=>{o&&this.logger.warn(`${n}loading namespace ${i} for language ${s} failed`,o),!o&&a&&this.logger.log(`${n}loaded namespace ${i} for language ${s}`,a),this.loaded(e,o,a)})}saveMissing(e,n,r,s,i){let o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},a=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(n)){this.logger.warn(`did not save key "${r}" as the namespace "${n}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(r==null||r==="")){if(this.backend&&this.backend.create){const l={...o,isUpdate:i},c=this.backend.create.bind(this.backend);if(c.length<6)try{let h;c.length===5?h=c(e,n,r,s,l):h=c(e,n,r,s),h&&typeof h.then=="function"?h.then(f=>a(null,f)).catch(a):a(null,h)}catch(h){a(h)}else c(e,n,r,s,a,l)}!e||!e[0]||this.store.addResource(e[0],n,r,s)}}}const vT=()=>({debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:t=>{let e={};if(typeof t[1]=="object"&&(e=t[1]),ie(t[1])&&(e.defaultValue=t[1]),ie(t[2])&&(e.tDescription=t[2]),typeof t[2]=="object"||typeof t[3]=="object"){const n=t[3]||t[2];Object.keys(n).forEach(r=>{e[r]=n[r]})}return e},interpolation:{escapeValue:!0,format:t=>t,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}),_T=t=>(ie(t.ns)&&(t.ns=[t.ns]),ie(t.fallbackLng)&&(t.fallbackLng=[t.fallbackLng]),ie(t.fallbackNS)&&(t.fallbackNS=[t.fallbackNS]),t.supportedLngs&&t.supportedLngs.indexOf("cimode")<0&&(t.supportedLngs=t.supportedLngs.concat(["cimode"])),t),Cc=()=>{},X3=t=>{Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(n=>{typeof t[n]=="function"&&(t[n]=t[n].bind(t))})};class au extends tf{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;if(super(),this.options=_T(e),this.services={},this.logger=Yn,this.modules={external:[]},X3(this),n&&!this.isInitialized&&!e.isClone){if(!this.options.initImmediate)return this.init(e,n),this;setTimeout(()=>{this.init(e,n)},0)}}init(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,typeof n=="function"&&(r=n,n={}),!n.defaultNS&&n.defaultNS!==!1&&n.ns&&(ie(n.ns)?n.defaultNS=n.ns:n.ns.indexOf("translation")<0&&(n.defaultNS=n.ns[0]));const s=vT();this.options={...s,...this.options,..._T(n)},this.options.compatibilityAPI!=="v1"&&(this.options.interpolation={...s.interpolation,...this.options.interpolation}),n.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=n.keySeparator),n.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=n.nsSeparator);const i=h=>h?typeof h=="function"?new h:h:null;if(!this.options.isClone){this.modules.logger?Yn.init(i(this.modules.logger),this.options):Yn.init(null,this.options);let h;this.modules.formatter?h=this.modules.formatter:typeof Intl<"u"&&(h=Q3);const f=new mT(this.options);this.store=new fT(this.options.resources,this.options);const p=this.services;p.logger=Yn,p.resourceStore=this.store,p.languageUtils=f,p.pluralResolver=new H3(f,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),h&&(!this.options.interpolation.format||this.options.interpolation.format===s.interpolation.format)&&(p.formatter=i(h),p.formatter.init(p,this.options),this.options.interpolation.format=p.formatter.format.bind(p.formatter)),p.interpolator=new W3(this.options),p.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},p.backendConnector=new J3(i(this.modules.backend),p.resourceStore,p,this.options),p.backendConnector.on("*",function(y){for(var w=arguments.length,b=new Array(w>1?w-1:0),R=1;R<w;R++)b[R-1]=arguments[R];e.emit(y,...b)}),this.modules.languageDetector&&(p.languageDetector=i(this.modules.languageDetector),p.languageDetector.init&&p.languageDetector.init(p,this.options.detection,this.options)),this.modules.i18nFormat&&(p.i18nFormat=i(this.modules.i18nFormat),p.i18nFormat.init&&p.i18nFormat.init(this)),this.translator=new cd(this.services,this.options),this.translator.on("*",function(y){for(var w=arguments.length,b=new Array(w>1?w-1:0),R=1;R<w;R++)b[R-1]=arguments[R];e.emit(y,...b)}),this.modules.external.forEach(y=>{y.init&&y.init(this)})}if(this.format=this.options.interpolation.format,r||(r=Cc),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const h=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);h.length>0&&h[0]!=="dev"&&(this.options.lng=h[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(h=>{this[h]=function(){return e.store[h](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(h=>{this[h]=function(){return e.store[h](...arguments),e}});const l=Xa(),c=()=>{const h=(f,p)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),l.resolve(p),r(f,p)};if(this.languages&&this.options.compatibilityAPI!=="v1"&&!this.isInitialized)return h(null,this.t.bind(this));this.changeLanguage(this.options.lng,h)};return this.options.resources||!this.options.initImmediate?c():setTimeout(c,0),l}loadResources(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Cc;const s=ie(e)?e:this.language;if(typeof e=="function"&&(r=e),!this.options.resources||this.options.partialBundledLanguages){if(s&&s.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return r();const i=[],o=a=>{if(!a||a==="cimode")return;this.services.languageUtils.toResolveHierarchy(a).forEach(c=>{c!=="cimode"&&i.indexOf(c)<0&&i.push(c)})};s?o(s):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(l=>o(l)),this.options.preload&&this.options.preload.forEach(a=>o(a)),this.services.backendConnector.load(i,this.options.ns,a=>{!a&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),r(a)})}else r(null)}reloadResources(e,n,r){const s=Xa();return typeof e=="function"&&(r=e,e=void 0),typeof n=="function"&&(r=n,n=void 0),e||(e=this.languages),n||(n=this.options.ns),r||(r=Cc),this.services.backendConnector.reload(e,n,i=>{s.resolve(),r(i)}),s}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&Bb.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1))for(let n=0;n<this.languages.length;n++){const r=this.languages[n];if(!(["cimode","dev"].indexOf(r)>-1)&&this.store.hasLanguageSomeTranslations(r)){this.resolvedLanguage=r;break}}}changeLanguage(e,n){var r=this;this.isLanguageChangingTo=e;const s=Xa();this.emit("languageChanging",e);const i=l=>{this.language=l,this.languages=this.services.languageUtils.toResolveHierarchy(l),this.resolvedLanguage=void 0,this.setResolvedLanguage(l)},o=(l,c)=>{c?(i(c),this.translator.changeLanguage(c),this.isLanguageChangingTo=void 0,this.emit("languageChanged",c),this.logger.log("languageChanged",c)):this.isLanguageChangingTo=void 0,s.resolve(function(){return r.t(...arguments)}),n&&n(l,function(){return r.t(...arguments)})},a=l=>{!e&&!l&&this.services.languageDetector&&(l=[]);const c=ie(l)?l:this.services.languageUtils.getBestMatchFromCodes(l);c&&(this.language||i(c),this.translator.language||this.translator.changeLanguage(c),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage&&this.services.languageDetector.cacheUserLanguage(c)),this.loadResources(c,h=>{o(h,c)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?a(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(a):this.services.languageDetector.detect(a):a(e),s}getFixedT(e,n,r){var s=this;const i=function(o,a){let l;if(typeof a!="object"){for(var c=arguments.length,h=new Array(c>2?c-2:0),f=2;f<c;f++)h[f-2]=arguments[f];l=s.options.overloadTranslationOptionHandler([o,a].concat(h))}else l={...a};l.lng=l.lng||i.lng,l.lngs=l.lngs||i.lngs,l.ns=l.ns||i.ns,l.keyPrefix!==""&&(l.keyPrefix=l.keyPrefix||r||i.keyPrefix);const p=s.options.keySeparator||".";let y;return l.keyPrefix&&Array.isArray(o)?y=o.map(w=>`${l.keyPrefix}${p}${w}`):y=l.keyPrefix?`${l.keyPrefix}${p}${o}`:o,s.t(y,l)};return ie(e)?i.lng=e:i.lngs=e,i.ns=n,i.keyPrefix=r,i}t(){return this.translator&&this.translator.translate(...arguments)}exists(){return this.translator&&this.translator.exists(...arguments)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const r=n.lng||this.resolvedLanguage||this.languages[0],s=this.options?this.options.fallbackLng:!1,i=this.languages[this.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const o=(a,l)=>{const c=this.services.backendConnector.state[`${a}|${l}`];return c===-1||c===0||c===2};if(n.precheck){const a=n.precheck(this,o);if(a!==void 0)return a}return!!(this.hasResourceBundle(r,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||o(r,e)&&(!s||o(i,e)))}loadNamespaces(e,n){const r=Xa();return this.options.ns?(ie(e)&&(e=[e]),e.forEach(s=>{this.options.ns.indexOf(s)<0&&this.options.ns.push(s)}),this.loadResources(s=>{r.resolve(),n&&n(s)}),r):(n&&n(),Promise.resolve())}loadLanguages(e,n){const r=Xa();ie(e)&&(e=[e]);const s=this.options.preload||[],i=e.filter(o=>s.indexOf(o)<0&&this.services.languageUtils.isSupportedCode(o));return i.length?(this.options.preload=s.concat(i),this.loadResources(o=>{r.resolve(),n&&n(o)}),r):(n&&n(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!e)return"rtl";const n=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],r=this.services&&this.services.languageUtils||new mT(vT());return n.indexOf(r.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return new au(e,n)}cloneInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Cc;const r=e.forkResourceStore;r&&delete e.forkResourceStore;const s={...this.options,...e,isClone:!0},i=new au(s);return(e.debug!==void 0||e.prefix!==void 0)&&(i.logger=i.logger.clone(e)),["store","services","language"].forEach(a=>{i[a]=this[a]}),i.services={...this.services},i.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},r&&(i.store=new fT(this.store.data,s),i.services.resourceStore=i.store),i.translator=new cd(i.services,s),i.translator.on("*",function(a){for(var l=arguments.length,c=new Array(l>1?l-1:0),h=1;h<l;h++)c[h-1]=arguments[h];i.emit(a,...c)}),i.init(s,n),i.translator.options=s,i.translator.backendConnector.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},i}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const Dt=au.createInstance();Dt.createInstance=au.createInstance;Dt.createInstance;Dt.dir;Dt.init;Dt.loadResources;Dt.reloadResources;Dt.use;Dt.changeLanguage;Dt.getFixedT;Dt.t;Dt.exists;Dt.setDefaultNamespace;Dt.hasLoadedNamespace;Dt.loadNamespaces;Dt.loadLanguages;const Y3=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,Z3={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"©","&#169;":"©","&reg;":"®","&#174;":"®","&hellip;":"…","&#8230;":"…","&#x2F;":"/","&#47;":"/"},e9=t=>Z3[t],t9=t=>t.replace(Y3,e9);let wT={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:t9};function n9(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};wT={...wT,...t}}const r9={type:"3rdParty",init(t){n9(t.options.react)}},s9={en:{common:{explore_title:"Explore Activities",create_title:"Create Activity",profile_title:"Your Profile"}},th:{common:{explore_title:"สำรวจกิจกรรม",create_title:"สร้างกิจกรรม",profile_title:"โปรไฟล์ของคุณ"}}};Dt.use(r9).init({resources:s9,lng:"en",fallbackLng:"en",interpolation:{escapeValue:!1}});function i9(){return g.jsxs("section",{className:"relative overflow-hidden bg-transparent",children:[g.jsx("div",{className:"pointer-events-none absolute -top-32 -left-24 h-96 w-96 rounded-full bg-gradient-to-br from-pink-500/20 to-amber-400/20 blur-3xl"}),g.jsx("div",{className:"pointer-events-none absolute -bottom-40 -right-24 h-[28rem] w-[28rem] rounded-full bg-gradient-to-tr from-blue-500/20 to-indigo-500/20 blur-3xl"}),g.jsx("div",{className:"container-app py-16 md:py-24 text-white",children:g.jsxs("div",{className:"grid md:grid-cols-2 gap-12 items-center",children:[g.jsxs("div",{className:"space-y-6 max-w-2xl",children:[g.jsx("div",{className:"inline-flex items-center gap-2 rounded-full border border-white/10 bg-white/5 px-3 py-1 text-sm backdrop-blur",children:"🎉 เจอเพื่อนไปทำกิจกรรมได้ง่ายขึ้น • จัดกลุ่ม • นัดเวลา • แชต"}),g.jsxs("h1",{className:"text-4xl md:text-5xl font-extrabold leading-tight tracking-tight",children:["ไปคนเดียวไม่ต้องเหงา ",g.jsx("br",{}),g.jsx("span",{className:"brand-gradient",children:"เพราะเราจะหาคนไปด้วยให้คุณ"})]}),g.jsx("p",{className:"text-white/80",children:"หาเพื่อนร่วมกิจกรรม, จัดกลุ่ม, นัดเวลา, คุยกันในแชต — ครบจบในที่เดียว"}),g.jsxs("div",{className:"flex flex-wrap gap-3",children:[g.jsx(Vr,{to:"/auth/signup",className:`inline-flex items-center justify-center rounded-xl px-5 py-3 font-semibold shadow-lg shadow-amber-500/10\r
                           bg-gradient-to-r from-amber-500 to-pink-500 hover:from-amber-400 hover:to-pink-400\r
                           focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-300 transition`,children:"Get Started"}),g.jsx(Vr,{to:"/explore",className:`inline-flex items-center justify-center rounded-xl px-5 py-3 font-semibold\r
                           border border-white/15 bg-white/5 hover:bg-white/10\r
                           focus:outline-none focus-visible:ring-2 focus-visible:ring-white/40 transition`,children:"Explore"})]}),g.jsxs("div",{className:"flex items-center gap-6 pt-2 text-sm text-white/70",children:[g.jsx("span",{children:"👥 500+ ผู้ใช้"}),g.jsx("span",{children:"🗓️ 100 กิจกรรม"}),g.jsx("span",{children:"⭐ 4.8/5 ความพึงพอใจ"})]})]}),g.jsxs("div",{className:"relative md:order-last order-first",children:[g.jsx("div",{className:"rounded-2xl bg-white/5 p-2 ring-1 ring-white/10 shadow-xl transition hover:scale-[1.01]",children:g.jsx("img",{src:"https://images.unsplash.com/photo-1529156069898-49953e39b3ac?q=80&w=1600&auto=format&fit=crop",alt:"Friends doing activities together",className:"h-auto w-full rounded-xl object-cover aspect-[16/10] ring-1 ring-white/10"})}),g.jsx("div",{className:"absolute -bottom-4 -right-4 h-24 w-24 rounded-xl bg-gradient-to-br from-blue-500/30 to-indigo-500/30 blur-2xl"})]})]})})]})}const Ac=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"];function o9(){var i;const[t,e]=L.useState([]),n=(o,a)=>{const l=t.findIndex(c=>c.day===Ac[o]&&c.hour===a);l>=0?e(c=>c.filter((h,f)=>f!==l)):e(c=>[...c,{day:Ac[o],hour:a}])},r=t.reduce((o,a)=>{const l=`${a.day}-${a.hour}`;return o[l]=(o[l]??0)+1,o},{}),s=(i=Object.entries(r).sort((o,a)=>a[1]-o[1])[0])==null?void 0:i[0];return g.jsxs("section",{className:"container-app py-8 text-white space-y-6",children:[g.jsx("h3",{className:"text-2xl font-extrabold",children:"Match Schedule"}),g.jsxs("div",{className:"overflow-x-auto card p-4",children:[g.jsxs("div",{className:"flex items-center gap-3 mb-3 text-sm opacity-80",children:[g.jsx("span",{className:"inline-block w-4 h-4 rounded bg-white/30"})," เลือกแล้ว",g.jsx("span",{className:"inline-block w-4 h-4 rounded ring-2 ring-brand-gold ml-4"})," เวลาที่แนะนำ"]}),g.jsxs("table",{className:"min-w-[720px] w-full border-separate border-spacing-2",children:[g.jsx("thead",{children:g.jsxs("tr",{children:[g.jsx("th",{className:"text-left opacity-80",children:"Hour"}),Ac.map(o=>g.jsx("th",{className:"text-left opacity-80",children:o},o))]})}),g.jsx("tbody",{children:Array.from({length:14}).map((o,a)=>{const l=8+a;return g.jsxs("tr",{children:[g.jsxs("td",{className:"opacity-70 text-sm",children:[l,":00"]}),Ac.map((c,h)=>{const f=t.some(w=>w.day===c&&w.hour===l),p=`${c}-${l}`,y=s===p;return g.jsx("td",{children:g.jsx("button",{onClick:()=>n(h,l),className:`w-20 h-9 rounded-md text-sm transition ${f?"bg-white/30":"bg-white/10 hover:bg-white/15"} ${y?"ring-2 ring-brand-gold":""}`,title:p,"aria-pressed":f,children:f?"✔":""})},h)})]},a)})})]})]}),g.jsxs("div",{className:"card p-4",children:[g.jsx("div",{className:"font-semibold mb-1",children:"ข้อเสนอเวลาที่ดีที่สุด (demo)"}),g.jsx("div",{className:"opacity-90",children:s?s.replace("-"," @ "):"เลือกเวลาจากตารางเพื่อดูผลลัพธ์"})]})]})}function a9(){const{uid:t=""}=Xx(),{meUid:e,getMsgs:n,sendTo:r}=Ev();L.useMemo(()=>it.find(h=>h.uid==="me"),[]);const s=L.useMemo(()=>it.find(h=>h.uid===t)||null,[t]),[i,o]=L.useState(""),a=L.useRef(null),l=L.useMemo(()=>n(t),[n,t]);if(L.useEffect(()=>{var h;(h=a.current)==null||h.scrollIntoView({behavior:"smooth"})},[l]),!s)return g.jsx("section",{className:"container-app py-8",children:g.jsxs("div",{className:"card p-6 space-y-3",children:[g.jsx("div",{className:"text-lg font-semibold",children:"ไม่พบผู้ใช้สำหรับแชท"}),g.jsx(Vr,{to:"/explore",className:"btn-primary w-fit",children:"กลับไป Explore"})]})});const c=()=>{const h=i.trim();h&&(r(s.uid,h),o(""))};return g.jsxs("section",{className:"container-app py-8 space-y-4",children:[g.jsxs("header",{className:"flex items-center gap-3",children:[g.jsx("img",{src:s.avatar,alt:s.name,className:"h-10 w-10 rounded-full object-cover"}),g.jsx("h3",{className:"text-xl font-semibold",children:s.name})]}),g.jsxs("div",{className:"card p-3 h-[65vh] md:h-[70vh] flex flex-col",children:[g.jsxs("div",{className:"flex-1 overflow-y-auto space-y-2",children:[l.map((h,f)=>{const p=h.from===e;return g.jsx("div",{className:`flex ${p?"justify-end":"justify-start"}`,children:g.jsx("div",{className:["px-3 py-2 rounded-lg max-w-[75%] break-words text-sm",p?"bg-amber-300 text-black":"bg-white/10 text-white"].join(" "),children:h.text})},f)}),!l.length&&g.jsx("div",{className:"opacity-60 text-center text-sm",children:"ยังไม่มีข้อความ — เริ่มพิมพ์ได้เลย"}),g.jsx("div",{ref:a})]}),g.jsxs("div",{className:"mt-3 flex gap-2",children:[g.jsx("input",{className:"input flex-1",value:i,onChange:h=>o(h.target.value),placeholder:`พิมพ์ถึง ${s.name}...`,onKeyDown:h=>h.key==="Enter"&&c()}),g.jsx("button",{className:"btn-primary px-5",onClick:c,children:"ส่ง"})]})]})]})}function l9(){const{isOpen:t,openPeer:e,closeDM:n,getMsgs:r,sendTo:s,meUid:i}=Ev(),[o,a]=L.useState("");if(!t||!e)return null;const l=r(e.uid),c=()=>{const h=o.trim();h&&(s(e.uid,h),a(""))};return g.jsx("div",{className:"fixed bottom-4 right-4 w-80 text-sm z-40",children:g.jsxs("div",{className:"card h-96 flex flex-col shadow-xl",children:[g.jsxs("div",{className:"flex items-center justify-between p-2 border-b border-white/10",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("img",{src:e.avatar,alt:e.name,className:"h-6 w-6 rounded-full object-cover"}),g.jsx("span",{className:"font-semibold",children:e.name})]}),g.jsx("button",{onClick:n,className:"rounded px-2 py-1 hover:bg-white/10","aria-label":"Close",title:"Close",children:"✕"})]}),g.jsxs("div",{className:"flex-1 overflow-y-auto p-2 space-y-2",children:[l.map((h,f)=>{const p=h.from===i;return g.jsx("div",{className:`flex ${p?"justify-end":"justify-start"}`,children:g.jsx("div",{className:["px-2 py-1 rounded-lg max-w-[75%] break-words",p?"bg-brand-amber/80 text-black":"bg-white/10 text-white"].join(" "),children:h.text})},f)}),!l.length&&g.jsx("div",{className:"opacity-60 text-center text-xs",children:"เริ่มแชทได้เลย"})]}),g.jsxs("div",{className:"flex gap-2 p-2 border-t border-white/10",children:[g.jsx("input",{className:"flex-1 input text-sm",value:o,onChange:h=>a(h.target.value),placeholder:"พิมพ์ข้อความ…",onKeyDown:h=>h.key==="Enter"&&c()}),g.jsx("button",{className:"btn-primary px-3 py-1 text-sm",onClick:c,children:"ส่ง"})]})]})})}function u9(){return g.jsx(YU,{children:g.jsxs("div",{className:"min-h-screen bg-primary-900",children:[g.jsx(Wj,{}),g.jsx("main",{className:"mx-auto max-w-7xl p-4 sm:p-6 space-y-6",children:g.jsxs(MP,{children:[g.jsx(sn,{path:"/",element:g.jsx(i9,{})}),g.jsx(sn,{path:"/explore",element:g.jsx(Zj,{})}),g.jsx(sn,{path:"/groups/:id",element:g.jsx(Ja,{children:g.jsx(eF,{})})}),g.jsx(sn,{path:"/groups/:id/schedule",element:g.jsx(Ja,{children:g.jsx(o9,{})})}),g.jsx(sn,{path:"/create",element:g.jsx(Ja,{children:g.jsx(iB,{})})}),g.jsx(sn,{path:"/profile",element:g.jsx(Ja,{children:g.jsx(S3,{})})}),g.jsx(sn,{path:"/dm/:uid",element:g.jsx(Ja,{children:g.jsx(a9,{})})}),g.jsx(sn,{path:"/auth/signin",element:g.jsx(x3,{})}),g.jsx(sn,{path:"/auth/signup",element:g.jsx(R3,{})}),g.jsx(sn,{path:"/auth/reset-password",element:g.jsx(b3,{})}),g.jsx(sn,{path:"/auth/reset",element:g.jsx(k3,{})}),g.jsx(sn,{path:"*",element:g.jsx(tR,{to:"/"})})]})}),g.jsx(l9,{}),g.jsx(KU,{})]})})}const c9=new Ij;Rp.createRoot(document.getElementById("root")).render(g.jsx(BT.StrictMode,{children:g.jsx(Pj,{client:c9,children:g.jsx(uj,{children:g.jsx(qP,{children:g.jsx(u9,{})})})})}));
